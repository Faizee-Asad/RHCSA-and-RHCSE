var d="2.5.0";var l=d;var u={env:"local",loaded:!1,styles:[]};var f="https://sfbff.newfold.com/static/nfd-logger-browser/18/nfd-logger-browser.umd.js",w={local:"DEV",production:"PROD",development:"QA",staging:"STG"},b="[MTA-SNIPPETS]",v="MTASnippets_",c=[],E=new URL(window.location.href).searchParams,s={async onLoggerLoaded(){let e=w[window._snippetEnv||"local"];window.sfLogger.init("MTA-SNIPPETS",e,"MTA-SNIPPETS"),console.log(this.getLogText(`Sending ${c.length} queued logs...`)),c.forEach(({event:t,level:n})=>{this.sendEvent(t,n)})},async load(){if(window._snippetLogger)return!0;window._snippetLogger=!0,window.addEventListener("loggerLoaded",this.onLoggerLoaded.bind(this));let e=await fetch(f),t=document.createElement("script");t.innerText=await e.text(),document.querySelector("head")?.append(t)},isLoggable(){let e=window._snippetEnv;return["production","staging"].includes(e)},getLogText(e){return`${b} (${new Date().toLocaleTimeString()}): ${e}`},getEventType(e){return v+e},sendEvent(e,t){this.isLoggable()&&window.sfLogger[t](e)},logEvent(e,t){window.sfLogger===void 0?c.push({event:e,level:t}):this.sendEvent(e,t)},error(e){let{eventType:t,message:n,error:o,customAttributes:r}=e,a=this.getLogText(n),i={message:n??"Error during the execution of the service",eventType:this.getEventType(t??"Error"),customAttributes:{userAgent:navigator.userAgent,errorName:o?.name,errorMessage:o?.message,errorStack:o?.stack,...r}};this.logEvent(i,"error"),o?console.error(`${a}

`,o):console.error(a)},info(e){let{eventType:t,message:n,customAttributes:o}=e,r=this.getLogText(n),a={message:n??"Info logged",eventType:this.getEventType(t??"Log"),customAttributes:{userAgent:navigator.userAgent,...o}};this.logEvent(a,"info"),console.log(r)},debug(e){if(!(E.get("debug")==="true"))return;let n=this.getLogText(`(DEBUG) ${e}`);console.log(n)},warn(e,t){let n=this.getLogText(e);console.warn(n,t)},infoPerformance(e){let{label:t,callback:n,customAttributes:o}=e,r=performance.now();n();let a=performance.now(),i=Math.round(a-r);s.info({message:`Execution time ${i}ms`,eventType:"PeformanceInfo",customAttributes:{label:t,loadTime:i,...o}})}};function g(){return new URLSearchParams(window.location.search).get("env")||window._satellite?.environment?.stage||"local"}function p(e){return new URL(`/snippets${e}`,import.meta.url).toString()}var y=new URL(import.meta.url).searchParams,L=y.get("snippet"),m=window._snippetEnv=g();s.load();function T(e){s.infoPerformance({label:"LoadTime",callback:async()=>{(await import(e)).load()},customAttributes:{url:e}})}async function x(){let e=L,t=p(e);try{T(t),s.info({message:`Successfully loaded '${e}'`,eventType:"LoaderSuccessInfo"})}catch(n){s.error({message:`unable to load '${e}'`,eventType:"LoaderError",error:n})}}window._snippetMeta===void 0&&(s.debug(`Running on version ${l}`),s.debug(`Using '${m}' environment`),window._snippetMeta=u,window._snippetMeta.env=m);x();
//# sourceMappingURL=loader.js.map
