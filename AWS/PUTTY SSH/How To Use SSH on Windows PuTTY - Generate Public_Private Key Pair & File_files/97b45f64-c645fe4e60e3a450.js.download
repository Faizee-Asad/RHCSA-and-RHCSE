"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2039],{7491:function(e,t,r){let n,a;r.d(t,{As:function(){return n0},Lv:function(){return dH},Om:function(){return pS},W$:function(){return n5},Wg:function(){return p6},Z6:function(){return pw},Zk:function(){return nd},dq:function(){return n2},ff:function(){return pG},me:function(){return pd},n2:function(){return n3},p7:function(){return ha},q:function(){return pp},us:function(){return uC}});/**
 * @license
 *
 * Copyright 2024 Coveo Solutions Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 * 
 *       http://www.apache.org/licenses/LICENSE-2.0
 * 
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var i,o,s,l,u,c,d,f,p,h,g,v,y=Object.create,m=Object.defineProperty,S=Object.getOwnPropertyDescriptor,b=Object.getOwnPropertyNames,w=Object.getPrototypeOf,C=Object.prototype.hasOwnProperty,k=e=>m(e,"__esModule",{value:!0}),O=r(3373),I=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),A=(e,t)=>{for(var r in k(e),t)m(e,r,{get:t[r],enumerable:!0})},q=(e,t,r)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let n of b(t))C.call(e,n)||"default"===n||m(e,n,{get:()=>t[n],enumerable:!(r=S(t,n))||r.enumerable});return e},E=e=>q(k(m(null!=e?y(w(e)):{},"default",e&&e.__esModule&&"default"in e?{get:()=>e.default,enumerable:!0}:{value:e,enumerable:!0})),e),x=I((e,t)=>{function r(e){return t.exports=r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t.exports.__esModule=!0,t.exports.default=t.exports,r(e)}t.exports=r,t.exports.__esModule=!0,t.exports.default=t.exports}),R=I((e,t)=>{var r=x().default;t.exports=function(e,t){if("object"!==r(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!==r(a))return a;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)},t.exports.__esModule=!0,t.exports.default=t.exports}),D=I((e,t)=>{var r=x().default,n=R();t.exports=function(e){var t=n(e,"string");return"symbol"===r(t)?t:String(t)},t.exports.__esModule=!0,t.exports.default=t.exports}),j=I((e,t)=>{var r=D();t.exports=function(e,t,n){return(t=r(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},t.exports.__esModule=!0,t.exports.default=t.exports}),F=I((e,t)=>{var r=j();function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}t.exports=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?n(Object(a),!0).forEach(function(t){r(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):n(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e},t.exports.__esModule=!0,t.exports.default=t.exports}),P=I(e=>{Object.defineProperty(e,"__esModule",{value:!0});var t=F(),r=t&&"object"==typeof t&&"default"in t?t:{default:t};function n(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var a="function"==typeof Symbol&&Symbol.observable||"@@observable",i=function(){return Math.random().toString(36).substring(7).split("").join(".")},o={INIT:"@@redux/INIT"+i(),REPLACE:"@@redux/REPLACE"+i(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+i()}};function s(e,t,r){if("function"==typeof t&&"function"==typeof r||"function"==typeof r&&"function"==typeof arguments[3])throw Error(n(0));if("function"==typeof t&&void 0===r&&(r=t,t=void 0),void 0!==r){if("function"!=typeof r)throw Error(n(1));return r(s)(e,t)}if("function"!=typeof e)throw Error(n(2));var i,l=e,u=t,c=[],d=c,f=!1;function p(){d===c&&(d=c.slice())}function h(){if(f)throw Error(n(3));return u}function g(e){if("function"!=typeof e)throw Error(n(4));if(f)throw Error(n(5));var t=!0;return p(),d.push(e),function(){if(t){if(f)throw Error(n(6));t=!1,p();var r=d.indexOf(e);d.splice(r,1),c=null}}}function v(e){if(!function(e){if("object"!=typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}(e))throw Error(n(7));if(void 0===e.type)throw Error(n(8));if(f)throw Error(n(9));try{f=!0,u=l(u,e)}finally{f=!1}for(var t=c=d,r=0;r<t.length;r++)(0,t[r])();return e}return v({type:o.INIT}),(i={dispatch:v,subscribe:g,getState:h,replaceReducer:function(e){if("function"!=typeof e)throw Error(n(10));l=e,v({type:o.REPLACE})}})[a]=function(){var e;return(e={subscribe:function(e){if("object"!=typeof e||null===e)throw Error(n(11));function t(){e.next&&e.next(h())}return t(),{unsubscribe:g(t)}}})[a]=function(){return this},e},i}function l(e,t){return function(){return t(e.apply(this,arguments))}}function u(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce(function(e,t){return function(){return e(t.apply(void 0,arguments))}})}e.__DO_NOT_USE__ActionTypes=o,e.applyMiddleware=function(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return function(e){return function(){var a=e.apply(void 0,arguments),i=function(){throw Error(n(15))},o={getState:a.getState,dispatch:function(){return i.apply(void 0,arguments)}},s=t.map(function(e){return e(o)});return i=u.apply(void 0,s)(a.dispatch),r.default(r.default({},a),{},{dispatch:i})}}},e.bindActionCreators=function(e,t){if("function"==typeof e)return l(e,t);if("object"!=typeof e||null===e)throw Error(n(16));var r={};for(var a in e){var i=e[a];"function"==typeof i&&(r[a]=l(i,t))}return r},e.combineReducers=function(e){for(var t=Object.keys(e),r={},a=0;a<t.length;a++){var i=t[a];"function"==typeof e[i]&&(r[i]=e[i])}var s,l=Object.keys(r);try{!function(e){Object.keys(e).forEach(function(t){var r=e[t];if(void 0===r(void 0,{type:o.INIT}))throw Error(n(12));if(void 0===r(void 0,{type:o.PROBE_UNKNOWN_ACTION()}))throw Error(n(13))})}(r)}catch(e){s=e}return function(e,t){if(void 0===e&&(e={}),s)throw s;for(var a=!1,i={},o=0;o<l.length;o++){var u=l[o],c=r[u],d=e[u],f=c(d,t);if(void 0===f)throw t&&t.type,Error(n(14));i[u]=f,a=a||f!==d}return(a=a||l.length!==Object.keys(e).length)?i:e}},e.compose=u,e.createStore=s,e.legacy_createStore=s}),M=I((e,t)=>{function r(e){try{return JSON.stringify(e)}catch{return'"[Circular]"'}}t.exports=function(e,t,n){var a=n&&n.stringify||r;if("object"==typeof e&&null!==e){var i=t.length+1;if(1===i)return e;var o=Array(i);o[0]=a(e);for(var s=1;s<i;s++)o[s]=a(t[s]);return o.join(" ")}if("string"!=typeof e)return e;var l=t.length;if(0===l)return e;for(var u="",c=0,d=-1,f=e&&e.length||0,p=0;p<f;){if(37===e.charCodeAt(p)&&p+1<f){switch(d=d>-1?d:0,e.charCodeAt(p+1)){case 100:case 102:if(c>=l||null==t[c])break;d<p&&(u+=e.slice(d,p)),u+=Number(t[c]),d=p+2,p++;break;case 105:if(c>=l||null==t[c])break;d<p&&(u+=e.slice(d,p)),u+=Math.floor(Number(t[c])),d=p+2,p++;break;case 79:case 111:case 106:if(c>=l||void 0===t[c])break;d<p&&(u+=e.slice(d,p));var h=typeof t[c];if("string"===h){u+="'"+t[c]+"'",d=p+2,p++;break}if("function"===h){u+=t[c].name||"<anonymous>",d=p+2,p++;break}u+=a(t[c]),d=p+2,p++;break;case 115:if(c>=l)break;d<p&&(u+=e.slice(d,p)),u+=String(t[c]),d=p+2,p++;break;case 37:d<p&&(u+=e.slice(d,p)),u+="%",d=p+2,p++,c--}++c}++p}return -1===d?e:(d<f&&(u+=e.slice(d)),u)}}),T=I((e,t)=>{var r=M();t.exports=u;var n=function(){function e(e){return void 0!==e&&e}try{return"undefined"!=typeof globalThis||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return e(self)||e(window)||e(this)||{}}}().console||{};function a(e,t){return"silent"===e?1/0:t.levels.values[e]}var i=Symbol("pino.logFuncs"),o=Symbol("pino.hierarchy"),s={error:"log",fatal:"error",warn:"error",info:"log",debug:"log",trace:"log"};function l(e,t){let r={logger:t,parent:e[o]};t[o]=r}function u(e){var t,r;let o,p,h;(e=e||{}).browser=e.browser||{};let g=e.browser.transmit;if(g&&"function"!=typeof g.send)throw Error("pino: transmit option must have a send function");let S=e.browser.write||n;e.browser.write&&(e.browser.asObject=!0);let b=e.serializers||{},w=Array.isArray(t=e.browser.serialize)?t.filter(function(e){return"!stdSerializers.err"!==e}):!0===t&&Object.keys(b),C=e.browser.serialize;Array.isArray(e.browser.serialize)&&e.browser.serialize.indexOf("!stdSerializers.err")>-1&&(C=!1);let k=Object.keys(e.customLevels||{}),O=["error","fatal","warn","info","debug","trace"].concat(k);"function"==typeof S&&O.forEach(function(e){S[e]=S}),(!1===e.enabled||e.browser.disabled)&&(e.level="silent");let I=e.level||"info",A=Object.create(S);A.log||(A.log=v),o={},O.forEach(e=>{o[e]=S[e]?S[e]:n[e]||n[s[e]||"log"]||v}),A[i]=o,l({},A),Object.defineProperty(A,"levelVal",{get:function(){return a(this.level,this)}}),Object.defineProperty(A,"level",{get:function(){return this._level},set:function(e){if("silent"!==e&&!this.levels.values[e])throw Error("unknown level "+e);this._level=e,c(this,q,A,"error"),c(this,q,A,"fatal"),c(this,q,A,"warn"),c(this,q,A,"info"),c(this,q,A,"debug"),c(this,q,A,"trace"),k.forEach(e=>{c(this,q,A,e)})}});let q={transmit:g,serialize:w,asObject:e.browser.asObject,levels:O,timestamp:"function"==typeof(r=e).timestamp?r.timestamp:!1===r.timestamp?y:m};return A.levels=(p=e.customLevels||{},{values:Object.assign({},u.levels.values,p),labels:Object.assign({},u.levels.labels,(h={},Object.keys(p).forEach(function(e){h[p[e]]=e}),h))}),A.level=I,A.setMaxListeners=A.getMaxListeners=A.emit=A.addListener=A.on=A.prependListener=A.once=A.prependOnceListener=A.removeListener=A.removeAllListeners=A.listeners=A.listenerCount=A.eventNames=A.write=A.flush=v,A.serializers=b,A._serialize=w,A._stdErrSerialize=C,A.child=function(t,r){if(!t)throw Error("missing bindings for child Pino");r=r||{},w&&t.serializers&&(r.serializers=t.serializers);let n=r.serializers;if(w&&n){var a=Object.assign({},b,n),i=!0===e.browser.serialize?Object.keys(a):w;delete t.serializers,d([t],i,a,this._stdErrSerialize)}function o(e){this._childLevel=(0|e._childLevel)+1,this.bindings=t,a&&(this.serializers=a,this._serialize=i),g&&(this._logEvent=f([].concat(e._logEvent.bindings,t)))}o.prototype=this;let s=new o(this);return l(this,s),s.level=this.level,s},g&&(A._logEvent=f()),A}function c(e,t,s,l){var u,c;if(e[l]=a(e.level,s)>a(l,s)?v:s[i][l],!t.transmit&&e[l]===v)return;e[l]=(u=e[i][l],function(){let i=t.timestamp(),o=Array(arguments.length),c=Object.getPrototypeOf&&Object.getPrototypeOf(this)===n?n:this;for(var p,h=0;h<o.length;h++)o[h]=arguments[h];if(t.serialize&&!t.asObject&&d(o,this._serialize,this.serializers,this._stdErrSerialize),t.asObject?u.call(c,function(e,t,n,a){e._serialize&&d(n,e._serialize,e.serializers,e._stdErrSerialize);let i=n.slice(),o=i[0],s={};a&&(s.time=a),s.level=e.levels.values[t];let l=(0|e._childLevel)+1;if(l<1&&(l=1),null!==o&&"object"==typeof o){for(;l--&&"object"==typeof i[0];)Object.assign(s,i.shift());o=i.length?r(i.shift(),i):void 0}else"string"==typeof o&&(o=r(i.shift(),i));return void 0!==o&&(s.msg=o),s}(this,l,o,i)):u.apply(c,o),t.transmit){let r,n,u,c,h,g,v=t.transmit.level||e._level,y=s.levels.values[v],m=s.levels.values[l];if(m<y)return;r=(p={ts:i,methodLevel:l,methodValue:m,transmitLevel:v,transmitValue:s.levels.values[t.transmit.level||e._level],send:t.transmit.send,val:a(e._level,s)}).send,n=p.ts,u=p.methodLevel,c=p.methodValue,h=p.val,g=this._logEvent.bindings,d(o,this._serialize||Object.keys(this.serializers),this.serializers,void 0===this._stdErrSerialize||this._stdErrSerialize),this._logEvent.ts=n,this._logEvent.messages=o.filter(function(e){return -1===g.indexOf(e)}),this._logEvent.level.label=u,this._logEvent.level.value=c,r(u,this._logEvent,h),this._logEvent=f(g)}});let p=function(e){let t=[];e.bindings&&t.push(e.bindings);let r=e[o];for(;r.parent;)(r=r.parent).logger.bindings&&t.push(r.logger.bindings);return t.reverse()}(e);0!==p.length&&(e[l]=(c=e[l],function(){return c.apply(this,[...p,...arguments])}))}function d(e,t,r,n){for(let a in e)if(n&&e[a]instanceof Error)e[a]=u.stdSerializers.err(e[a]);else if("object"==typeof e[a]&&!Array.isArray(e[a]))for(let n in e[a])t&&t.indexOf(n)>-1&&n in r&&(e[a][n]=r[n](e[a][n]))}function f(e){return{ts:0,messages:[],bindings:e||[],level:{label:"",value:0}}}function p(e){let t={type:e.constructor.name,msg:e.message,stack:e.stack};for(let r in e)void 0===t[r]&&(t[r]=e[r]);return t}function h(){return{}}function g(e){return e}function v(){}function y(){return!1}function m(){return Date.now()}u.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}},u.stdSerializers={mapHttpRequest:h,mapHttpResponse:h,wrapRequestSerializer:g,wrapResponseSerializer:g,wrapErrorSerializer:g,req:h,res:h,err:p,errWithCause:p},u.stdTimeFunctions=Object.assign({},{nullTime:y,epochTime:m,unixTime:function(){return Math.round(Date.now()/1e3)},isoTime:function(){return new Date(Date.now()).toISOString()}}),t.exports.default=u,t.exports.pino=u}),U=I((e,t)=>{var r,n,a=Object.prototype,i=Function.prototype.toString,o=a.hasOwnProperty,s=i.call(Object),l=a.toString,u=(r=Object.getPrototypeOf,n=Object,function(e){return r(n(e))});t.exports=function(e){if(!(e&&"object"==typeof e)||"[object Object]"!=l.call(e)||function(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch{}return t}(e))return!1;var t=u(e);if(null===t)return!0;var r=o.call(t,"constructor")&&t.constructor;return"function"==typeof r&&r instanceof r&&i.call(r)==s}}),V=I(e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r.applyMiddleware.apply(void 0,function(e){if(!Array.isArray(e))return Array.from(e);for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}(e))(function(){var e=[],r=[];return{getState:function(){return a(t)?t(e):t},getActions:function(){return e},dispatch:function(t){if(!(0,n.default)(t))throw Error("Actions must be plain objects. Use custom middleware for async actions.");if(void 0===t.type)throw Error('Actions may not have an undefined "type" property. Have you misspelled a constant? Action: '+JSON.stringify(t));e.push(t);for(var a=0;a<r.length;a++)r[a]();return t},clearActions:function(){e=[]},subscribe:function(e){return a(e)&&r.push(e),function(){var t=r.indexOf(e);t<0||r.splice(t,1)}},replaceReducer:function(e){if(!a(e))throw Error("Expected the nextReducer to be a function.")}}})()}};var t,r=P(),n=(t=U())&&t.__esModule?t:{default:t},a=function(e){return"function"==typeof e}}),L=I((e,t)=>{var n,a;n=e,a=function(){var e="millisecond",t="second",r="minute",n="hour",a="week",i="month",o="quarter",s="year",l="date",u="Invalid Date",c=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,d=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,f=function(e,t,r){var n=String(e);return!n||n.length>=t?e:""+Array(t+1-n.length).join(r)+e},p="en",h={};h[p]={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(e){var t=["th","st","nd","rd"],r=e%100;return"["+e+(t[(r-20)%10]||t[r]||"th")+"]"}};var g="$isDayjsObject",v=function(e){return e instanceof b||!(!e||!e[g])},y=function e(t,r,n){var a;if(!t)return p;if("string"==typeof t){var i=t.toLowerCase();h[i]&&(a=i),r&&(h[i]=r,a=i);var o=t.split("-");if(!a&&o.length>1)return e(o[0])}else{var s=t.name;h[s]=t,a=s}return!n&&a&&(p=a),a||!n&&p},m=function(e,t){if(v(e))return e.clone();var r="object"==typeof t?t:{};return r.date=e,r.args=arguments,new b(r)},S={s:f,z:function(e){var t=-e.utcOffset(),r=Math.abs(t);return(t<=0?"+":"-")+f(Math.floor(r/60),2,"0")+":"+f(r%60,2,"0")},m:function e(t,r){if(t.date()<r.date())return-e(r,t);var n=12*(r.year()-t.year())+(r.month()-t.month()),a=t.clone().add(n,i),o=r-a<0,s=t.clone().add(n+(o?-1:1),i);return+(-(n+(r-a)/(o?a-s:s-a))||0)},a:function(e){return e<0?Math.ceil(e)||0:Math.floor(e)},p:function(u){return({M:i,y:s,w:a,d:"day",D:l,h:n,m:r,s:t,ms:e,Q:o})[u]||String(u||"").toLowerCase().replace(/s$/,"")},u:function(e){return void 0===e}};S.l=y,S.i=v,S.w=function(e,t){return m(e,{locale:t.$L,utc:t.$u,x:t.$x,$offset:t.$offset})};var b=function(){function f(e){this.$L=y(e.locale,null,!0),this.parse(e),this.$x=this.$x||e.x||{},this[g]=!0}var p=f.prototype;return p.parse=function(e){this.$d=function(e){var t=e.date,r=e.utc;if(null===t)return new Date(NaN);if(S.u(t))return new Date;if(t instanceof Date)return new Date(t);if("string"==typeof t&&!/Z$/i.test(t)){var n=t.match(c);if(n){var a=n[2]-1||0,i=(n[7]||"0").substring(0,3);return r?new Date(Date.UTC(n[1],a,n[3]||1,n[4]||0,n[5]||0,n[6]||0,i)):new Date(n[1],a,n[3]||1,n[4]||0,n[5]||0,n[6]||0,i)}}return new Date(t)}(e),this.init()},p.init=function(){var e=this.$d;this.$y=e.getFullYear(),this.$M=e.getMonth(),this.$D=e.getDate(),this.$W=e.getDay(),this.$H=e.getHours(),this.$m=e.getMinutes(),this.$s=e.getSeconds(),this.$ms=e.getMilliseconds()},p.$utils=function(){return S},p.isValid=function(){return this.$d.toString()!==u},p.isSame=function(e,t){var r=m(e);return this.startOf(t)<=r&&r<=this.endOf(t)},p.isAfter=function(e,t){return m(e)<this.startOf(t)},p.isBefore=function(e,t){return this.endOf(t)<m(e)},p.$g=function(e,t,r){return S.u(e)?this[t]:this.set(r,e)},p.unix=function(){return Math.floor(this.valueOf()/1e3)},p.valueOf=function(){return this.$d.getTime()},p.startOf=function(e,o){var u=this,c=!!S.u(o)||o,d=S.p(e),f=function(e,t){var r=S.w(u.$u?Date.UTC(u.$y,t,e):new Date(u.$y,t,e),u);return c?r:r.endOf("day")},p=function(e,t){return S.w(u.toDate()[e].apply(u.toDate("s"),(c?[0,0,0,0]:[23,59,59,999]).slice(t)),u)},h=this.$W,g=this.$M,v=this.$D,y="set"+(this.$u?"UTC":"");switch(d){case s:return c?f(1,0):f(31,11);case i:return c?f(1,g):f(0,g+1);case a:var m=this.$locale().weekStart||0,b=(h<m?h+7:h)-m;return f(c?v-b:v+(6-b),g);case"day":case l:return p(y+"Hours",0);case n:return p(y+"Minutes",1);case r:return p(y+"Seconds",2);case t:return p(y+"Milliseconds",3);default:return this.clone()}},p.endOf=function(e){return this.startOf(e,!1)},p.$set=function(a,o){var u,c=S.p(a),d="set"+(this.$u?"UTC":""),f=((u={}).day=d+"Date",u[l]=d+"Date",u[i]=d+"Month",u[s]=d+"FullYear",u[n]=d+"Hours",u[r]=d+"Minutes",u[t]=d+"Seconds",u[e]=d+"Milliseconds",u)[c],p="day"===c?this.$D+(o-this.$W):o;if(c===i||c===s){var h=this.clone().set(l,1);h.$d[f](p),h.init(),this.$d=h.set(l,Math.min(this.$D,h.daysInMonth())).$d}else f&&this.$d[f](p);return this.init(),this},p.set=function(e,t){return this.clone().$set(e,t)},p.get=function(e){return this[S.p(e)]()},p.add=function(e,o){var l,u=this;e=Number(e);var c=S.p(o),d=function(t){var r=m(u);return S.w(r.date(r.date()+Math.round(t*e)),u)};if(c===i)return this.set(i,this.$M+e);if(c===s)return this.set(s,this.$y+e);if("day"===c)return d(1);if(c===a)return d(7);var f=((l={})[r]=6e4,l[n]=36e5,l[t]=1e3,l)[c]||1,p=this.$d.getTime()+e*f;return S.w(p,this)},p.subtract=function(e,t){return this.add(-1*e,t)},p.format=function(e){var t=this,r=this.$locale();if(!this.isValid())return r.invalidDate||u;var n=e||"YYYY-MM-DDTHH:mm:ssZ",a=S.z(this),i=this.$H,o=this.$m,s=this.$M,l=r.weekdays,c=r.months,f=r.meridiem,p=function(e,r,a,i){return e&&(e[r]||e(t,n))||a[r].slice(0,i)},h=function(e){return S.s(i%12||12,e,"0")},g=f||function(e,t,r){var n=e<12?"AM":"PM";return r?n.toLowerCase():n};return n.replace(d,function(e,n){return n||function(e){switch(e){case"YY":return String(t.$y).slice(-2);case"YYYY":return S.s(t.$y,4,"0");case"M":return s+1;case"MM":return S.s(s+1,2,"0");case"MMM":return p(r.monthsShort,s,c,3);case"MMMM":return p(c,s);case"D":return t.$D;case"DD":return S.s(t.$D,2,"0");case"d":return String(t.$W);case"dd":return p(r.weekdaysMin,t.$W,l,2);case"ddd":return p(r.weekdaysShort,t.$W,l,3);case"dddd":return l[t.$W];case"H":return String(i);case"HH":return S.s(i,2,"0");case"h":return h(1);case"hh":return h(2);case"a":return g(i,o,!0);case"A":return g(i,o,!1);case"m":return String(o);case"mm":return S.s(o,2,"0");case"s":return String(t.$s);case"ss":return S.s(t.$s,2,"0");case"SSS":return S.s(t.$ms,3,"0");case"Z":return a}return null}(e)||a.replace(":","")})},p.utcOffset=function(){return-(15*Math.round(this.$d.getTimezoneOffset()/15))},p.diff=function(e,l,u){var c,d=this,f=S.p(l),p=m(e),h=(p.utcOffset()-this.utcOffset())*6e4,g=this-p,v=function(){return S.m(d,p)};switch(f){case s:c=v()/12;break;case i:c=v();break;case o:c=v()/3;break;case a:c=(g-h)/6048e5;break;case"day":c=(g-h)/864e5;break;case n:c=g/36e5;break;case r:c=g/6e4;break;case t:c=g/1e3;break;default:c=g}return u?c:S.a(c)},p.daysInMonth=function(){return this.endOf(i).$D},p.$locale=function(){return h[this.$L]},p.locale=function(e,t){if(!e)return this.$L;var r=this.clone(),n=y(e,t,!0);return n&&(r.$L=n),r},p.clone=function(){return S.w(this.$d,this)},p.toDate=function(){return new Date(this.valueOf())},p.toJSON=function(){return this.isValid()?this.toISOString():null},p.toISOString=function(){return this.$d.toISOString()},p.toString=function(){return this.$d.toUTCString()},f}(),w=b.prototype;return m.prototype=w,[["$ms",e],["$s",t],["$m",r],["$H",n],["$W","day"],["$M",i],["$y",s],["$D",l]].forEach(function(e){w[e[1]]=function(t){return this.$g(t,e[0],e[1])}}),m.extend=function(e,t){return e.$i||(e(t,b,m),e.$i=!0),m},m.locale=y,m.isDayjs=v,m.unix=function(e){return m(1e3*e)},m.en=h[p],m.Ls=h,m.p={},m},"object"==typeof e&&void 0!==t?t.exports=a():"function"==typeof define&&r.amdO?define(a):(n="undefined"!=typeof globalThis?globalThis:n||self).dayjs=a()}),$=I((e,t)=>{var n,a;n=e,a=function(){var e={year:0,month:1,day:2,hour:3,minute:4,second:5},t={};return function(r,n,a){var i,o=function(e,r,n){void 0===n&&(n={});var a,i,o,s,l=new Date(e);return(void 0===(a=n)&&(a={}),(s=t[o=r+"|"+(i=a.timeZoneName||"short")])||(s=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:r,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",timeZoneName:i}),t[o]=s),s).formatToParts(l)},s=function(t,r){for(var n=o(t,r),i=[],s=0;s<n.length;s+=1){var l=n[s],u=l.type,c=l.value,d=e[u];d>=0&&(i[d]=parseInt(c,10))}var f=i[3],p=i[0]+"-"+i[1]+"-"+i[2]+" "+(24===f?0:f)+":"+i[4]+":"+i[5]+":000",h=+t;return(a.utc(p).valueOf()-(h-=h%1e3))/6e4},l=n.prototype;l.tz=function(e,t){void 0===e&&(e=i);var r=this.utcOffset(),n=this.toDate(),o=n.toLocaleString("en-US",{timeZone:e}),s=Math.round((n-new Date(o))/1e3/60),l=a(o,{locale:this.$L}).$set("millisecond",this.$ms).utcOffset(-(15*Math.round(n.getTimezoneOffset()/15))-s,!0);if(t){var u=l.utcOffset();l=l.add(r-u,"minute")}return l.$x.$timezone=e,l},l.offsetName=function(e){var t=this.$x.$timezone||a.tz.guess(),r=o(this.valueOf(),t,{timeZoneName:e}).find(function(e){return"timezonename"===e.type.toLowerCase()});return r&&r.value};var u=l.startOf;l.startOf=function(e,t){if(!this.$x||!this.$x.$timezone)return u.call(this,e,t);var r=a(this.format("YYYY-MM-DD HH:mm:ss:SSS"),{locale:this.$L});return u.call(r,e,t).tz(this.$x.$timezone,!0)},a.tz=function(e,t,r){var n=r&&t,o=r||t||i,l=s(+a(),o);if("string"!=typeof e)return a(e).tz(o);var u=function(e,t,r){var n=e-60*t*1e3,a=s(n,r);if(t===a)return[n,t];var i=s(n-=60*(a-t)*1e3,r);return a===i?[n,a]:[e-60*Math.min(a,i)*1e3,Math.max(a,i)]}(a.utc(e,n).valueOf(),l,o),c=u[0],d=u[1],f=a(c).utcOffset(d);return f.$x.$timezone=o,f},a.tz.guess=function(){return Intl.DateTimeFormat().resolvedOptions().timeZone},a.tz.setDefault=function(e){i=e}}},"object"==typeof e&&void 0!==t?t.exports=a():"function"==typeof define&&r.amdO?define(a):(n="undefined"!=typeof globalThis?globalThis:n||self).dayjs_plugin_timezone=a()}),_=I((e,t)=>{var n,a;n=e,a=function(){var e="minute",t=/[+-]\d\d(?::?\d\d)?/g,r=/([+-]|\d\d)/g;return function(n,a,i){var o=a.prototype;i.utc=function(e){var t={date:e,utc:!0,args:arguments};return new a(t)},o.utc=function(t){var r=i(this.toDate(),{locale:this.$L,utc:!0});return t?r.add(this.utcOffset(),e):r},o.local=function(){return i(this.toDate(),{locale:this.$L,utc:!1})};var s=o.parse;o.parse=function(e){e.utc&&(this.$u=!0),this.$utils().u(e.$offset)||(this.$offset=e.$offset),s.call(this,e)};var l=o.init;o.init=function(){if(this.$u){var e=this.$d;this.$y=e.getUTCFullYear(),this.$M=e.getUTCMonth(),this.$D=e.getUTCDate(),this.$W=e.getUTCDay(),this.$H=e.getUTCHours(),this.$m=e.getUTCMinutes(),this.$s=e.getUTCSeconds(),this.$ms=e.getUTCMilliseconds()}else l.call(this)};var u=o.utcOffset;o.utcOffset=function(n,a){var i=this.$utils().u;if(i(n))return this.$u?0:i(this.$offset)?u.call(this):this.$offset;if("string"==typeof n&&null===(n=function(e){void 0===e&&(e="");var n=e.match(t);if(!n)return null;var a=(""+n[0]).match(r)||["-",0,0],i=a[0],o=60*+a[1]+ +a[2];return 0===o?0:"+"===i?o:-o}(n)))return this;var o=16>=Math.abs(n)?60*n:n,s=this;if(a)return s.$offset=o,s.$u=0===n,s;if(0!==n){var l=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();(s=this.local().add(o+l,e)).$offset=o,s.$x.$localOffset=l}else s=this.utc();return s};var c=o.format;o.format=function(e){var t=e||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return c.call(this,t)},o.valueOf=function(){var e=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||this.$d.getTimezoneOffset());return this.$d.valueOf()-6e4*e},o.isUTC=function(){return!!this.$u},o.toISOString=function(){return this.toDate().toISOString()},o.toString=function(){return this.toDate().toUTCString()};var d=o.toDate;o.toDate=function(e){return"s"===e&&this.$offset?i(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():d.call(this)};var f=o.diff;o.diff=function(e,t,r){if(e&&this.$u===e.$u)return f.call(this,e,t,r);var n=this.local(),a=i(e).local();return f.call(n,a,t,r)}}},"object"==typeof e&&void 0!==t?t.exports=a():"function"==typeof define&&r.amdO?define(a):(n="undefined"!=typeof globalThis?globalThis:n||self).dayjs_plugin_utc=a()}),Q=I((e,t)=>{t.exports=fetch}),N=I(e=>{var t=e&&e.__assign||function(){return(t=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0});var r={delayFirstAttempt:!1,jitter:"none",maxDelay:1/0,numOfAttempts:10,retry:function(){return!0},startingDelay:100,timeMultiple:2};e.getSanitizedOptions=function(e){var n=t(t({},r),e);return n.numOfAttempts<1&&(n.numOfAttempts=1),n}}),z=I(e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.fullJitter=function(e){return Math.round(Math.random()*e)}}),B=I(e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.noJitter=function(e){return e}}),H=I(e=>{Object.defineProperty(e,"__esModule",{value:!0});var t=z(),r=B();e.JitterFactory=function(e){return"full"===e.jitter?t.fullJitter:r.noJitter}}),Y=I(e=>{Object.defineProperty(e,"__esModule",{value:!0});var t=H(),r=function(){function e(e){this.options=e,this.attempt=0}return e.prototype.apply=function(){var e=this;return new Promise(function(t){return setTimeout(t,e.jitteredDelay)})},e.prototype.setAttemptNumber=function(e){this.attempt=e},Object.defineProperty(e.prototype,"jitteredDelay",{get:function(){return t.JitterFactory(this.options)(this.delay)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"delay",{get:function(){return Math.min(this.options.startingDelay*Math.pow(this.options.timeMultiple,this.numOfDelayedAttempts),this.options.maxDelay)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"numOfDelayedAttempts",{get:function(){return this.attempt},enumerable:!0,configurable:!0}),e}();e.Delay=r}),W=I(e=>{var t,r=e&&e.__extends||(t=function(e,r){return(t=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,r)},function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}),n=e&&e.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(a,i){function o(e){try{l(n.next(e))}catch(e){i(e)}}function s(e){try{l(n.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?a(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(o,s)}l((n=n.apply(e,t||[])).next())})},a=e&&e.__generator||function(e,t){var r,n,a,i,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw TypeError("Generator is already executing.");for(;o;)try{if(r=1,n&&(a=2&i[0]?n.return:i[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,i[1])).done)return a;switch(n=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,n=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===i[0]||2===i[0])){o=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){o.label=i[1];break}if(6===i[0]&&o.label<a[1]){o.label=a[1],a=i;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(i);break}a[2]&&o.ops.pop(),o.trys.pop();continue}i=t.call(e,o)}catch(e){i=[6,e],n=0}finally{r=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};Object.defineProperty(e,"__esModule",{value:!0});var i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.apply=function(){return n(this,void 0,void 0,function(){return a(this,function(t){return[2,!!this.isFirstAttempt||e.prototype.apply.call(this)]})})},Object.defineProperty(t.prototype,"isFirstAttempt",{get:function(){return 0===this.attempt},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"numOfDelayedAttempts",{get:function(){return this.attempt-1},enumerable:!0,configurable:!0}),t}(Y().Delay);e.SkipFirstDelay=i}),G=I(e=>{var t,r=e&&e.__extends||(t=function(e,r){return(t=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,r)},function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var n=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t}(Y().Delay);e.AlwaysDelay=n}),J=I(e=>{Object.defineProperty(e,"__esModule",{value:!0});var t=W(),r=G();e.DelayFactory=function(e,n){var a=e.delayFirstAttempt?new r.AlwaysDelay(e):new t.SkipFirstDelay(e);return a.setAttemptNumber(n),a}}),K=I(e=>{var t=e&&e.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(a,i){function o(e){try{l(n.next(e))}catch(e){i(e)}}function s(e){try{l(n.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?a(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(o,s)}l((n=n.apply(e,t||[])).next())})},r=e&&e.__generator||function(e,t){var r,n,a,i,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw TypeError("Generator is already executing.");for(;o;)try{if(r=1,n&&(a=2&i[0]?n.return:i[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,i[1])).done)return a;switch(n=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,n=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===i[0]||2===i[0])){o=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){o.label=i[1];break}if(6===i[0]&&o.label<a[1]){o.label=a[1],a=i;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(i);break}a[2]&&o.ops.pop(),o.trys.pop();continue}i=t.call(e,o)}catch(e){i=[6,e],n=0}finally{r=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};Object.defineProperty(e,"__esModule",{value:!0});var n=N(),a=J();e.backOff=function(e,a){return void 0===a&&(a={}),t(this,void 0,void 0,function(){var t;return r(this,function(r){switch(r.label){case 0:return t=n.getSanitizedOptions(a),[4,new i(e,t).execute()];case 1:return[2,r.sent()]}})})};var i=function(){function e(e,t){this.request=e,this.options=t,this.attemptNumber=0}return e.prototype.execute=function(){return t(this,void 0,void 0,function(){var e;return r(this,function(t){switch(t.label){case 0:if(this.attemptLimitReached)return[3,7];t.label=1;case 1:return t.trys.push([1,4,,6]),[4,this.applyDelay()];case 2:return t.sent(),[4,this.request()];case 3:return[2,t.sent()];case 4:return e=t.sent(),this.attemptNumber++,[4,this.options.retry(e,this.attemptNumber)];case 5:if(!t.sent()||this.attemptLimitReached)throw e;return[3,6];case 6:return[3,0];case 7:throw Error("Something went wrong.")}})})},Object.defineProperty(e.prototype,"attemptLimitReached",{get:function(){return this.attemptNumber>=this.options.numOfAttempts},enumerable:!0,configurable:!0}),e.prototype.applyDelay=function(){return t(this,void 0,void 0,function(){return r(this,function(e){switch(e.label){case 0:return[4,a.DelayFactory(this.options,this.attemptNumber).apply()];case 1:return e.sent(),[2]}})})},e}()}),Z=I((e,t)=>{t.exports=function(e){if(0==arguments.length)throw TypeError("1 argument required, but only 0 present.");if((e=(e=`${e}`).replace(/[ \t\n\f\r]/g,"")).length%4==0&&(e=e.replace(/==?$/,"")),e.length%4==1||/[^+/0-9A-Za-z]/.test(e))return null;let t="",r=0,n=0;for(let a=0;a<e.length;a++)r<<=6,r|=function(e){let t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(e);return t<0?void 0:t}(e[a]),24===(n+=6)&&(t+=String.fromCharCode((16711680&r)>>16)+String.fromCharCode((65280&r)>>8)+String.fromCharCode(255&r),r=n=0);return 12===n?(r>>=4,t+=String.fromCharCode(r)):18===n&&(r>>=2,t+=String.fromCharCode((65280&r)>>8)+String.fromCharCode(255&r)),t}}),X=I((e,t)=>{t.exports=function(e){let t;if(0==arguments.length)throw TypeError("1 argument required, but only 0 present.");for(e=`${e}`,t=0;t<e.length;t++)if(e.charCodeAt(t)>255)return null;let r="";for(t=0;t<e.length;t+=3){let n=[void 0,void 0,void 0,void 0];n[0]=e.charCodeAt(t)>>2,n[1]=(3&e.charCodeAt(t))<<4,e.length>t+1&&(n[1]|=e.charCodeAt(t+1)>>4,n[2]=(15&e.charCodeAt(t+1))<<2),e.length>t+2&&(n[2]|=e.charCodeAt(t+2)>>6,n[3]=63&e.charCodeAt(t+2));for(let e=0;e<n.length;e++)void 0===n[e]?r+="=":r+=function(e){if(e>=0&&e<64)return"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[e]}(n[e])}return r}}),ee=I((e,t)=>{var r=Z(),n=X();t.exports={atob:r,btoa:n}}),et=I((e,t)=>{var r="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0;if(!r)throw Error("Unable to find global scope. Are you sure this is running in the browser?");if(!r.AbortController)throw Error('Could not find "AbortController" in the global scope. You need to polyfill it first');t.exports.AbortController=r.AbortController}),er=I((e,t)=>{var n,a;n=e,a=function(){var e="month",t="quarter";return function(r,n){var a=n.prototype;a.quarter=function(e){return this.$utils().u(e)?Math.ceil((this.month()+1)/3):this.month(this.month()%3+3*(e-1))};var i=a.add;a.add=function(r,n){return r=Number(r),this.$utils().p(n)===t?this.add(3*r,e):i.bind(this)(r,n)};var o=a.startOf;a.startOf=function(r,n){var a=this.$utils(),i=!!a.u(n)||n;if(a.p(r)===t){var s=this.quarter()-1;return i?this.month(3*s).startOf(e).startOf("day"):this.month(3*s+2).endOf(e).endOf("day")}return o.bind(this)(r,n)}}},"object"==typeof e&&void 0!==t?t.exports=a():"function"==typeof define&&r.amdO?define(a):(n="undefined"!=typeof globalThis?globalThis:n||self).dayjs_plugin_quarterOfYear=a()}),en=I((e,t)=>{var n,a;n=e,a=function(){var e={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},t=/(\[[^[]*\])|([-_:/.,()\s]+)|(A|a|YYYY|YY?|MM?M?M?|Do|DD?|hh?|HH?|mm?|ss?|S{1,3}|z|ZZ?)/g,r=/\d\d/,n=/\d\d?/,a=/\d*[^-_:/,()\s\d]+/,i={},o=function(e){return(e=+e)+(e>68?1900:2e3)},s=function(e){return function(t){this[e]=+t}},l=[/[+-]\d\d:?(\d\d)?|Z/,function(e){(this.zone||(this.zone={})).offset=function(e){if(!e||"Z"===e)return 0;var t=e.match(/([+-]|\d\d)/g),r=60*t[1]+(+t[2]||0);return 0===r?0:"+"===t[0]?-r:r}(e)}],u=function(e){var t=i[e];return t&&(t.indexOf?t:t.s.concat(t.f))},c=function(e,t){var r,n=i.meridiem;if(n){for(var a=1;a<=24;a+=1)if(e.indexOf(n(a,0,t))>-1){r=a>12;break}}else r=e===(t?"pm":"PM");return r},d={A:[a,function(e){this.afternoon=c(e,!1)}],a:[a,function(e){this.afternoon=c(e,!0)}],S:[/\d/,function(e){this.milliseconds=100*+e}],SS:[r,function(e){this.milliseconds=10*+e}],SSS:[/\d{3}/,function(e){this.milliseconds=+e}],s:[n,s("seconds")],ss:[n,s("seconds")],m:[n,s("minutes")],mm:[n,s("minutes")],H:[n,s("hours")],h:[n,s("hours")],HH:[n,s("hours")],hh:[n,s("hours")],D:[n,s("day")],DD:[r,s("day")],Do:[a,function(e){var t=i.ordinal;if(this.day=e.match(/\d+/)[0],t)for(var r=1;r<=31;r+=1)t(r).replace(/\[|\]/g,"")===e&&(this.day=r)}],M:[n,s("month")],MM:[r,s("month")],MMM:[a,function(e){var t=u("months"),r=(u("monthsShort")||t.map(function(e){return e.slice(0,3)})).indexOf(e)+1;if(r<1)throw Error();this.month=r%12||r}],MMMM:[a,function(e){var t=u("months").indexOf(e)+1;if(t<1)throw Error();this.month=t%12||t}],Y:[/[+-]?\d+/,s("year")],YY:[r,function(e){this.year=o(e)}],YYYY:[/\d{4}/,s("year")],Z:l,ZZ:l};return function(r,n,a){a.p.customParseFormat=!0,r&&r.parseTwoDigitYear&&(o=r.parseTwoDigitYear);var s=n.prototype,l=s.parse;s.parse=function(r){var n=r.date,o=r.utc,s=r.args;this.$u=o;var u=s[1];if("string"==typeof u){var c=!0===s[2],f=!0===s[3],p=s[2];f&&(p=s[2]),i=this.$locale(),!c&&p&&(i=a.Ls[p]),this.$d=function(r,n,a){try{if(["x","X"].indexOf(n)>-1)return new Date(("X"===n?1e3:1)*r);var o=(function(r){var n,a;n=r,a=i&&i.formats;for(var o=(r=n.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,function(t,r,n){var i=n&&n.toUpperCase();return r||a[n]||e[n]||a[i].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(e,t,r){return t||r.slice(1)})})).match(t),s=o.length,l=0;l<s;l+=1){var u=o[l],c=d[u],f=c&&c[0],p=c&&c[1];o[l]=p?{regex:f,parser:p}:u.replace(/^\[|\]$/g,"")}return function(e){for(var t={},r=0,n=0;r<s;r+=1){var a=o[r];if("string"==typeof a)n+=a.length;else{var i=a.regex,l=a.parser,u=e.slice(n),c=i.exec(u)[0];l.call(t,c),e=e.replace(c,"")}}return function(e){var t=e.afternoon;if(void 0!==t){var r=e.hours;t?r<12&&(e.hours+=12):12===r&&(e.hours=0),delete e.afternoon}}(t),t}})(n)(r),s=o.year,l=o.month,u=o.day,c=o.hours,f=o.minutes,p=o.seconds,h=o.milliseconds,g=o.zone,v=new Date,y=u||(s||l?1:v.getDate()),m=s||v.getFullYear(),S=0;s&&!l||(S=l>0?l-1:v.getMonth());var b=c||0,w=f||0,C=p||0,k=h||0;return g?new Date(Date.UTC(m,S,y,b,w,C,k+60*g.offset*1e3)):a?new Date(Date.UTC(m,S,y,b,w,C,k)):new Date(m,S,y,b,w,C,k)}catch{return new Date("")}}(n,u,o),this.init(),p&&!0!==p&&(this.$L=this.locale(p).$L),(c||f)&&n!=this.format(u)&&(this.$d=new Date("")),i={}}else if(u instanceof Array)for(var h=u.length,g=1;g<=h;g+=1){s[1]=u[g-1];var v=a.apply(this,s);if(v.isValid()){this.$d=v.$d,this.$L=v.$L,this.init();break}g===h&&(this.$d=new Date(""))}else l.call(this,r)}}},"object"==typeof e&&void 0!==t?t.exports=a():"function"==typeof define&&r.amdO?define(a):(n="undefined"!=typeof globalThis?globalThis:n||self).dayjs_plugin_customParseFormat=a()}),ea=I((e,t)=>{var r=/(^|; )Coveo-Pendragon=([^;]*)/;t.exports=()=>r.exec(document.cookie)?.pop()||null}),ei={};function eo(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];throw Error("[Immer] minified error nr: "+e+(r.length?" "+r.map(function(e){return"'"+e+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function es(e){return!!e&&!!e[eY]}function el(e){var t;return!!e&&(function(e){if(!e||"object"!=typeof e)return!1;var t=Object.getPrototypeOf(e);if(null===t)return!0;var r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return r===Object||"function"==typeof r&&Function.toString.call(r)===eW}(e)||Array.isArray(e)||!!e[eH]||!!(null===(t=e.constructor)||void 0===t?void 0:t[eH])||eg(e)||ev(e))}function eu(e){return es(e)||eo(23,e),e[eY].t}function ec(e,t,r){void 0===r&&(r=!1),0===ed(e)?(r?Object.keys:eG)(e).forEach(function(n){r&&"symbol"==typeof n||t(n,e[n],e)}):e.forEach(function(r,n){return t(n,r,e)})}function ed(e){var t=e[eY];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:eg(e)?2:ev(e)?3:0}function ef(e,t){return 2===ed(e)?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function ep(e,t,r){var n=ed(e);2===n?e.set(t,r):3===n?e.add(r):e[t]=r}function eh(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}function eg(e){return eQ&&e instanceof Map}function ev(e){return eN&&e instanceof Set}function ey(e){return e.o||e.t}function em(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=eJ(e);delete t[eY];for(var r=eG(t),n=0;n<r.length;n++){var a=r[n],i=t[a];!1===i.writable&&(i.writable=!0,i.configurable=!0),(i.get||i.set)&&(t[a]={configurable:!0,writable:!0,enumerable:i.enumerable,value:e[a]})}return Object.create(Object.getPrototypeOf(e),t)}function eS(e,t){return void 0===t&&(t=!1),ew(e)||es(e)||!el(e)||(ed(e)>1&&(e.set=e.add=e.clear=e.delete=eb),Object.freeze(e),t&&ec(e,function(e,t){return eS(t,!0)},!0)),e}function eb(){eo(2)}function ew(e){return null==e||"object"!=typeof e||Object.isFrozen(e)}function eC(e){var t=eK[e];return t||eo(18,e),t}function ek(e,t){t&&(eC("Patches"),e.u=[],e.s=[],e.v=t)}function eO(e){eI(e),e.p.forEach(eq),e.p=null}function eI(e){e===e$&&(e$=e.l)}function eA(e){return e$={p:[],l:e$,h:e,m:!0,_:0}}function eq(e){var t=e[eY];0===t.i||1===t.i?t.j():t.g=!0}function eE(e,t){t._=t.p.length;var r=t.p[0],n=void 0!==e&&e!==r;return t.h.O||eC("ES5").S(t,e,n),n?(r[eY].P&&(eO(t),eo(4)),el(e)&&(e=ex(t,e),t.l||eD(t,e)),t.u&&eC("Patches").M(r[eY].t,e,t.u,t.s)):e=ex(t,r,[]),eO(t),t.u&&t.v(t.u,t.s),e!==eB?e:void 0}function ex(e,t,r){if(ew(t))return t;var n=t[eY];if(!n)return ec(t,function(a,i){return eR(e,n,t,a,i,r)},!0),t;if(n.A!==e)return t;if(!n.P)return eD(e,n.t,!0),n.t;if(!n.I){n.I=!0,n.A._--;var a=4===n.i||5===n.i?n.o=em(n.k):n.o,i=a,o=!1;3===n.i&&(i=new Set(a),a.clear(),o=!0),ec(i,function(t,i){return eR(e,n,a,t,i,r,o)}),eD(e,a,!1),r&&e.u&&eC("Patches").N(n,r,e.u,e.s)}return n.o}function eR(e,t,r,n,a,i,o){if(es(a)){var s=ex(e,a,i&&t&&3!==t.i&&!ef(t.R,n)?i.concat(n):void 0);if(ep(r,n,s),!es(s))return;e.m=!1}else o&&r.add(a);if(el(a)&&!ew(a)){if(!e.h.D&&e._<1)return;ex(e,a),t&&t.A.l||eD(e,a)}}function eD(e,t,r){void 0===r&&(r=!1),!e.l&&e.h.D&&e.m&&eS(t,r)}function ej(e,t){var r=e[eY];return(r?ey(r):e)[t]}function eF(e,t){if(t in e)for(var r=Object.getPrototypeOf(e);r;){var n=Object.getOwnPropertyDescriptor(r,t);if(n)return n;r=Object.getPrototypeOf(r)}}function eP(e){e.P||(e.P=!0,e.l&&eP(e.l))}function eM(e){e.o||(e.o=em(e.t))}function eT(e,t,r){var n,a,i,o,s,l,u,c=eg(t)?eC("MapSet").F(t,r):ev(t)?eC("MapSet").T(t,r):e.O?(i=a={i:(n=Array.isArray(t))?1:0,A:r?r.A:e$,P:!1,I:!1,R:{},l:r,t:t,k:null,o:null,j:null,C:!1},o=eZ,n&&(i=[a],o=eX),l=(s=Proxy.revocable(i,o)).revoke,u=s.proxy,a.k=u,a.j=l,u):eC("ES5").J(t,r);return(r?r.A:e$).p.push(c),c}function eU(e){return es(e)||eo(22,e),function e(t){if(!el(t))return t;var r,n=t[eY],a=ed(t);if(n){if(!n.P&&(n.i<4||!eC("ES5").K(n)))return n.t;n.I=!0,r=eV(t,a),n.I=!1}else r=eV(t,a);return ec(r,function(t,a){var i;n&&(2===ed(i=n.t)?i.get(t):i[t])===a||ep(r,t,e(a))}),3===a?new Set(r):r}(e)}function eV(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return em(e)}A(ei,{EnhancerArray:()=>tI,MiddlewareArray:()=>tO,SHOULD_AUTOBATCH:()=>rw,TaskAbortError:()=>rr,addListener:()=>rh,autoBatchEnhancer:()=>rA,clearAllListeners:()=>rg,configureStore:()=>tj,createAction:()=>ty,createActionCreatorInvariantMiddleware:()=>tk,createAsyncThunk:()=>tH,createDraftSafeSelector:()=>tp,createEntityAdapter:()=>t$,createImmutableStateInvariantMiddleware:()=>tE,createListenerMiddleware:()=>rm,createNextState:()=>e2,createReducer:()=>tP,createSelector:()=>e4,createSerializableStateInvariantMiddleware:()=>tR,createSlice:()=>tM,current:()=>eU,findNonSerializableValue:()=>function e(t,r,n,a,i,o){if(void 0===r&&(r=""),void 0===n&&(n=tx),void 0===i&&(i=[]),!n(t))return{keyPath:r||"<root>",value:t};if("object"!=typeof t||null===t||(null==o?void 0:o.has(t)))return!1;for(var s,l=null!=a?a(t):Object.entries(t),u=i.length>0,c=0;c<l.length;c++){var d=l[c],f=function(t,l){var c=r?r+"."+t:t;return u&&i.some(function(e){return e instanceof RegExp?e.test(c):c===e})?"continue":n(l)?"object"==typeof l&&(s=e(l,c,n,a,i,o))?{value:s}:void 0:{value:{keyPath:c,value:l}}}(d[0],d[1]);if("object"==typeof f)return f.value}return o&&function e(t){if(!Object.isFrozen(t))return!1;for(var r=0,n=Object.values(t);r<n.length;r++){var a=n[r];if(!("object"!=typeof a||null===a)&&!e(a))return!1}return!0}(t)&&o.add(t),!1},freeze:()=>eS,getDefaultMiddleware:()=>tD,getType:()=>tC,isAction:()=>tm,isActionCreator:()=>tS,isAllOf:()=>tJ,isAnyOf:()=>tG,isAsyncThunkAction:()=>function e(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return 0===t.length?function(e){return tK(e,["pending","fulfilled","rejected"])}:tZ(t)?function(e){for(var r=[],n=0;n<t.length;n++){var a=t[n];r.push(a.pending,a.rejected,a.fulfilled)}return tG.apply(void 0,r)(e)}:e()(t[0])},isDraft:()=>es,isFluxStandardAction:()=>tb,isFulfilled:()=>function e(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return 0===t.length?function(e){return tK(e,["fulfilled"])}:tZ(t)?function(e){var r=t.map(function(e){return e.fulfilled});return tG.apply(void 0,r)(e)}:e()(t[0])},isImmutableDefault:()=>tq,isPending:()=>function e(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return 0===t.length?function(e){return tK(e,["pending"])}:tZ(t)?function(e){var r=t.map(function(e){return e.pending});return tG.apply(void 0,r)(e)}:e()(t[0])},isPlain:()=>tx,isPlainObject:()=>tg,isRejected:()=>tX,isRejectedWithValue:()=>function e(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var n=function(e){return e&&e.meta&&e.meta.rejectedWithValue};return 0===t.length?function(e){return tJ(tX.apply(void 0,t),n)(e)}:tZ(t)?function(e){return tJ(tX.apply(void 0,t),n)(e)}:e()(t[0])},miniSerializeError:()=>tB,nanoid:()=>t_,original:()=>eu,prepareAutoBatched:()=>rC,removeListener:()=>rv,unwrapResult:()=>tY});var eL,e$,e_="undefined"!=typeof Symbol&&"symbol"==typeof Symbol("x"),eQ="undefined"!=typeof Map,eN="undefined"!=typeof Set,ez="undefined"!=typeof Proxy&&void 0!==Proxy.revocable&&"undefined"!=typeof Reflect,eB=e_?Symbol.for("immer-nothing"):((eL={})["immer-nothing"]=!0,eL),eH=e_?Symbol.for("immer-draftable"):"__$immer_draftable",eY=e_?Symbol.for("immer-state"):"__$immer_state",eW=""+Object.prototype.constructor,eG="undefined"!=typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:void 0!==Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,eJ=Object.getOwnPropertyDescriptors||function(e){var t={};return eG(e).forEach(function(r){t[r]=Object.getOwnPropertyDescriptor(e,r)}),t},eK={},eZ={get:function(e,t){if(t===eY)return e;var r,n,a=ey(e);if(!ef(a,t))return(n=eF(a,t))?"value"in n?n.value:null===(r=n.get)||void 0===r?void 0:r.call(e.k):void 0;var i=a[t];return e.I||!el(i)?i:i===ej(e.t,t)?(eM(e),e.o[t]=eT(e.A.h,i,e)):i},has:function(e,t){return t in ey(e)},ownKeys:function(e){return Reflect.ownKeys(ey(e))},set:function(e,t,r){var n=eF(ey(e),t);if(null==n?void 0:n.set)return n.set.call(e.k,r),!0;if(!e.P){var a=ej(ey(e),t),i=null==a?void 0:a[eY];if(i&&i.t===r)return e.o[t]=r,e.R[t]=!1,!0;if(eh(r,a)&&(void 0!==r||ef(e.t,t)))return!0;eM(e),eP(e)}return e.o[t]===r&&(void 0!==r||t in e.o)||Number.isNaN(r)&&Number.isNaN(e.o[t])||(e.o[t]=r,e.R[t]=!0),!0},deleteProperty:function(e,t){return void 0!==ej(e.t,t)||t in e.t?(e.R[t]=!1,eM(e),eP(e)):delete e.R[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var r=ey(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n&&{writable:!0,configurable:1!==e.i||"length"!==t,enumerable:n.enumerable,value:r[t]}},defineProperty:function(){eo(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){eo(12)}},eX={};ec(eZ,function(e,t){eX[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),eX.deleteProperty=function(e,t){return eX.set.call(this,e,t,void 0)},eX.set=function(e,t,r){return eZ.set.call(this,e[0],t,r,e[0])};var e0=new(function(){function e(e){var t=this;this.O=ez,this.D=!0,this.produce=function(e,r,n){if("function"==typeof e&&"function"!=typeof r){var a,i=r;return r=e,function(e){var n=this;void 0===e&&(e=i);for(var a=arguments.length,o=Array(a>1?a-1:0),s=1;s<a;s++)o[s-1]=arguments[s];return t.produce(e,function(e){var t;return(t=r).call.apply(t,[n,e].concat(o))})}}if("function"!=typeof r&&eo(6),void 0!==n&&"function"!=typeof n&&eo(7),el(e)){var o=eA(t),s=eT(t,e,void 0),l=!0;try{a=r(s),l=!1}finally{l?eO(o):eI(o)}return"undefined"!=typeof Promise&&a instanceof Promise?a.then(function(e){return ek(o,n),eE(e,o)},function(e){throw eO(o),e}):(ek(o,n),eE(a,o))}if(!e||"object"!=typeof e){if(void 0===(a=r(e))&&(a=e),a===eB&&(a=void 0),t.D&&eS(a,!0),n){var u=[],c=[];eC("Patches").M(e,a,u,c),n(u,c)}return a}eo(21,e)},this.produceWithPatches=function(e,r){if("function"==typeof e)return function(r){for(var n=arguments.length,a=Array(n>1?n-1:0),i=1;i<n;i++)a[i-1]=arguments[i];return t.produceWithPatches(r,function(t){return e.apply(void 0,[t].concat(a))})};var n,a,i=t.produce(e,r,function(e,t){n=e,a=t});return"undefined"!=typeof Promise&&i instanceof Promise?i.then(function(e){return[e,n,a]}):[i,n,a]},"boolean"==typeof(null==e?void 0:e.useProxies)&&this.setUseProxies(e.useProxies),"boolean"==typeof(null==e?void 0:e.autoFreeze)&&this.setAutoFreeze(e.autoFreeze)}var t=e.prototype;return t.createDraft=function(e){el(e)||eo(8),es(e)&&(e=eU(e));var t=eA(this),r=eT(this,e,void 0);return r[eY].C=!0,eI(t),r},t.finishDraft=function(e,t){var r=(e&&e[eY]).A;return ek(r,t),eE(void 0,r)},t.setAutoFreeze=function(e){this.D=e},t.setUseProxies=function(e){e&&!ez&&eo(20),this.O=e},t.applyPatches=function(e,t){for(r=t.length-1;r>=0;r--){var r,n=t[r];if(0===n.path.length&&"replace"===n.op){e=n.value;break}}r>-1&&(t=t.slice(r+1));var a=eC("Patches").$;return es(e)?a(e,t):this.produce(e,function(e){return a(e,t)})},e}()),e1=e0.produce,e2=(e0.produceWithPatches.bind(e0),e0.setAutoFreeze.bind(e0),e0.setUseProxies.bind(e0),e0.applyPatches.bind(e0),e0.createDraft.bind(e0),e0.finishDraft.bind(e0),e1);q(ei,E(P()));var e3="NOT_FOUND",e5=function(e,t){return e===t},e4=function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return function(){for(var t=arguments.length,n=Array(t),a=0;a<t;a++)n[a]=arguments[a];var i,o=0,s={memoizeOptions:void 0},l=n.pop();if("object"==typeof l&&(s=l,l=n.pop()),"function"!=typeof l)throw Error("createSelector expects an output function after the inputs, but received: ["+typeof l+"]");var u=s.memoizeOptions,c=void 0===u?r:u,d=Array.isArray(c)?c:[c],f=function(e){var t=Array.isArray(e[0])?e[0]:e;if(!t.every(function(e){return"function"==typeof e}))throw Error("createSelector expects all input-selectors to be functions, but received the following types: ["+t.map(function(e){return"function"==typeof e?"function "+(e.name||"unnamed")+"()":typeof e}).join(", ")+"]");return t}(n),p=e.apply(void 0,[function(){return o++,l.apply(null,arguments)}].concat(d)),h=e(function(){for(var e=[],t=f.length,r=0;r<t;r++)e.push(f[r].apply(null,arguments));return i=p.apply(null,e)});return Object.assign(h,{resultFunc:l,memoizedResultFunc:p,dependencies:f,lastResult:function(){return i},recomputations:function(){return o},resetRecomputations:function(){return o=0}}),h}}(function(e,t){var r,n,a="object"==typeof t?t:{equalityCheck:t},i=a.equalityCheck,o=a.maxSize,s=void 0===o?1:o,l=a.resultEqualityCheck,u=(r=void 0===i?e5:i,function(e,t){if(null===e||null===t||e.length!==t.length)return!1;for(var n=e.length,a=0;a<n;a++)if(!r(e[a],t[a]))return!1;return!0}),c=1===s?{get:function(e){return n&&u(n.key,e)?n.value:e3},put:function(e,t){n={key:e,value:t}},getEntries:function(){return n?[n]:[]},clear:function(){n=void 0}}:function(e,t){var r=[];function n(e){var n=r.findIndex(function(r){return t(e,r.key)});if(n>-1){var a=r[n];return n>0&&(r.splice(n,1),r.unshift(a)),a.value}return e3}return{get:n,put:function(t,a){n(t)===e3&&(r.unshift({key:t,value:a}),r.length>e&&r.pop())},getEntries:function(){return r},clear:function(){r=[]}}}(s,u);function d(){var t=c.get(arguments);if(t===e3){if(t=e.apply(null,arguments),l){var r=c.getEntries().find(function(e){return l(e.value,t)});r&&(t=r.value)}c.put(arguments,t)}return t}return d.clearCache=function(){return c.clear()},d}),e6=E(P()),e8=E(P());function e9(e){return function(t){var r=t.dispatch,n=t.getState;return function(t){return function(a){return"function"==typeof a?a(r,n,e):t(a)}}}}var e7=e9();e7.withExtraArgument=e9;var te=(rS=function(e,t){return(rS=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}rS(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),tt=function(e,t){var r,n,a,i,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw TypeError("Generator is already executing.");for(;o;)try{if(r=1,n&&(a=2&i[0]?n.return:i[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,i[1])).done)return a;switch(n=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,n=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===i[0]||2===i[0])){o=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){o.label=i[1];break}if(6===i[0]&&o.label<a[1]){o.label=a[1],a=i;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(i);break}a[2]&&o.ops.pop(),o.trys.pop();continue}i=t.call(e,o)}catch(e){i=[6,e],n=0}finally{r=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},tr=function(e,t){for(var r=0,n=t.length,a=e.length;r<n;r++,a++)e[a]=t[r];return e},tn=Object.defineProperty,ta=Object.defineProperties,ti=Object.getOwnPropertyDescriptors,to=Object.getOwnPropertySymbols,ts=Object.prototype.hasOwnProperty,tl=Object.prototype.propertyIsEnumerable,tu=function(e,t,r){return t in e?tn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r},tc=function(e,t){for(var r in t||(t={}))ts.call(t,r)&&tu(e,r,t[r]);if(to)for(var n=0,a=to(t);n<a.length;n++){var r=a[n];tl.call(t,r)&&tu(e,r,t[r])}return e},td=function(e,t){return ta(e,ti(t))},tf=function(e,t,r){return new Promise(function(n,a){var i=function(e){try{s(r.next(e))}catch(e){a(e)}},o=function(e){try{s(r.throw(e))}catch(e){a(e)}},s=function(e){return e.done?n(e.value):Promise.resolve(e.value).then(i,o)};s((r=r.apply(e,t)).next())})},tp=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=e4.apply(void 0,e);return function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return r.apply(void 0,tr([es(e)?eU(e):e],t))}},th="undefined"!=typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(0!=arguments.length)return"object"==typeof arguments[0]?e8.compose:e8.compose.apply(null,arguments)};function tg(e){if("object"!=typeof e||null===e)return!1;var t=Object.getPrototypeOf(e);if(null===t)return!0;for(var r=t;null!==Object.getPrototypeOf(r);)r=Object.getPrototypeOf(r);return t===r}"undefined"!=typeof window&&window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__;var tv=function(e){return e&&"function"==typeof e.match};function ty(e,t){function r(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];if(t){var a=t.apply(void 0,r);if(!a)throw Error("prepareAction did not return an object");return tc(tc({type:e,payload:a.payload},"meta"in a&&{meta:a.meta}),"error"in a&&{error:a.error})}return{type:e,payload:r[0]}}return r.toString=function(){return""+e},r.type=e,r.match=function(t){return t.type===e},r}function tm(e){return tg(e)&&"type"in e}function tS(e){return"function"==typeof e&&"type"in e&&tv(e)}function tb(e){return tm(e)&&"string"==typeof e.type&&Object.keys(e).every(tw)}function tw(e){return["type","payload","error","meta"].indexOf(e)>-1}function tC(e){return""+e}function tk(e){return void 0===e&&(e={}),function(){return function(e){return function(t){return e(t)}}}}var tO=function(e){function t(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];var a=e.apply(this,r)||this;return Object.setPrototypeOf(a,t.prototype),a}return te(t,e),Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return e.prototype.concat.apply(this,t)},t.prototype.prepend=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return 1===e.length&&Array.isArray(e[0])?new(t.bind.apply(t,tr([void 0],e[0].concat(this)))):new(t.bind.apply(t,tr([void 0],e.concat(this))))},t}(Array),tI=function(e){function t(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];var a=e.apply(this,r)||this;return Object.setPrototypeOf(a,t.prototype),a}return te(t,e),Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return e.prototype.concat.apply(this,t)},t.prototype.prepend=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return 1===e.length&&Array.isArray(e[0])?new(t.bind.apply(t,tr([void 0],e[0].concat(this)))):new(t.bind.apply(t,tr([void 0],e.concat(this))))},t}(Array);function tA(e){return el(e)?e2(e,function(){}):e}function tq(e){return"object"!=typeof e||null==e||Object.isFrozen(e)}function tE(e){return void 0===e&&(e={}),function(){return function(e){return function(t){return e(t)}}}}function tx(e){var t=typeof e;return null==e||"string"===t||"boolean"===t||"number"===t||Array.isArray(e)||tg(e)}function tR(e){return void 0===e&&(e={}),function(){return function(e){return function(t){return e(t)}}}}function tD(e){void 0===e&&(e={});var t=e.thunk,r=void 0===t||t,n=(e.immutableCheck,e.serializableCheck,e.actionCreatorCheck,new tO);return r&&("boolean"==typeof r?n.push(e7):n.push(e7.withExtraArgument(r.extraArgument))),n}function tj(e){var t,r=function(e){return tD(e)},n=e||{},a=n.reducer,i=void 0===a?void 0:a,o=n.middleware,s=void 0===o?r():o,l=n.devTools,u=void 0===l||l,c=n.preloadedState,d=void 0===c?void 0:c,f=n.enhancers,p=void 0===f?void 0:f;if("function"==typeof i)t=i;else if(tg(i))t=(0,e6.combineReducers)(i);else throw Error('"reducer" is a required argument, and must be a function or an object of functions that can be passed to combineReducers');var h=s;"function"==typeof h&&(h=h(r));var g=e6.applyMiddleware.apply(void 0,h),v=e6.compose;u&&(v=th(tc({trace:!1},"object"==typeof u&&u)));var y=new tI(g),m=y;Array.isArray(p)?m=tr([g],p):"function"==typeof p&&(m=p(y));var S=v.apply(void 0,m);return(0,e6.createStore)(t,d,S)}function tF(e){var t,r={},n=[],a={addCase:function(e,t){var n="string"==typeof e?e:e.type;if(!n)throw Error("`builder.addCase` cannot be called with an empty action type");if(n in r)throw Error("`builder.addCase` cannot be called with two reducers for the same action type");return r[n]=t,a},addMatcher:function(e,t){return n.push({matcher:e,reducer:t}),a},addDefaultCase:function(e){return t=e,a}};return e(a),[r,n,t]}function tP(e,t,r,n){void 0===r&&(r=[]);var a,i="function"==typeof t?tF(t):[t,r,n],o=i[0],s=i[1],l=i[2];if("function"==typeof e)a=function(){return tA(e())};else{var u=tA(e);a=function(){return u}}function c(e,t){void 0===e&&(e=a());var r=tr([o[t.type]],s.filter(function(e){return(0,e.matcher)(t)}).map(function(e){return e.reducer}));return 0===r.filter(function(e){return!!e}).length&&(r=[l]),r.reduce(function(e,r){if(r){if(es(e)){var n=r(e,t);return void 0===n?e:n}if(el(e))return e2(e,function(e){return r(e,t)});var n=r(e,t);if(void 0===n){if(null===e)return e;throw Error("A case reducer on a non-draftable value must not return undefined")}return n}return e},e)}return c.getInitialState=a,c}function tM(e){var t,r=e.name;if(!r)throw Error("`name` is a required option for createSlice");var n="function"==typeof e.initialState?e.initialState:tA(e.initialState),a=e.reducers||{},i=Object.keys(a),o={},s={},l={};function u(){var t="function"==typeof e.extraReducers?tF(e.extraReducers):[e.extraReducers],r=t[0],a=t[1],i=void 0===a?[]:a,o=t[2],l=void 0===o?void 0:o,u=tc(tc({},void 0===r?{}:r),s);return tP(n,function(e){for(var t in u)e.addCase(t,u[t]);for(var r=0;r<i.length;r++){var n=i[r];e.addMatcher(n.matcher,n.reducer)}l&&e.addDefaultCase(l)})}return i.forEach(function(e){var t,n,i=a[e],u=r+"/"+e;"reducer"in i?(t=i.reducer,n=i.prepare):t=i,o[e]=t,s[u]=t,l[e]=n?ty(u,n):ty(u)}),{name:r,reducer:function(e,r){return t||(t=u()),t(e,r)},actions:l,caseReducers:o,getInitialState:function(){return t||(t=u()),t.getInitialState()}}}function tT(e){return function(t,r){var n=function(t){tb(r)?e(r.payload,t):e(r,t)};return es(t)?(n(t),t):e2(t,n)}}function tU(e){return Array.isArray(e)||(e=Object.values(e)),e}function tV(e,t,r){e=tU(e);for(var n=[],a=[],i=0,o=e;i<o.length;i++){var s=o[i],l=t(s);l in r.entities?a.push({id:l,changes:s}):n.push(s)}return[n,a]}function tL(e){var t,r;function n(t,r){var n=e(t);n in r.entities||(r.ids.push(n),r.entities[n]=t)}function a(e,t){e=tU(e);for(var r=0,a=e;r<a.length;r++)n(a[r],t)}function i(t,r){var n=e(t);n in r.entities||r.ids.push(n),r.entities[n]=t}function o(e,t){var r=!1;e.forEach(function(e){e in t.entities&&(delete t.entities[e],r=!0)}),r&&(t.ids=t.ids.filter(function(e){return e in t.entities}))}function s(t,r){var n={},a={};t.forEach(function(e){e.id in r.entities&&(a[e.id]={id:e.id,changes:tc(tc({},a[e.id]?a[e.id].changes:null),e.changes)})}),(t=Object.values(a)).length>0&&t.filter(function(t){var a,i,o;return(o=(i=e(a=Object.assign({},r.entities[t.id],t.changes)))!==t.id)&&(n[t.id]=i,delete r.entities[t.id]),r.entities[i]=a,o}).length>0&&(r.ids=Object.keys(r.entities))}function l(t,r){var n=tV(t,e,r),i=n[0];s(n[1],r),a(i,r)}return{removeAll:(t=function(e){Object.assign(e,{ids:[],entities:{}})},r=tT(function(e,r){return t(r)}),function(e){return r(e,void 0)}),addOne:tT(n),addMany:tT(a),setOne:tT(i),setMany:tT(function(e,t){e=tU(e);for(var r=0,n=e;r<n.length;r++)i(n[r],t)}),setAll:tT(function(e,t){e=tU(e),t.ids=[],t.entities={},a(e,t)}),updateOne:tT(function(e,t){return s([e],t)}),updateMany:tT(s),upsertOne:tT(function(e,t){return l([e],t)}),upsertMany:tT(l),removeOne:tT(function(e,t){return o([e],t)}),removeMany:tT(o)}}function t$(e){void 0===e&&(e={});var t=tc({sortComparer:!1,selectId:function(e){return e.id}},e),r=t.selectId,n=t.sortComparer,a=n?function(e,t){var r=tL(e);function n(t,r){var n=(t=tU(t)).filter(function(t){return!(e(t) in r.entities)});0!==n.length&&s(n,r)}function a(e,t){0!==(e=tU(e)).length&&s(e,t)}function i(t,r){for(var n=!1,a=0;a<t.length;a++){var i=t[a],o=r.entities[i.id];if(o){n=!0,Object.assign(o,i.changes);var s=e(o);i.id!==s&&(delete r.entities[i.id],r.entities[s]=o)}}n&&l(r)}function o(t,r){var a=tV(t,e,r),o=a[0];i(a[1],r),n(o,r)}function s(t,r){t.forEach(function(t){r.entities[e(t)]=t}),l(r)}function l(r){var n=Object.values(r.entities);n.sort(t);var a=n.map(e);(function(e,t){if(e.length!==t.length)return!1;for(var r=0;r<e.length&&r<t.length;r++)if(e[r]!==t[r])return!1;return!0})(r.ids,a)||(r.ids=a)}return{removeOne:r.removeOne,removeMany:r.removeMany,removeAll:r.removeAll,addOne:tT(function(e,t){return n([e],t)}),updateOne:tT(function(e,t){return i([e],t)}),upsertOne:tT(function(e,t){return o([e],t)}),setOne:tT(function(e,t){return a([e],t)}),setMany:tT(a),setAll:tT(function(e,t){e=tU(e),t.entities={},t.ids=[],n(e,t)}),addMany:tT(n),updateMany:tT(i),upsertMany:tT(o)}}(r,n):tL(r);return tc(tc(tc({selectId:r,sortComparer:n},{getInitialState:function(e){return void 0===e&&(e={}),Object.assign({ids:[],entities:{}},e)}}),{getSelectors:function(e){var t=function(e){return e.ids},r=function(e){return e.entities},n=tp(t,r,function(e,t){return e.map(function(e){return t[e]})}),a=function(e,t){return t},i=function(e,t){return e[t]},o=tp(t,function(e){return e.length});if(!e)return{selectIds:t,selectEntities:r,selectAll:n,selectTotal:o,selectById:tp(r,a,i)};var s=tp(e,r);return{selectIds:tp(e,t),selectEntities:s,selectAll:tp(e,n),selectTotal:tp(e,o),selectById:tp(s,a,i)}}}),a)}var t_=function(e){void 0===e&&(e=21);for(var t="",r=e;r--;)t+="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW"[64*Math.random()|0];return t},tQ=["name","message","stack","code"],tN=function(e,t){this.payload=e,this.meta=t},tz=function(e,t){this.payload=e,this.meta=t},tB=function(e){if("object"==typeof e&&null!==e){for(var t={},r=0;r<tQ.length;r++){var n=tQ[r];"string"==typeof e[n]&&(t[n]=e[n])}return t}return{message:String(e)}},tH=function(){function e(e,t,r){var n=ty(e+"/fulfilled",function(e,t,r,n){return{payload:e,meta:td(tc({},n||{}),{arg:r,requestId:t,requestStatus:"fulfilled"})}}),a=ty(e+"/pending",function(e,t,r){return{payload:void 0,meta:td(tc({},r||{}),{arg:t,requestId:e,requestStatus:"pending"})}}),i=ty(e+"/rejected",function(e,t,n,a,i){return{payload:a,error:(r&&r.serializeError||tB)(e||"Rejected"),meta:td(tc({},i||{}),{arg:n,requestId:t,rejectedWithValue:!!a,requestStatus:"rejected",aborted:(null==e?void 0:e.name)==="AbortError",condition:(null==e?void 0:e.name)==="ConditionError"})}}),o="undefined"!=typeof AbortController?AbortController:function(){function e(){this.signal={aborted:!1,addEventListener:function(){},dispatchEvent:function(){return!1},onabort:function(){},removeEventListener:function(){},reason:void 0,throwIfAborted:function(){}}}return e.prototype.abort=function(){},e}();return Object.assign(function(e){return function(s,l,u){var c,d=(null==r?void 0:r.idGenerator)?r.idGenerator(e):t_(),f=new o;function p(e){c=e,f.abort()}var h=function(){return tf(this,null,function(){var o,h,g,v,y,m;return tt(this,function(S){switch(S.label){case 0:var b;return S.trys.push([0,4,,5]),null!==(b=v=null==(o=null==r?void 0:r.condition)?void 0:o.call(r,e,{getState:l,extra:u}))&&"object"==typeof b&&"function"==typeof b.then?[4,v]:[3,2];case 1:v=S.sent(),S.label=2;case 2:if(!1===v||f.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};return y=new Promise(function(e,t){return f.signal.addEventListener("abort",function(){return t({name:"AbortError",message:c||"Aborted"})})}),s(a(d,e,null==(h=null==r?void 0:r.getPendingMeta)?void 0:h.call(r,{requestId:d,arg:e},{getState:l,extra:u}))),[4,Promise.race([y,Promise.resolve(t(e,{dispatch:s,getState:l,extra:u,requestId:d,signal:f.signal,abort:p,rejectWithValue:function(e,t){return new tN(e,t)},fulfillWithValue:function(e,t){return new tz(e,t)}})).then(function(t){if(t instanceof tN)throw t;return t instanceof tz?n(t.payload,d,e,t.meta):n(t,d,e)})])];case 3:return g=S.sent(),[3,5];case 4:return g=(m=S.sent())instanceof tN?i(null,d,e,m.payload,m.meta):i(m,d,e),[3,5];case 5:return r&&!r.dispatchConditionRejection&&i.match(g)&&g.meta.condition||s(g),[2,g]}})})}();return Object.assign(h,{abort:p,requestId:d,arg:e,unwrap:function(){return h.then(tY)}})}},{pending:a,rejected:i,fulfilled:n,typePrefix:e})}return e.withTypes=function(){return e},e}();function tY(e){if(e.meta&&e.meta.rejectedWithValue)throw e.payload;if(e.error)throw e.error;return e.payload}var tW=function(e,t){return tv(e)?e.match(t):e(t)};function tG(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(t){return e.some(function(e){return tW(e,t)})}}function tJ(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(t){return e.every(function(e){return tW(e,t)})}}function tK(e,t){if(!e||!e.meta)return!1;var r="string"==typeof e.meta.requestId,n=t.indexOf(e.meta.requestStatus)>-1;return r&&n}function tZ(e){return"function"==typeof e[0]&&"pending"in e[0]&&"fulfilled"in e[0]&&"rejected"in e[0]}function tX(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return 0===e.length?function(e){return tK(e,["rejected"])}:tZ(e)?function(t){var r=e.map(function(e){return e.rejected});return tG.apply(void 0,r)(t)}:tX()(e[0])}var t0=function(e,t){if("function"!=typeof e)throw TypeError(t+" is not a function")},t1=function(){},t2=function(e,t){return void 0===t&&(t=t1),e.catch(t),e},t3=function(e,t){return e.addEventListener("abort",t,{once:!0}),function(){return e.removeEventListener("abort",t)}},t5=function(e,t){var r=e.signal;r.aborted||("reason"in r||Object.defineProperty(r,"reason",{enumerable:!0,value:t,configurable:!0,writable:!0}),e.abort(t))},t4="listener",t6="completed",t8="cancelled",t9="task-"+t8,t7="task-"+t6,re=t4+"-"+t8,rt=t4+"-"+t6,rr=function(e){this.code=e,this.name="TaskAbortError",this.message="task "+t8+" (reason: "+e+")"},rn=function(e){if(e.aborted)throw new rr(e.reason)};function ra(e,t){var r=t1;return new Promise(function(n,a){var i=function(){return a(new rr(e.reason))};if(e.aborted){i();return}r=t3(e,i),t.finally(function(){return r()}).then(n,a)}).finally(function(){r=t1})}var ri=function(e){return function(t){return t2(ra(e,t).then(function(t){return rn(e),t}))}},ro=function(e){var t=ri(e);return function(e){return t(new Promise(function(t){return setTimeout(t,e)}))}},rs=Object.assign,rl={},ru="listenerMiddleware",rc=function(e){var t=e.type,r=e.actionCreator,n=e.matcher,a=e.predicate,i=e.effect;if(t)a=ty(t).match;else if(r)t=r.type,a=r.match;else if(n)a=n;else if(!a)throw Error("Creating or removing a listener requires one of the known fields for matching an action");return t0(i,"options.listener"),{predicate:a,type:t,effect:i}},rd=function(e){var t=rc(e),r=t.type,n=t.predicate,a=t.effect;return{id:t_(),effect:a,type:r,predicate:n,pending:new Set,unsubscribe:function(){throw Error("Unsubscribe not initialized")}}},rf=function(e){e.pending.forEach(function(e){t5(e,re)})},rp=function(e,t,r){try{e(t,r)}catch(e){setTimeout(function(){throw e},0)}},rh=ty(ru+"/add"),rg=ty(ru+"/removeAll"),rv=ty(ru+"/remove"),ry=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];console.error.apply(console,tr([ru+"/error"],e))};function rm(e){var t=this;void 0===e&&(e={});var r=new Map,n=e.extra,a=e.onError,i=void 0===a?ry:a;t0(i,"onError");var o=function(e){for(var t=0,n=Array.from(r.values());t<n.length;t++){var a=n[t];if(e(a))return a}},s=function(e){var t,n=o(function(t){return t.effect===e.effect});return n||(n=rd(e)),(t=n).unsubscribe=function(){return r.delete(t.id)},r.set(t.id,t),function(e){t.unsubscribe(),(null==e?void 0:e.cancelActive)&&rf(t)}},l=function(e){var t=rc(e),r=t.type,n=t.effect,a=t.predicate,i=o(function(e){return("string"==typeof r?e.type===r:e.predicate===a)&&e.effect===n});return i&&(i.unsubscribe(),e.cancelActive&&rf(i)),!!i},u=function(e,a,o,l){return tf(t,null,function(){var t,u,c,d;return tt(this,function(f){var p,h,g;switch(f.label){case 0:p=(t=new AbortController).signal,u=function(e,t){return t2(tf(void 0,null,function(){var r,n,a;return tt(this,function(i){switch(i.label){case 0:rn(p),r=function(){},n=[new Promise(function(t,n){var a=s({predicate:e,effect:function(e,r){r.unsubscribe(),t([e,r.getState(),r.getOriginalState()])}});r=function(){a(),n()}})],null!=t&&n.push(new Promise(function(e){return setTimeout(e,t,null)})),i.label=1;case 1:return i.trys.push([1,,3,4]),[4,ra(p,Promise.race(n))];case 2:return a=i.sent(),rn(p),[2,a];case 3:return r(),[7];case 4:return[2]}})}))},c=[],f.label=1;case 1:return f.trys.push([1,3,4,6]),e.pending.add(t),[4,Promise.resolve(e.effect(a,rs({},o,{getOriginalState:l,condition:function(e,t){return u(e,t).then(Boolean)},take:u,delay:ro(t.signal),pause:ri(t.signal),extra:n,signal:t.signal,fork:(h=t.signal,g=c,function(e,t){t0(e,"taskExecutor");var r,n=new AbortController;t3(h,function(){return t5(n,h.reason)});var a=(r=function(){return t5(n,t7)},tf(void 0,null,function(){var t;return tt(this,function(a){switch(a.label){case 0:return a.trys.push([0,3,4,5]),[4,Promise.resolve()];case 1:return a.sent(),[4,tf(void 0,null,function(){var t;return tt(this,function(r){switch(r.label){case 0:return rn(h),rn(n.signal),[4,e({pause:ri(n.signal),delay:ro(n.signal),signal:n.signal})];case 1:return t=r.sent(),rn(n.signal),[2,t]}})})];case 2:return[2,{status:"ok",value:a.sent()}];case 3:return[2,{status:(t=a.sent())instanceof rr?"cancelled":"rejected",error:t}];case 4:return null==r||r(),[7];case 5:return[2]}})}));return(null==t?void 0:t.autoJoin)&&g.push(a),{result:ri(h)(a),cancel:function(){t5(n,t9)}}}),unsubscribe:e.unsubscribe,subscribe:function(){r.set(e.id,e)},cancelActiveListeners:function(){e.pending.forEach(function(e,r,n){e!==t&&(t5(e,re),n.delete(e))})}})))];case 2:return f.sent(),[3,6];case 3:return(d=f.sent())instanceof rr||rp(i,d,{raisedBy:"effect"}),[3,6];case 4:return[4,Promise.allSettled(c)];case 5:return f.sent(),t5(t,rt),e.pending.delete(t),[7];case 6:return[2]}})})},c=function(){r.forEach(rf),r.clear()};return{middleware:function(e){return function(t){return function(n){if(!tm(n))return t(n);if(rh.match(n))return s(n.payload);if(rg.match(n)){c();return}if(rv.match(n))return l(n.payload);var a,o=e.getState(),d=function(){if(o===rl)throw Error(ru+": getOriginalState can only be called synchronously");return o};try{if(a=t(n),r.size>0)for(var f=e.getState(),p=Array.from(r.values()),h=0;h<p.length;h++){var g=p[h],v=!1;try{v=g.predicate(n,f,o)}catch(e){v=!1,rp(i,e,{raisedBy:"predicate"})}v&&u(g,n,e,d)}}finally{o=rl}return a}}},startListening:s,stopListening:l,clearListeners:c}}var rS,rb,rw="RTK_autoBatch",rC=function(){return function(e){var t;return{payload:e,meta:((t={})[rw]=!0,t)}}},rk="function"==typeof queueMicrotask?queueMicrotask.bind("undefined"!=typeof window?window:void 0!==r.g?r.g:globalThis):function(e){return(rb||(rb=Promise.resolve())).then(e).catch(function(e){return setTimeout(function(){throw e},0)})},rO=function(e){return function(t){setTimeout(t,e)}},rI="undefined"!=typeof window&&window.requestAnimationFrame?window.requestAnimationFrame:rO(10),rA=function(e){return void 0===e&&(e={type:"raf"}),function(t){return function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];var a=t.apply(void 0,r),i=!0,o=!1,s=!1,l=new Set,u="tick"===e.type?rk:"raf"===e.type?rI:"callback"===e.type?e.queueNotification:rO(e.timeout),c=function(){s=!1,o&&(o=!1,l.forEach(function(e){return e()}))};return Object.assign({},a,{subscribe:function(e){var t=a.subscribe(function(){return i&&e()});return l.add(e),function(){t(),l.delete(e)}},dispatch:function(e){var t;try{return(o=!(i=!(null==(t=null==e?void 0:e.meta)?void 0:t[rw])))&&(s||(s=!0,u(c))),a.dispatch(e)}finally{i=!0}}})}}};!function(){function e(e,t){var r=a[e];return r?r.enumerable=t:a[e]=r={configurable:!0,enumerable:t,get:function(){var t=this[eY];return eZ.get(t,e)},set:function(t){var r=this[eY];eZ.set(r,e,t)}},r}function t(e){for(var t=e.length-1;t>=0;t--){var a=e[t][eY];if(!a.P)switch(a.i){case 5:n(a)&&eP(a);break;case 4:r(a)&&eP(a)}}}function r(e){for(var t=e.t,r=e.k,n=eG(r),a=n.length-1;a>=0;a--){var i=n[a];if(i!==eY){var o=t[i];if(void 0===o&&!ef(t,i))return!0;var s=r[i],l=s&&s[eY];if(l?l.t!==o:!eh(s,o))return!0}}var u=!!t[eY];return n.length!==eG(t).length+(u?0:1)}function n(e){var t=e.k;if(t.length!==e.t.length)return!0;var r=Object.getOwnPropertyDescriptor(t,t.length-1);if(r&&!r.get)return!0;for(var n=0;n<t.length;n++)if(!t.hasOwnProperty(n))return!0;return!1}var a={};eK.ES5||(eK.ES5={J:function(t,r){var n=Array.isArray(t),a=function(t,r){if(t){for(var n=Array(r.length),a=0;a<r.length;a++)Object.defineProperty(n,""+a,e(a,!0));return n}var i=eJ(r);delete i[eY];for(var o=eG(i),s=0;s<o.length;s++){var l=o[s];i[l]=e(l,t||!!i[l].enumerable)}return Object.create(Object.getPrototypeOf(r),i)}(n,t),i={i:n?5:4,A:r?r.A:e$,P:!1,I:!1,R:{},l:r,t:t,k:a,o:null,g:!1,C:!1};return Object.defineProperty(a,eY,{value:i,writable:!0}),a},S:function(e,r,a){a?es(r)&&r[eY].A===e&&t(e.p):(e.u&&function e(t){if(t&&"object"==typeof t){var r=t[eY];if(r){var a=r.t,i=r.k,o=r.R,s=r.i;if(4===s)ec(i,function(t){t!==eY&&(void 0!==a[t]||ef(a,t)?o[t]||e(i[t]):(o[t]=!0,eP(r)))}),ec(a,function(e){void 0!==i[e]||ef(i,e)||(o[e]=!1,eP(r))});else if(5===s){if(n(r)&&(eP(r),o.length=!0),i.length<a.length)for(var l=i.length;l<a.length;l++)o[l]=!1;else for(var u=a.length;u<i.length;u++)o[u]=!0;for(var c=Math.min(i.length,a.length),d=0;d<c;d++)i.hasOwnProperty(d)||(o[d]=!0),void 0===o[d]&&e(i[d])}}}}(e.p[0]),t(e.p))},K:function(e){return 4===e.i?r(e):n(e)}})}(),E(T()),E(V());var rq=e=>t=>r=>{var n,a;let i=null==(n=r.payload)?void 0:n.analyticsAction;void 0!==i&&(null==(a=r.payload)||delete a.analyticsAction);let o=t(r);return"search/executeSearch/fullfilled"===r.type&&void 0===i&&console.error("No analytics action associated with search:",r),"recommendation/get/fullfilled"===r.type&&void 0===i&&console.error("No analytics action associated with recommendation:",r),"productRecommendations/get/fullfilled"===r.type&&void 0===i&&console.error("No analytics action associated with product recommendation:",r),void 0!==i&&e.dispatch(i),o},rE=()=>e=>t=>e(t.instantlyCallable?t():t),rx=e=>()=>t=>r=>{var n;if(!r.error)return t(r);let a=r.error;if((null==(n=r.payload)?void 0:n.ignored)||e.error(a.stack||a.message||a.name||"Error",`Action dispatch error ${r.type}`,r),"SchemaValidationError"!==r.error.name)return t(r)},rR=e=>t=>r=>n=>(e.debug({action:n,nextState:t.getState()},`Action dispatched: ${n.type}`),r(n)),rD=class extends Error{constructor(e){super(e),this.name="SchemaValidationError"}},rj=class{constructor(e){this.definition=e}validate(e={},t=""){let r={...this.default,...e},n=[];for(let e in this.definition){let t=this.definition[e].validate(r[e]);t&&n.push(`${e}: ${t}`)}if(n.length){let e;throw e=`
  The following properties are invalid:

    ${n.join(`
	`)}
  
  ${t}
  `,new rD(e)}return r}get default(){let e={};for(let t in this.definition){let r=this.definition[t].default;void 0!==r&&(e[t]=r)}return e}},rF=class{constructor(e={}){this.baseConfig=e}validate(e){return this.baseConfig.required&&rM(e)?"value is required.":null}get default(){return this.baseConfig.default instanceof Function?this.baseConfig.default():this.baseConfig.default}get required(){return!0===this.baseConfig.required}};function rP(e){return void 0===e}function rM(e){return rP(e)||null===e}var rT=class{constructor(e={}){this.config=e,this.value=new rF(e)}validate(e){return this.value.validate(e)||(rP(e)||rU(e)?e<this.config.min?`minimum value of ${this.config.min} not respected.`:e>this.config.max?`maximum value of ${this.config.max} not respected.`:null:"value is not a number.")}get default(){return this.value.default}get required(){return this.value.required}};function rU(e){return"number"==typeof e&&!isNaN(e)}var rV=class{constructor(e={}){this.value=new rF(e)}validate(e){return this.value.validate(e)||(rP(e)||rL(e)?null:"value is not a boolean.")}get default(){return this.value.default}get required(){return this.value.required}};function rL(e){return"boolean"==typeof e}var r$=/^(?:(?:(?:https?|ftp):)?\/\/)(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})).?)(?::\d{2,5})?(?:[/?#]\S*)?$/i,r_=class{constructor(e={}){this.config={emptyAllowed:!0,url:!1,...e},this.value=new rF(this.config)}validate(e){let{emptyAllowed:t,url:r,regex:n,constrainTo:a}=this.config;return this.value.validate(e)||(rP(e)?null:rQ(e)?t||e.length?r&&!r$.test(e)?"value is not a valid URL.":n&&!n.test(e)?`value did not match provided regex ${n}`:a&&!a.includes(e)?`value should be one of: ${a.join(", ")}.`:null:"value is an empty string.":"value is not a string.")}get default(){return this.value.default}get required(){return this.value.required}};function rQ(e){return"[object String]"===Object.prototype.toString.call(e)}var rN=class{constructor(e={}){this.config={options:{required:!1},values:{},...e}}validate(e){if(rP(e))return this.config.options.required?"value is required and is currently undefined":null;if(!rz(e))return"value is not an object";for(let[t,r]of Object.entries(this.config.values))if(r.required&&rM(e[t]))return`value does not contain ${t}`;let t="";for(let[r,n]of Object.entries(this.config.values)){let a=e[r],i=n.validate(a);null!==i&&(t+=" "+i)}return""===t?null:t}get default(){}get required(){return!!this.config.options.required}};function rz(e){return void 0!==e&&"object"==typeof e}var rB=class{constructor(e={}){this.config=e,this.value=new rF(this.config)}validate(e){if(!rM(e)&&!Array.isArray(e))return"value is not an array";let t=this.value.validate(e);if(null!==t)return t;if(rM(e))return null;if(void 0!==this.config.max&&e.length>this.config.max)return`value contains more than ${this.config.max}`;if(void 0!==this.config.min&&e.length<this.config.min)return`value contains less than ${this.config.min}`;if(void 0!==this.config.each){let t="";return e.forEach(r=>{this.config.each.required&&rM(r)&&(t=`value is null or undefined: ${e.join(",")}`);let n=this.validatePrimitiveValue(r,this.config.each);null!==n&&(t+=" "+n)}),""===t?null:t}return null}validatePrimitiveValue(e,t){return rL(e)||rQ(e)||rU(e)||rz(e)?t.validate(e):"value is not a primitive value"}get default(){}get required(){return this.value.required}};function rH(e){return Array.isArray(e)}var rY=class{constructor(e){this.config=e,this.value=new rF(e)}validate(e){let t=this.value.validate(e);return null!==t?t:rP(e)||Object.values(this.config.enum).find(t=>t===e)?null:"value is not in enum."}get default(){return this.value.default}get required(){return this.value.required}},rW=new r_({required:!0,emptyAllowed:!1}),rG=new r_({required:!1,emptyAllowed:!1}),rJ=new r_({required:!0,emptyAllowed:!0}),rK=(new r_({required:!1,emptyAllowed:!0}),new rB({each:rW,required:!0})),rZ=({message:e,name:t,stack:r})=>({message:e,name:t,stack:r}),rX=(e,t)=>{if("required"in t)return{payload:new rj({value:t}).validate({value:e}).value};let r=new rN({options:{required:!0},values:t}).validate(e);if(r)throw new rD(r);return{payload:e}},r0=(e,t)=>{try{return rX(e,t)}catch(t){return{payload:e,error:rZ(t)}}},r1=(e,t,r,n)=>r3(e,t,r,`Check the initialState of ${n}`,"Controller initialization error"),r2=(e,t,r,n)=>r3(e,t,r,`Check the options of ${n}`,"Controller initialization error"),r3=(e,t,r,n,a)=>{try{return t.validate(r,n)}catch(t){throw e.logger.error(t,a),t}},r5=E(L()),r4=E($()),r6=E(_()),r8=E(Q()),r9=E(K()),r7=(Error("Failed to load reducers."),class extends Error{constructor(){super(),this.name="ExpiredToken",this.message="The token being used to perform the request is expired."}}),ne=class extends Error{constructor(e,t){super(),this.name="Disconnected",this.message=`Client could not connect to the following URL: ${e}`,this.statusCode=null!=t?t:0}},nt=E(ee()),nr=(e,t=5)=>e+Math.random().toString(36).substring(2,2+t);function nn(e){return Array.isArray(e)}function na(e){return""===e.trim()}var ni=new Set(["1",1,"yes",!0]);function no(){if("undefined"==typeof navigator||"undefined"==typeof window)return!1;let e=navigator,t=window;return[e.globalPrivacyControl,e.doNotTrack,e.msDoNotTrack,t.doNotTrack].some(e=>ni.has(e))}function ns(e){if("object"!=typeof e||!e)return e;try{return JSON.parse(JSON.stringify(e))}catch(t){return e}}function nl(e){return"string"==typeof e||"number"==typeof e||"boolean"==typeof e}var nu=class{static async call(e){let t=function(e){var t;let{url:r,method:n,requestParams:a,contentType:i,accessToken:o,signal:s}=e,l="POST"===e.method||"PUT"===e.method,u=(t=a,"application/x-www-form-urlencoded"===i?"object"==typeof t&&t&&Object.values(t).every(nl)?function(e){let t=[];for(let r in e){let n=encodeURIComponent(r),a=encodeURIComponent(e[r]);t.push(`${n}=${a}`)}return t.join("&")}(t):"":JSON.stringify(t));return{url:r,method:n,headers:{"Content-Type":i,Authorization:`Bearer ${o}`,...e.headers},...l&&{body:u},signal:s}}(e),{logger:r}=e,n=await nu.preprocessRequest(t,e);r.info(n,"Platform request");let{url:a,...i}=n,o=async()=>{let e=await (0,r8.default)(a,i);if(429===e.status)throw e;return e};try{let e=await (0,r9.backOff)(o,{retry:e=>{var t;let n=e&&(t=e.status,429===t);return n&&r.info("Platform retrying request"),n}});if(419===e.status)throw r.info("Platform renewing token"),new r7;if(404===e.status)throw new ne(a,e.status);return r.info({response:e,requestInfo:n},"Platform response"),e}catch(e){return"Failed to fetch"===e.message?new ne(a):e}}static async preprocessRequest(e,t){let{origin:r,preprocessRequest:n,logger:a,requestMetadata:i}=t,{signal:o,...s}=e,l=ns(s);try{let t=await n(e,r,i);return{...e,...t}}catch(e){a.error(e,"Platform request preprocessing failed. Returning default request options.")}return l}};function nc(e,t){return`https://${e}${t&&t.environment&&"prod"!==t.environment?t.environment:""}${t&&t.region&&"us"!==t.region?`-${t.region}`:""}.cloud.coveo.com`}function nd(e,t="prod"){let r="prod"===t?"":t,n=`https://${e}.org${r}.coveo.com`,a=`${n}/rest/search/v2`;return{platform:n,analytics:`https://${e}.analytics.org${r}.coveo.com`,search:a,admin:`https://${e}.admin.org${r}.coveo.com`}}function nf(e){return(null==e?void 0:e.multiRegionSubDomain)?`https://${e.multiRegionSubDomain}.org.coveo.com`:nc("platform",e)}r5.default.extend(r6.default),r5.default.extend(r4.default);var np="/rest/search/v2",nh="/rest/ua",ng=()=>({organizationId:"",accessToken:"",platformUrl:nf(),search:{apiBaseUrl:`${nf()}${np}`,locale:"en-US",timezone:r5.default.tz.guess(),authenticationProviders:[]},analytics:{enabled:!0,apiBaseUrl:`${nc("analytics",void 0)}${nh}`,nextApiBaseUrl:"",originContext:"Search",originLevel2:"default",originLevel3:"default",anonymous:!1,deviceId:"",userDisplayName:"",documentLocation:"",trackingId:"",analyticsMode:"legacy"}}),nv=()=>!1;function ny(){return{uniqueId:"",content:"",isLoading:!1,position:-1,resultsWithPreview:[]}}var nm=()=>"default",nS=((aQ=nS||{}).Relevance="relevance",aQ.Fields="fields",aQ),nb=((aN=nb||{}).Ascending="asc",aN.Descending="desc",aN);new rN({options:{required:!1},values:{by:new rY({enum:nS,required:!0}),fields:new rB({each:new rN({values:{name:new r_,direction:new rY({enum:nb})}})})}}),new rN({options:{required:!1},values:{by:new rY({enum:nS,required:!0}),fields:new rB({each:new rN({values:{field:new r_({required:!0}),direction:new rY({enum:nb}),displayName:new r_}})})}}),E(T());var nw=e=>e;function nC(){return{answerSnippet:"",documentId:{contentIdKey:"",contentIdValue:""},question:"",relatedQuestions:[],score:0}}function nk(){return{response:{results:[],searchUid:"",totalCountFiltered:0,facets:[],generateAutomaticFacets:{facets:[]},queryCorrections:[],triggers:[],questionAnswer:nC(),pipeline:"",splitTestRun:"",termsToHighlight:{},phrasesToHighlight:{},extendedResults:{}},duration:0,queryExecuted:"",error:null,automaticallyCorrected:!1,isLoading:!1,results:[],searchResponseId:"",requestId:"",questionAnswer:nC(),extendedResults:{}}}function nO(e){let{url:t,accessToken:r,organizationId:n,authentication:a,...i}=e;return i}var nI=e=>{let{response:t}=e;return t.body?nA(e):nq(t)},nA=e=>void 0!==e.body.exception?nE(e):void 0!==e.body.statusCode?e.body:{message:"unknown",statusCode:0,type:"unknown"},nq=e=>{let t=JSON.parse(JSON.stringify(e,Object.getOwnPropertyNames(e)));return{...t,message:`Client side error: ${t.message||""}`,statusCode:400,type:"ClientError"}},nE=e=>({message:e.body.exception.code,statusCode:e.response.status,type:e.body.exception.code});function nx(){if("undefined"==typeof window){let{AbortController:e}=et();return new e}return"undefined"==typeof AbortController?null:new AbortController}var nR=class{constructor(){this.currentAbortController=null}async enqueue(e,t){var r;let n=this.currentAbortController,a=this.currentAbortController=nx();n&&(t.warnOnAbort&&t.logger.warn("Cancelling current pending search query"),n.abort());try{return await e(null!=(r=null==a?void 0:a.signal)?r:null)}finally{this.currentAbortController===a&&(this.currentAbortController=null)}}},nD=class{constructor(e){this._params={},this._basePath=e}addParam(e,t){this._params={...this.params,[e]:t}}get basePath(){return this._basePath}get params(){return this._params}get hasParams(){return Object.entries(this._params).length}get href(){return this.hasParams?`${this.basePath}?${Object.entries(this.params).map(([e,t])=>`${e}=${encodeURIComponent(t)}`).join("&")}`:this.basePath}},nj=e=>/^https:\/\/platform(dev|stg|hipaa)?(-)?(eu|au)?\.cloud\.coveo\.com/.test(e),nF=(e,t)=>{let r=nP(e);return r&&r.organizationId===t?r:null},nP=e=>{let t=e.match(/^https:\/\/(?<organizationId>\w+)\.org(?<environment>dev|stg|hipaa)?\.coveo\.com/);return(null==t?void 0:t.groups)?t.groups:null},nM=(e,t,r,n)=>{let a=new nD(`${e.url}${n}`);return a.addParam("organizationId",e.organizationId),e.authentication&&a.addParam("authentication",e.authentication),{accessToken:e.accessToken,method:t,contentType:r,url:a.href,origin:"searchApiFetch"}},nT=(e,t)=>{let r=new nD(`${e.url}${t}`);return r.addParam("access_token",e.accessToken),r.addParam("organizationId",e.organizationId),r.addParam("uniqueId",e.uniqueId),void 0!==e.q&&r.addParam("q",e.q),void 0!==e.enableNavigation&&r.addParam("enableNavigation",`${e.enableNavigation}`),void 0!==e.requestedOutputSize&&r.addParam("requestedOutputSize",`${e.requestedOutputSize}`),void 0!==e.visitorId&&r.addParam("visitorId",`${e.visitorId}`),r.href},nU=async(e,t)=>{let r=await nu.call({...nM(e,"POST","application/x-www-form-urlencoded","/html"),requestParams:nO(e),requestMetadata:{method:"html"},...t});if(r instanceof Error)throw r;let n=((r.headers.get("content-type")||"").split(";").find(e=>-1!==e.indexOf("charset="))||"").split("=")[1]||"UTF-8",a=await r.arrayBuffer(),i=new TextDecoder(n).decode(a);return"string"==typeof i?{success:i}:{error:nI({response:r,body:i})}};function nV(e,t){if(t&&"AbortError"===e.name)return{error:{statusCode:e.code,type:e.name,message:e.message,ignored:!0}};if(e instanceof ne)return{error:{statusCode:e.statusCode,type:e.name,message:e.message}};throw e}var nL=class{constructor(e){this.options=e,this.apiCallsQueues={unknown:new nR,mainSearch:new nR,facetValues:new nR,foldingCollection:new nR,instantResults:new nR}}async plan(e){let t=await nu.call({...nM(e,"POST","application/json","/plan"),requestParams:nO(e),requestMetadata:{method:"plan"},...this.options});if(t instanceof Error)return nV(t);let r=await t.json();return void 0!==r.preprocessingOutput?{success:r}:{error:nI({response:t,body:r})}}async querySuggest(e){let t=await nu.call({...nM(e,"POST","application/json","/querySuggest"),requestMetadata:{method:"querySuggest"},requestParams:nO(e),...this.options});if(t instanceof Error)return nV(t);let r=await t.json(),n={response:t,body:r};return void 0!==r.completions?{success:(await this.options.postprocessQuerySuggestResponseMiddleware(n)).body}:{error:nI(n)}}async search(e,t){var r;let n;let a=null!=(r=null==t?void 0:t.origin)?r:"unknown",i=await this.apiCallsQueues[a].enqueue(r=>nu.call({...nM(e,"POST","application/json",""),requestParams:nO(e),requestMetadata:{method:"search",origin:null==t?void 0:t.origin},...this.options,signal:null!=r?r:void 0}),{logger:this.options.logger,warnOnAbort:!(null==t?void 0:t.disableAbortWarning)});if(i instanceof Error)return nV(i,null==t?void 0:t.disableAbortWarning);let o=await i.json(),s={response:i,body:o};return nQ(o)?(s.body=(n=nC(),rM(o.questionAnswer)?o.questionAnswer=n:o.questionAnswer={...n,...o.questionAnswer},o),{success:(await this.options.postprocessSearchResponseMiddleware(s)).body}):{error:nI(s)}}async facetSearch(e){let t=await nu.call({...nM(e,"POST","application/json","/facet"),requestParams:nO(e),requestMetadata:{method:"facetSearch"},...this.options});if(t instanceof Error)throw t;let r=await t.json();return(await this.options.postprocessFacetSearchResponseMiddleware({response:t,body:r})).body}async recommendations(e){let t=await nu.call({...nM(e,"POST","application/json",""),requestParams:nO(e),requestMetadata:{method:"recommendations"},...this.options});if(t instanceof Error)throw t;let r=await t.json();return nQ(r)?{success:r}:{error:nI({response:t,body:r})}}async html(e){return nU(e,{...this.options})}async productRecommendations(e){let t=await nu.call({...nM(e,"POST","application/json",""),requestParams:nO(e),requestMetadata:{method:"productRecommendations"},...this.options});if(t instanceof Error)throw t;let r=await t.json();return nQ(r)?{success:r}:{error:nI({response:t,body:r})}}async fieldDescriptions(e){let t=await nu.call({...nM(e,"GET","application/json","/fields"),requestParams:{},requestMetadata:{method:"fieldDescriptions"},...this.options});if(t instanceof Error)throw t;let r=await t.json();return void 0!==r.fields?{success:r}:{error:nI({response:t,body:r})}}},n$=e=>void 0!==e.success,n_=e=>void 0!==e.error;function nQ(e){return void 0!==e.results}function nN(){return{contextValues:{}}}var nz=()=>({correctedQuery:"",wordCorrections:[],originalQuery:""}),nB=()=>({correctedQuery:"",corrections:[],originalQuery:""});function nH(){return{enabled:!0}}function nY(){return{freezeFacetOrder:!1,facets:{}}}var nW=["author","language","urihash","objecttype","collection","source","permanentid"];[...nW];var nG=()=>({enabled:!1,fields:{collection:"foldingcollection",parent:"foldingparent",child:"foldingchild"},filterFieldRange:2,collections:{}});function nJ(){return{isVisible:!0,isLoading:!1,isStreaming:!1,citations:[],liked:!1,disliked:!1,responseFormat:{answerStyle:"default"},feedbackModalOpen:!1,feedbackSubmitted:!1,fieldsToIncludeInCitations:[]}}function nK(){return{firstResult:0,defaultNumberOfResults:10,numberOfResults:10,totalCountFiltered:0}}var nZ=()=>({q:"",enableQuerySyntax:!1}),nX=()=>({liked:!1,disliked:!1,expanded:!1,feedbackModalOpen:!1,relatedQuestions:[]}),n0=((az=n0||{}).Ascending="ascending",az.Descending="descending",az),n1=((aB=n1||{}).Relevancy="relevancy",aB.QRE="qre",aB.Date="date",aB.Field="field",aB.NoSort="nosort",aB),n2=e=>{if(rH(e))return e.map(e=>n2(e)).join(",");switch(e.by){case"relevancy":case"qre":case"nosort":return e.by;case"date":return`date ${e.order}`;case"field":return`@${e.field} ${e.order}`;default:return""}},n3=()=>({by:"relevancy"}),n5=e=>({by:"date",order:e}),n4=new rN({values:{by:new rY({enum:n1,required:!0}),order:new rY({enum:n0}),field:new r_}});function n6(){return n2(n3())}var n8=()=>({url:"",clientId:"",additionalFields:[],advancedParameters:{debug:!1},products:[],facets:{results:[]},error:null,isLoading:!1,responseId:""});function n9(){return{contextValues:{}}}var n7=()=>({cq:"",cqWasSet:!1,aq:"",aqWasSet:!1,lq:"",lqWasSet:!1,dq:"",dqWasSet:!1,defaultFilters:{cq:"",aq:"",lq:"",dq:""}}),ae=()=>"";E(T());var at=e=>e,ar=e=>e,an=e=>e,aa=e=>({past:[],present:e,future:[]}),ai=e=>{let{past:t,present:r,future:n}=e;if(!r||0===t.length)return e;let a=t[t.length-1];return{past:t.slice(0,t.length-1),present:a,future:[r,...n]}},ao=e=>{let{past:t,present:r,future:n}=e;return r&&0!==n.length?{past:[...t,r],present:n[0],future:n.slice(1)}:e},as=e=>{let{action:t,state:r,reducer:n}=e,{past:a,present:i}=r,o=n(i,t);return i?i===o?r:{past:[...a,i],present:o,future:[]}:aa(o)};function al(){return{desiredCount:5,numberOfValues:8,set:{}}}function au(e){var t,r,n;return{context:e.context||nN(),dictionaryFieldContext:e.dictionaryFieldContext||n9(),facetSet:e.facetSet||{},numericFacetSet:e.numericFacetSet||{},dateFacetSet:e.dateFacetSet||{},categoryFacetSet:e.categoryFacetSet||{},automaticFacetSet:null!=(t=e.automaticFacetSet)?t:al(),pagination:e.pagination||nK(),query:e.query||nZ(),tabSet:e.tabSet||{},advancedSearchQueries:e.advancedSearchQueries||n7(),staticFilterSet:e.staticFilterSet||{},querySet:e.querySet||{},instantResults:e.instantResults||{},sortCriteria:e.sortCriteria||n6(),pipeline:e.pipeline||ae(),searchHub:e.searchHub||nm(),facetOptions:e.facetOptions||nY(),facetOrder:null!=(r=e.facetOrder)?r:[],debug:null!=(n=e.debug)?n:nv()}}function ac(e){if(na(e.openingDelimiter)||na(e.closingDelimiter))throw Error("delimiters should be a non-empty string");if(rM(e.content)||na(e.content))return e.content;if(0===e.highlights.length)return ap(e.content);let t=e.content.length,r="",n=0;for(let a=0;a<e.highlights.length;a++){let i=e.highlights[a],o=i.offset,s=o+i.length;if(s>t)break;r+=ap(e.content.slice(n,o))+e.openingDelimiter+ap(e.content.slice(o,s))+e.closingDelimiter,n=s}return n!==t&&(r+=ap(e.content.slice(n))),r}function ad(e,t){return(e=ap(e)).replace(/\[(.*?)\]|\{(.*?)\}|\((.*?)\)/g,(e,r,n,a)=>r?af(r,t.notMatchDelimiters):n?af(n,t.exactMatchDelimiters):a?af(a,t.correctionDelimiters):e)}function af(e,t){return t?t.open+e+t.close:e}function ap(e){let t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},r="(?:"+Object.keys(t).join("|")+")",n=RegExp(r),a=RegExp(r,"g");return n.test(e)?e.replace(a,e=>t[e]):e}async function ah(e,t){let r=e.getReader(),n;for(;!(n=await r.read()).done;)t(n.value)}function ag(){return{data:"",event:"",id:"",retry:void 0}}!function(e={}){({...e})}({urihash:"example documentUriHash",source:"example sourceName",collection:"example collectionName",permanentid:"example contentIDValue"}),A({},{escape:()=>ap,getHighlightedSuggestion:()=>ad,highlightString:()=>ac});var av=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&0>t.indexOf(n)&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var a=0,n=Object.getOwnPropertySymbols(e);a<n.length;a++)0>t.indexOf(n[a])&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]]);return r},ay="text/event-stream",am="last-event-id";function aS(e){let t=e.headers.get("content-type");if(!(null==t?void 0:t.startsWith(ay)))throw Error(`Expected content-type to be ${ay}, Actual: ${t}`)}var ab=(e,t,r)=>new nD(`${e}/rest/organizations/${t}/machinelearning/streaming/${r}`).href,aw=class extends Error{},aC=class extends Error{constructor(e){super(e.message),this.payload=e}},ak=class{constructor(){this.timeouts=new Set}add(e){this.timeouts.add(e)}remove(e){clearTimeout(e),this.timeouts.delete(e)}isActive(e){return this.timeouts.has(e)}},aO=class{constructor(e){this.logger=e.logger}streamGeneratedAnswer(e,t){let{url:r,organizationId:n,streamId:a,accessToken:i}=e,{write:o,abort:s,close:l,resetAnswer:u}=t,c=new ak;if(!a){this.logger.error("No stream ID found");return}let d=0,f,p=()=>{f&&!c.isActive(f)&&(null==g||g.abort(),u(),v())},h=()=>{c.remove(f),clearTimeout(f),f=setTimeout(p,5e3),c.add(f)},g=nx(),v=()=>(function(e,t){var{signal:r,headers:n,onopen:a,onmessage:i,onclose:o,onerror:s,openWhenHidden:l,fetch:u}=t,c=av(t,["signal","headers","onopen","onmessage","onclose","onerror","openWhenHidden","fetch"]);return new Promise((t,d)=>{let f,p=Object.assign({},n);function h(){f?.abort(),document.hidden||b()}p.accept||(p.accept=ay),l||document.addEventListener("visibilitychange",h);let g=1e3,v=0;function y(){document.removeEventListener("visibilitychange",h),window.clearTimeout(v),f?.abort()}null==r||r.addEventListener("abort",()=>{y(),t()});let m=u??window.fetch,S=a??aS;async function b(){var r,n,a,l;f="undefined"==typeof AbortController?null:new AbortController;try{let r,s,u,d,h,v,b=await m(e,Object.assign(Object.assign({},c),{headers:p,signal:f?.signal}));await S(b),await ah(b.body,(n=e=>{e?p[am]=e:delete p[am]},a=e=>{g=e},r=ag(),s=new TextDecoder,l=function(e,t){if(0===e.length)null==i||i(r),r=ag();else if(t>0){let i=s.decode(e.subarray(0,t)),o=t+(32===e[t+1]?2:1),l=s.decode(e.subarray(o));switch(i){case"data":r.data=r.data?r.data+`
`+l:l;break;case"event":r.event=l;break;case"id":n(r.id=l);break;case"retry":let u=parseInt(l,10);isNaN(u)||a(r.retry=u)}}},v=!1,function(e){var t;let r;void 0===u?(u=e,d=0,h=-1):(t=u,(r=new Uint8Array(t.length+e.length)).set(t),r.set(e,t.length),u=r);let n=u.length,a=0;for(;d<n;){v&&(10===u[d]&&(a=++d),v=!1);let e=-1;for(;d<n&&-1===e;++d)switch(u[d]){case 58:-1===h&&(h=d-a);break;case 13:v=!0;case 10:e=d}if(-1===e)break;l(u.subarray(a,e),h),a=d,h=-1}a===n?u=void 0:0!==a&&(u=u.subarray(a),d-=a)})),null==o||o(),y(),t()}catch(e){if(!f?.signal.aborted)try{let t=null!==(r=null==s?void 0:s(e))&&void 0!==r?r:g;window.clearTimeout(v),v=window.setTimeout(b,t)}catch(e){y(),d(e)}}}b()})})(ab(r,n,a),{method:"GET",headers:{Authorization:`Bearer ${i}`,accept:"*/*"},signal:null==g?void 0:g.signal,async onopen(e){if(!e.ok||"text/event-stream"!==e.headers.get("content-type"))throw e.status>=400&&e.status<500&&429!==e.status?new aC({message:"Error opening stream",code:e.status}):new aw},onmessage:e=>{let t=JSON.parse(e.data);if("ERROR"===t.finishReason){c.remove(f),null==g||g.abort(),s({message:t.errorMessage,code:t.statusCode});return}o(t),d=0,"COMPLETED"===t.finishReason?(c.remove(f),l()):h()},onerror:e=>{if(c.remove(f),e instanceof aC)throw null==g||g.abort(),s(e),e;if(++d>3){this.logger.info("Maximum retry exceeded.");let e={message:"Failed to complete stream.",code:1};throw null==g||g.abort(),s(e),new aC(e)}this.logger.info(`Retrying...(${d}/3)`),u()}});return v(),g}};async function aI({config:e,environment:t,event:r,listenerManager:n}){let{url:a,token:i,mode:o}=e;"disabled"!==o&&(n.call(r),t.send(a,i,r))}var aA=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,aq="0.6.12";function aE(e,t,r,n){let{getReferrer:a,getLocation:i,getUserAgent:o}=r,s=function(e){let{trackingId:t}=e;return{trackingId:t}}(t),l=n.getClientId();return Object.freeze({type:e,config:s,ts:Date.now(),source:(t.source||[]).concat([`relay@${aq}`]),clientId:l,userAgent:o(),referrer:a(),location:i()})}function ax({url:e,token:t,trackingId:r,...n}){return Object.freeze({url:e,token:t,trackingId:r,...!!n.mode&&{mode:n.mode},...!!n.source&&{source:n.source}})}var aR=(n="coveo_",a=e=>{let t=e.split(".").slice(-2);return 2==t.length?t.join("."):""},{getItem(e){let t=`${n}${e}=`;for(let e of document.cookie.split(";")){let r=e.replace(/^\s+/,"");if(0===r.lastIndexOf(t,0))return r.substring(t.length,r.length)}return null},setItem(e,t,r){let i=a(window.location.hostname),o=`;expires=${new Date(new Date().getTime()+r).toUTCString()}`,s=i?`;domain=${i}`:"";document.cookie=`${n}${e}=${t}${o}${s};path=/;SameSite=Lax`},removeItem(e){this.setItem(e,"",-1)}});function aD(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&0>t.indexOf(n)&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var a=0,n=Object.getOwnPropertySymbols(e);a<n.length;a++)0>t.indexOf(n[a])&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]]);return r}function aj(e,t,r,n){return new(r||(r=Promise))(function(a,i){function o(e){try{l(n.next(e))}catch(e){i(e)}}function s(e){try{l(n.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?a(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(o,s)}l((n=n.apply(e,t||[])).next())})}function aF(){return"undefined"!=typeof navigator}function aP(){return"undefined"!=typeof document}function aM(){try{return"undefined"!=typeof localStorage}catch{return!1}}function aT(){return aF()&&navigator.cookieEnabled}(aH=aY||(aY={})).search="search",aH.click="click",aH.custom="custom",aH.view="view",aH.collect="collect";var aU=[aY.click,aY.custom,aY.search,aY.view],aV=(e,t)=>-1!==aU.indexOf(e)?Object.assign({language:aP()?document.documentElement.lang:"unknown",userAgent:aF()?navigator.userAgent:"unknown"},t):t,aL=class{static set(e,t,r){var n,a,i;r&&(n=new Date).setTime(n.getTime()+r),-1===(i=window.location.hostname).indexOf(".")?a$(e,t,n):a$(e,t,n,(a=i.split("."))[a.length-2]+"."+a[a.length-1])}static get(e){for(var t=e+"=",r=document.cookie.split(";"),n=0;n<r.length;n++){var a=r[n];if(0===(a=a.replace(/^\s+/,"")).lastIndexOf(t,0))return a.substring(t.length,a.length)}return null}static erase(e){aL.set(e,"",-1)}};function a$(e,t,r,n){document.cookie=`${e}=${t}`+(r?`;expires=${r.toUTCString()}`:"")+(n?`;domain=${n}`:"")+";path=/;SameSite=Lax"}var a_=class{getItem(e){return aL.get(`${a_.prefix}${e}`)}removeItem(e){aL.erase(`${a_.prefix}${e}`)}setItem(e,t,r){aL.set(`${a_.prefix}${e}`,t,r)}};a_.prefix="coveo_";var aQ,aN,az,aB,aH,aY,aW,aG=class{constructor(){this.cookieStorage=new a_}getItem(e){return localStorage.getItem(e)||this.cookieStorage.getItem(e)}removeItem(e){this.cookieStorage.removeItem(e),localStorage.removeItem(e)}setItem(e,t){localStorage.setItem(e,t),this.cookieStorage.setItem(e,t,31556926e3)}},aJ=class{getItem(e){return null}removeItem(e){}setItem(e,t){}},aK="__coveo.analytics.history",aZ=class{constructor(e){this.store=e||(aM()?localStorage:aT()?new a_:!function(){try{return"undefined"!=typeof sessionStorage}catch{return!1}}()?new aJ:sessionStorage)}addElement(e){e.internalTime=new Date().getTime(),e=this.cropQueryElement(this.stripEmptyQuery(e));let t=this.getHistoryWithInternalTime();null!=t?this.isValidEntry(e)&&this.setHistory([e].concat(t)):this.setHistory([e])}addElementAsync(e){return aj(this,void 0,void 0,function*(){e.internalTime=new Date().getTime(),e=this.cropQueryElement(this.stripEmptyQuery(e));let t=yield this.getHistoryWithInternalTimeAsync();null!=t?this.isValidEntry(e)&&this.setHistory([e].concat(t)):this.setHistory([e])})}getHistory(){let e=this.getHistoryWithInternalTime();return this.stripEmptyQueries(this.stripInternalTime(e))}getHistoryAsync(){return aj(this,void 0,void 0,function*(){let e=yield this.getHistoryWithInternalTimeAsync();return this.stripEmptyQueries(this.stripInternalTime(e))})}getHistoryWithInternalTime(){try{let e=this.store.getItem(aK);return e&&"string"==typeof e?JSON.parse(e):[]}catch{return[]}}getHistoryWithInternalTimeAsync(){return aj(this,void 0,void 0,function*(){try{let e=yield this.store.getItem(aK);return e?JSON.parse(e):[]}catch{return[]}})}setHistory(e){try{this.store.setItem(aK,JSON.stringify(e.slice(0,20)))}catch{}}clear(){try{this.store.removeItem(aK)}catch{}}getMostRecentElement(){let e=this.getHistoryWithInternalTime();return Array.isArray(e)?e.sort((e,t)=>(t.internalTime||0)-(e.internalTime||0))[0]:null}cropQueryElement(e){return e.name&&e.value&&"query"===e.name.toLowerCase()&&(e.value=e.value.slice(0,75)),e}isValidEntry(e){let t=this.getMostRecentElement();return!t||t.value!=e.value||(e.internalTime||0)-(t.internalTime||0)>6e4}stripInternalTime(e){return Array.isArray(e)?e.map(e=>{let{name:t,time:r,value:n}=e;return{name:t,time:r,value:n}}):[]}stripEmptyQuery(e){let{name:t,time:r,value:n}=e;return t&&"string"==typeof n&&"query"===t.toLowerCase()&&""===n.trim()?{name:t,time:r}:e}stripEmptyQueries(e){return e.map(e=>this.stripEmptyQuery(e))}},aX=Object.freeze({__proto__:null,HistoryStore:aZ,MAX_NUMBER_OF_HISTORY_ELEMENTS:20,MAX_VALUE_SIZE:75,MIN_THRESHOLD_FOR_DUPLICATE_VALUE:6e4,STORE_KEY:aK,default:aZ}),a0=(e,t)=>aj(void 0,void 0,void 0,function*(){return e===aY.view?(yield a1(t.contentIdValue),Object.assign({location:window.location.toString(),referrer:document.referrer,title:document.title},t)):t}),a1=e=>aj(void 0,void 0,void 0,function*(){let t=new aZ,r={name:"PageView",value:e,time:new Date().toISOString()};yield t.addElementAsync(r)}),a2=new Uint8Array(16);function a3(){if(!aW&&!(aW="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)))throw Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return aW(a2)}var a5=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function a4(e){return"string"==typeof e&&a5.test(e)}var a6=[];for(let e=0;e<256;++e)a6.push((e+256).toString(16).slice(1));function a8(e,t=0){return(a6[e[t+0]]+a6[e[t+1]]+a6[e[t+2]]+a6[e[t+3]]+"-"+a6[e[t+4]]+a6[e[t+5]]+"-"+a6[e[t+6]]+a6[e[t+7]]+"-"+a6[e[t+8]]+a6[e[t+9]]+"-"+a6[e[t+10]]+a6[e[t+11]]+a6[e[t+12]]+a6[e[t+13]]+a6[e[t+14]]+a6[e[t+15]]).toLowerCase()}var a9={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};function a7(e,t,r){if(a9.randomUUID&&!t&&!e)return a9.randomUUID();let n=(e=e||{}).random||(e.rng||a3)();if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,t){r=r||0;for(let e=0;e<16;++e)t[r+e]=n[e];return t}return a8(n)}function ie(e,t){return e<<t|e>>>32-t}var it=function(e,t,r){function n(e,t,n,a){var i;if("string"==typeof e&&(e=function(e){e=unescape(encodeURIComponent(e));let t=[];for(let r=0;r<e.length;++r)t.push(e.charCodeAt(r));return t}(e)),"string"==typeof t&&(t=function(e){if(!a4(e))throw TypeError("Invalid UUID");let t,r=new Uint8Array(16);return r[0]=(t=parseInt(e.slice(0,8),16))>>>24,r[1]=t>>>16&255,r[2]=t>>>8&255,r[3]=255&t,r[4]=(t=parseInt(e.slice(9,13),16))>>>8,r[5]=255&t,r[6]=(t=parseInt(e.slice(14,18),16))>>>8,r[7]=255&t,r[8]=(t=parseInt(e.slice(19,23),16))>>>8,r[9]=255&t,r[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,r[11]=t/4294967296&255,r[12]=t>>>24&255,r[13]=t>>>16&255,r[14]=t>>>8&255,r[15]=255&t,r}(t)),(null===(i=t)||void 0===i?void 0:i.length)!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let o=new Uint8Array(16+e.length);if(o.set(t),o.set(e,t.length),(o=r(o))[6]=15&o[6]|80,o[8]=63&o[8]|128,n){a=a||0;for(let e=0;e<16;++e)n[a+e]=o[e];return n}return a8(o)}try{n.name="v5"}catch{}return n.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",n.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8",n}(0,0,function(e){let t=[1518500249,1859775393,2400959708,3395469782],r=[1732584193,4023233417,2562383102,271733878,3285377520];if("string"==typeof e){let t=unescape(encodeURIComponent(e));e=[];for(let r=0;r<t.length;++r)e.push(t.charCodeAt(r))}else Array.isArray(e)||(e=Array.prototype.slice.call(e));e.push(128);let n=Math.ceil((e.length/4+2)/16),a=Array(n);for(let t=0;t<n;++t){let r=new Uint32Array(16);for(let n=0;n<16;++n)r[n]=e[64*t+4*n]<<24|e[64*t+4*n+1]<<16|e[64*t+4*n+2]<<8|e[64*t+4*n+3];a[t]=r}a[n-1][14]=(e.length-1)*8/4294967296,a[n-1][14]=Math.floor(a[n-1][14]),a[n-1][15]=(e.length-1)*8&4294967295;for(let e=0;e<n;++e){let n=new Uint32Array(80);for(let t=0;t<16;++t)n[t]=a[e][t];for(let e=16;e<80;++e)n[e]=ie(n[e-3]^n[e-8]^n[e-14]^n[e-16],1);let i=r[0],o=r[1],s=r[2],l=r[3],u=r[4];for(let e=0;e<80;++e){let r=Math.floor(e/20),a=ie(i,5)+function(e,t,r,n){switch(e){case 0:return t&r^~t&n;case 1:case 3:return t^r^n;case 2:return t&r^t&n^r&n}}(r,o,s,l)+u+t[r]+n[e]>>>0;u=l,l=s,s=ie(o,30)>>>0,o=i,i=a}r[0]=r[0]+i>>>0,r[1]=r[1]+o>>>0,r[2]=r[2]+s>>>0,r[3]=r[3]+l>>>0,r[4]=r[4]+u>>>0}return[r[0]>>24&255,r[0]>>16&255,r[0]>>8&255,255&r[0],r[1]>>24&255,r[1]>>16&255,r[1]>>8&255,255&r[1],r[2]>>24&255,r[2]>>16&255,r[2]>>8&255,255&r[2],r[3]>>24&255,r[3]>>16&255,r[3]>>8&255,255&r[3],r[4]>>24&255,r[4]>>16&255,r[4]>>8&255,255&r[4]]}),ir="2.28.24",ia=e=>`${e.protocol}//${e.hostname}${0===e.pathname.indexOf("/")?e.pathname:`/${e.pathname}`}${e.search}`,ii={pageview:"pageview",event:"event"},io=class{constructor({client:e,uuidGenerator:t=a7}){this.client=e,this.uuidGenerator=t}},is=class extends io{constructor({client:e,uuidGenerator:t=a7}){super({client:e,uuidGenerator:t}),this.actionData={},this.pageViewId=t(),this.nextPageViewId=this.pageViewId,this.currentLocation=ia(window.location),this.lastReferrer=aP()?document.referrer:"",this.addHooks()}getApi(e){return"setAction"===e?this.setAction:null}setAction(e,t){this.action=e,this.actionData=t}clearData(){this.clearPluginData(),this.action=void 0,this.actionData={}}getLocationInformation(e,t){return Object.assign({hitType:e},this.getNextValues(e,t))}updateLocationInformation(e,t){this.updateLocationForNextPageView(e,t)}getDefaultContextInformation(e){let t={title:aP()?document.title:"",encoding:aP()?document.characterSet:"UTF-8"},r={screenResolution:`${screen.width}x${screen.height}`,screenColor:`${screen.colorDepth}-bit`},n={language:navigator.language,userAgent:navigator.userAgent};return Object.assign(Object.assign(Object.assign(Object.assign({},{time:Date.now(),eventId:this.uuidGenerator()}),r),n),t)}updateLocationForNextPageView(e,t){let{pageViewId:r,referrer:n,location:a}=this.getNextValues(e,t);this.lastReferrer=n,this.pageViewId=r,this.currentLocation=a,e===ii.pageview&&(this.nextPageViewId=this.uuidGenerator(),this.hasSentFirstPageView=!0)}getNextValues(e,t){return{pageViewId:e===ii.pageview?this.nextPageViewId:this.pageViewId,referrer:e===ii.pageview&&this.hasSentFirstPageView?this.currentLocation:this.lastReferrer,location:e===ii.pageview?this.getCurrentLocationFromPayload(t):this.currentLocation}}getCurrentLocationFromPayload(e){return e.page?`${this.currentLocation.split("/").slice(0,3).join("/")}${e.page.replace(/^\/?(.*)$/,"/$1")}`:ia(window.location)}},il=class{constructor(e,t){if(!a4(e))throw Error("Not a valid uuid");this.clientId=e,this.creationDate=Math.floor(t/1e3)}toString(){return this.clientId.replace(/-/g,"")+"."+this.creationDate.toString()}get expired(){let e=Math.floor(Date.now()/1e3)-this.creationDate;return e<0||e>il.expirationTime}validate(e,t){return!this.expired&&this.matchReferrer(e,t)}matchReferrer(e,t){try{let r=new URL(e);return t.some(e=>RegExp(e.replace(/\\/g,"\\\\").replace(/\./g,"\\.").replace(/\*/g,".*")+"$").test(r.host))}catch{return!1}}static fromString(e){let t=e.split(".");if(2!==t.length)return null;let[r,n]=t;if(32!==r.length||isNaN(parseInt(n)))return null;let a=r.substring(0,8)+"-"+r.substring(8,12)+"-"+r.substring(12,16)+"-"+r.substring(16,20)+"-"+r.substring(20,32);return a4(a)?new il(a,1e3*Number.parseInt(n)):null}};il.cvo_cid="cvo_cid",il.expirationTime=120;var iu=Object.keys;function ic(e){return null!==e&&"object"==typeof e&&!Array.isArray(e)}var id={id:"svc_ticket_id",subject:"svc_ticket_subject",description:"svc_ticket_description",category:"svc_ticket_category",productId:"svc_ticket_product_id",custom:"svc_ticket_custom"},ip=RegExp(`^(${[...iu(id).map(e=>id[e])].join("|")}$)`),ih=e=>iu(e).filter(t=>void 0!==e[t]).reduce((t,r)=>{let n=id[r]||r;return Object.assign(Object.assign({},t),{[n]:e[r]})},{}),ig=[e=>ip.test(e)],iv={id:"id",name:"nm",brand:"br",category:"ca",variant:"va",price:"pr",quantity:"qt",coupon:"cc",position:"ps",group:"group"},iy={id:"id",name:"nm",brand:"br",category:"ca",variant:"va",position:"ps",price:"pr",group:"group"},im={action:"pa",list:"pal",listSource:"pls"},iS={id:"ti",revenue:"tr",tax:"tt",shipping:"ts",coupon:"tcc",affiliation:"ta",step:"cos",option:"col"},ib={id:"quoteId",affiliation:"quoteAffiliation"},iw={id:"reviewId",rating:"reviewRating",comment:"reviewComment"},iC={add:im,bookmark_add:im,bookmark_remove:im,click:im,checkout:im,checkout_option:im,detail:im,impression:im,remove:im,refund:Object.assign(Object.assign({},im),iS),purchase:Object.assign(Object.assign({},im),iS),quickview:im,quote:Object.assign(Object.assign({},im),ib),review:Object.assign(Object.assign({},im),iw)},ik=iu(iv).map(e=>iv[e]),iO=iu(iy).map(e=>iy[e]),iI=iu(im).map(e=>im[e]),iA=iu(iS).map(e=>iS[e]),iq=iu(iw).map(e=>iw[e]),iE=iu(ib).map(e=>ib[e]),ix=[...ik,"custom"].join("|"),iR=[...iO,"custom"].join("|"),iD="(pr[0-9]+)",ij="(il[0-9]+pi[0-9]+)",iF=RegExp(`^${iD}(${ix})$`),iP=RegExp(`^(${ij}(${iR}))|(il[0-9]+nm)$`),iM=RegExp(`^(${iI.join("|")})$`),iT=RegExp(`^(${iA.join("|")})$`),iU=RegExp(`^${iD}custom$`),iV=RegExp(`^${ij}custom$`),iL=RegExp(`^(${["loyaltyCardId","loyaltyTier","thirdPartyPersona","companyName","favoriteStore","storeName","userIndustry","userRole","userDepartment","businessUnit",...iq,...iE].join("|")})$`),i$=[e=>iP.test(e),e=>iF.test(e),e=>iM.test(e),e=>iT.test(e),e=>iL.test(e)],i_=[iU,iV],iQ=Object.assign(Object.assign({},Object.assign(Object.assign(Object.assign(Object.assign({},{anonymizeIp:"aip"}),{eventCategory:"ec",eventAction:"ea",eventLabel:"el",eventValue:"ev",page:"dp",visitorId:"cid",clientId:"cid",userId:"uid",currencyCode:"cu"}),{hitType:"t",pageViewId:"pid",encoding:"de",location:"dl",referrer:"dr",screenColor:"sd",screenResolution:"sr",title:"dt",userAgent:"ua",language:"ul",eventId:"z",time:"tm"}),["contentId","contentIdKey","contentType","searchHub","tab","searchUid","permanentId","contentLocale","trackingId"].reduce((e,t)=>Object.assign(Object.assign({},e),{[t]:t}),{}))),{svcAction:"svc_action",svcActionData:"svc_action_data"}),iN=e=>{let t=!!e.action&&iC[e.action]||{};return iu(e).reduce((r,n)=>{let a=t[n]||iQ[n]||n;return Object.assign(Object.assign({},r),{[a]:e[n]})},{})},iz=iu(iQ).map(e=>iQ[e]),iB=e=>-1!==iz.indexOf(e),iH=e=>"custom"===e,iY=e=>[...i$,...ig,iB,iH].some(t=>t(e)),iW=e=>iu(e).reduce((t,r)=>{let n=iG(r);return n?Object.assign(Object.assign({},t),iJ(n,e[r])):Object.assign(Object.assign({},t),{[r]:e[r]})},{}),iG=e=>{let t;return[...i_].every(r=>{var n;return!(t=null===(n=r.exec(e))||void 0===n?void 0:n[1])}),t},iJ=(e,t)=>iu(t).reduce((r,n)=>Object.assign(Object.assign({},r),{[`${e}${n}`]:t[n]}),{}),iK=class{constructor(e){this.opts=e}sendEvent(e,t){return aj(this,void 0,void 0,function*(){if(!this.isAvailable())throw Error('navigator.sendBeacon is not supported in this browser. Consider adding a polyfill like "sendbeacon-polyfill".');let{baseUrl:r,preprocessRequest:n}=this.opts,a=yield this.getQueryParamsForEventType(e),{url:i,payload:o}=yield this.preProcessRequestAsPotentialJSONString(`${r}/analytics/${e}?${a}`,t,n),s=this.encodeForEventType(e,o),l=new Blob([s],{type:"application/x-www-form-urlencoded"});navigator.sendBeacon(i,l)})}isAvailable(){return"sendBeacon"in navigator}deleteHttpCookieVisitorId(){return Promise.resolve()}preProcessRequestAsPotentialJSONString(e,t,r){return aj(this,void 0,void 0,function*(){let n=e,a=t;if(r){let{url:i,body:o}=yield r({url:e,body:JSON.stringify(t)},"analyticsBeacon");n=i||e;try{a=JSON.parse(o)}catch(e){console.error("Unable to process the request body as a JSON string",e)}}return{payload:a,url:n}})}encodeForEventType(e,t){return this.isEventTypeLegacy(e)?this.encodeForLegacyType(e,t):this.encodeForFormUrlEncoded(Object.assign({access_token:this.opts.token},t))}getQueryParamsForEventType(e){return aj(this,void 0,void 0,function*(){let{token:t,visitorIdProvider:r}=this.opts,n=yield r.getCurrentVisitorId();return[t&&this.isEventTypeLegacy(e)?`access_token=${t}`:"",n?`visitorId=${n}`:"","discardVisitInfo=true"].filter(e=>!!e).join("&")})}isEventTypeLegacy(e){return -1!==[aY.click,aY.custom,aY.search,aY.view].indexOf(e)}encodeForLegacyType(e,t){return`${e}Event=${encodeURIComponent(JSON.stringify(t))}`}encodeForFormUrlEncoded(e){return Object.keys(e).filter(t=>!!e[t]).map(t=>`${encodeURIComponent(t)}=${encodeURIComponent(this.encodeValue(e[t]))}`).join("&")}encodeValue(e){return"number"==typeof e||"string"==typeof e||"boolean"==typeof e?e:JSON.stringify(e)}},iZ=class{sendEvent(e,t){return aj(this,void 0,void 0,function*(){return Promise.resolve()})}deleteHttpCookieVisitorId(){return aj(this,void 0,void 0,function*(){return Promise.resolve()})}},iX=window.fetch,i0=class{constructor(e){this.opts=e}sendEvent(e,t){return aj(this,void 0,void 0,function*(){let{baseUrl:r,visitorIdProvider:n,preprocessRequest:a}=this.opts,i={url:`${r}/analytics/${e}${this.shouldAppendVisitorId(e)?yield this.getVisitorIdParam():""}`,credentials:"include",mode:"cors",headers:this.getHeaders(),method:"POST",body:JSON.stringify(t)},o=Object.assign(Object.assign({},i),a?yield a(i,"analyticsFetch"):{}),{url:s}=o,l=aD(o,["url"]),u=yield iX(s,l);if(u.ok){let e=yield u.json();return e.visitorId&&n.setCurrentVisitorId(e.visitorId),e}try{u.json()}catch{}throw console.error(`An error has occured when sending the "${e}" event.`,u,t),Error(`An error has occurred when sending the "${e}" event. Check the console logs for more details.`)})}deleteHttpCookieVisitorId(){return aj(this,void 0,void 0,function*(){let{baseUrl:e}=this.opts,t=`${e}/analytics/visit`;yield iX(t,{headers:this.getHeaders(),method:"DELETE"})})}shouldAppendVisitorId(e){return -1!==[aY.click,aY.custom,aY.search,aY.view].indexOf(e)}getVisitorIdParam(){return aj(this,void 0,void 0,function*(){let{visitorIdProvider:e}=this.opts,t=yield e.getCurrentVisitorId();return t?`?visitor=${t}`:""})}getHeaders(){let{token:e}=this.opts;return Object.assign(Object.assign({},e?{Authorization:`Bearer ${e}`}:{}),{"Content-Type":"application/json"})}},i1=class{constructor(e,t){aM()&&aT()?this.storage=new aG:aM()?this.storage=localStorage:(console.warn("BrowserRuntime detected no valid storage available.",this),this.storage=new aJ),this.client=new i0(e),this.beaconClient=new iK(e),window.addEventListener("beforeunload",()=>{for(let{eventType:e,payload:r}of t())this.beaconClient.sendEvent(e,r)})}getClientDependingOnEventType(e){return"click"===e&&this.beaconClient.isAvailable()?this.beaconClient:this.client}},i2=class{constructor(e,t){this.storage=t||new aJ,this.client=new i0(e)}getClientDependingOnEventType(e){return this.client}},i3=class{constructor(){this.storage=new aJ,this.client=new iZ}getClientDependingOnEventType(e){return this.client}},i5=e=>(null==e?void 0:e.startsWith("xx"))||!1,i4=`
        We've detected you're using React Native but have not provided the corresponding runtime, 
        for an optimal experience please use the "coveo.analytics/react-native" subpackage.
        Follow the Readme on how to set it up: https://github.com/coveo/coveo.analytics.js#using-react-native
    `,i6=["1",1,"yes",!0];function i8(){return aF()&&[navigator.globalPrivacyControl,navigator.doNotTrack,navigator.msDoNotTrack,window.doNotTrack].some(e=>-1!==i6.indexOf(e))}var i9,i7={default:"https://analytics.cloud.coveo.com/rest/ua"},oe=class{get defaultOptions(){return{endpoint:i7.default,isCustomEndpoint:!1,token:"",version:"v15",beforeSendHooks:[],afterSendHooks:[]}}get version(){return ir}constructor(e){if(this.acceptedLinkReferrers=[],!e)throw Error("You have to pass options to this constructor");this.options=Object.assign(Object.assign({},this.defaultOptions),e),this.visitorId="",this.bufferedRequests=[],this.beforeSendHooks=[a0,aV].concat(this.options.beforeSendHooks),this.afterSendHooks=this.options.afterSendHooks,this.eventTypeMapping={};let t={baseUrl:this.baseUrl,token:this.options.token,visitorIdProvider:this,preprocessRequest:this.options.preprocessRequest};this.runtime=this.options.runtimeEnvironment||this.initRuntime(t),i8()&&(this.clear(),this.runtime.storage=new aJ),this.addEventTypeMapping(aY.view,{newEventType:aY.view,addClientIdParameter:!0}),this.addEventTypeMapping(aY.click,{newEventType:aY.click,addClientIdParameter:!0}),this.addEventTypeMapping(aY.custom,{newEventType:aY.custom,addClientIdParameter:!0}),this.addEventTypeMapping(aY.search,{newEventType:aY.search,addClientIdParameter:!0})}initRuntime(e){return"undefined"!=typeof window&&aP()?new i1(e,()=>{let e=[...this.bufferedRequests];return this.bufferedRequests=[],e}):("undefined"!=typeof navigator&&"ReactNative"==navigator.product&&console.warn(i4),new i2(e))}get storage(){return this.runtime.storage}determineVisitorId(){return aj(this,void 0,void 0,function*(){try{return this.extractClientIdFromLink(window.location.href)||(yield this.storage.getItem("visitorId"))||a7()}catch(e){return console.log("Could not get visitor ID from the current runtime environment storage. Using a random ID instead.",e),a7()}})}getCurrentVisitorId(){return aj(this,void 0,void 0,function*(){if(!this.visitorId){let e=yield this.determineVisitorId();yield this.setCurrentVisitorId(e)}return this.visitorId})}setCurrentVisitorId(e){return aj(this,void 0,void 0,function*(){this.visitorId=e,yield this.storage.setItem("visitorId",e)})}setClientId(e,t){return aj(this,void 0,void 0,function*(){if(a4(e))this.setCurrentVisitorId(e.toLowerCase());else{if(!t)throw Error("Cannot generate uuid client id without a specific namespace string.");this.setCurrentVisitorId(it(e,it(t,"38824e1f-37f5-42d3-8372-a4b8fa9df946")))}})}getParameters(e,...t){return aj(this,void 0,void 0,function*(){return yield this.resolveParameters(e,...t)})}getPayload(e,...t){return aj(this,void 0,void 0,function*(){let r=yield this.resolveParameters(e,...t);return yield this.resolvePayloadForParameters(e,r)})}get currentVisitorId(){return"string"!=typeof(this.visitorId||this.storage.getItem("visitorId"))&&this.setCurrentVisitorId(a7()),this.visitorId}set currentVisitorId(e){this.visitorId=e,this.storage.setItem("visitorId",e)}extractClientIdFromLink(e){if(i8())return null;try{let t=new URL(e).searchParams.get(il.cvo_cid);if(null==t)return null;let r=il.fromString(t);return r&&aP()&&r.validate(document.referrer,this.acceptedLinkReferrers)?r.clientId:null}catch{}return null}resolveParameters(e,...t){return aj(this,void 0,void 0,function*(){let{variableLengthArgumentsNames:r=[],addVisitorIdParameter:n=!1,usesMeasurementProtocol:a=!1,addClientIdParameter:i=!1}=this.eventTypeMapping[e]||{};return yield[e=>r.length>0?this.parseVariableArgumentsPayload(r,e):e[0],e=>aj(this,void 0,void 0,function*(){return Object.assign(Object.assign({},e),{visitorId:n?yield this.getCurrentVisitorId():""})}),e=>aj(this,void 0,void 0,function*(){return i?Object.assign(Object.assign({},e),{clientId:yield this.getCurrentVisitorId()}):e}),e=>a?this.ensureAnonymousUserWhenUsingApiKey(e):e,t=>this.beforeSendHooks.reduce((t,r)=>aj(this,void 0,void 0,function*(){let n=yield t;return yield r(e,n)}),t)].reduce((e,t)=>aj(this,void 0,void 0,function*(){let r=yield e;return yield t(r)}),Promise.resolve(t))})}resolvePayloadForParameters(e,t){return aj(this,void 0,void 0,function*(){let{usesMeasurementProtocol:r=!1}=this.eventTypeMapping[e]||{};return yield[e=>this.setTrackingIdIfTrackingIdNotPresent(e),t=>this.removeEmptyPayloadValues(t,e),t=>this.validateParams(t,e),e=>r?iN(e):e,e=>r?this.removeUnknownParameters(e):e,e=>r?this.processCustomParameters(e):this.mapCustomParametersToCustomData(e)].reduce((e,t)=>aj(this,void 0,void 0,function*(){let r=yield e;return yield t(r)}),Promise.resolve(t))})}makeEvent(e,...t){return aj(this,void 0,void 0,function*(){let{newEventType:r=e}=this.eventTypeMapping[e]||{},n=yield this.resolveParameters(e,...t),a=yield this.resolvePayloadForParameters(e,n);return{eventType:r,payload:a,log:t=>aj(this,void 0,void 0,function*(){return this.bufferedRequests.push({eventType:r,payload:Object.assign(Object.assign({},a),t)}),yield Promise.all(this.afterSendHooks.map(r=>r(e,Object.assign(Object.assign({},n),t)))),yield this.deferExecution(),yield this.sendFromBuffer()})}})}sendEvent(e,...t){return aj(this,void 0,void 0,function*(){return(yield this.makeEvent(e,...t)).log({})})}deferExecution(){return new Promise(e=>setTimeout(e,0))}sendFromBuffer(){return aj(this,void 0,void 0,function*(){let e=this.bufferedRequests.shift();if(e){let{eventType:t,payload:r}=e;return this.runtime.getClientDependingOnEventType(t).sendEvent(t,r)}})}clear(){this.storage.removeItem("visitorId"),new aZ().clear()}deleteHttpOnlyVisitorId(){this.runtime.client.deleteHttpCookieVisitorId()}makeSearchEvent(e){return aj(this,void 0,void 0,function*(){return this.makeEvent(aY.search,e)})}sendSearchEvent(e){var{searchQueryUid:t}=e,r=aD(e,["searchQueryUid"]);return aj(this,void 0,void 0,function*(){return(yield this.makeSearchEvent(r)).log({searchQueryUid:t})})}makeClickEvent(e){return aj(this,void 0,void 0,function*(){return this.makeEvent(aY.click,e)})}sendClickEvent(e){var{searchQueryUid:t}=e,r=aD(e,["searchQueryUid"]);return aj(this,void 0,void 0,function*(){return(yield this.makeClickEvent(r)).log({searchQueryUid:t})})}makeCustomEvent(e){return aj(this,void 0,void 0,function*(){return this.makeEvent(aY.custom,e)})}sendCustomEvent(e){var{lastSearchQueryUid:t}=e,r=aD(e,["lastSearchQueryUid"]);return aj(this,void 0,void 0,function*(){return(yield this.makeCustomEvent(r)).log({lastSearchQueryUid:t})})}makeViewEvent(e){return aj(this,void 0,void 0,function*(){return this.makeEvent(aY.view,e)})}sendViewEvent(e){return aj(this,void 0,void 0,function*(){return(yield this.makeViewEvent(e)).log({})})}getVisit(){return aj(this,void 0,void 0,function*(){let e=yield(yield fetch(`${this.baseUrl}/analytics/visit`)).json();return this.visitorId=e.visitorId,e})}getHealth(){return aj(this,void 0,void 0,function*(){return yield(yield fetch(`${this.baseUrl}/analytics/monitoring/health`)).json()})}registerBeforeSendEventHook(e){this.beforeSendHooks.push(e)}registerAfterSendEventHook(e){this.afterSendHooks.push(e)}addEventTypeMapping(e,t){this.eventTypeMapping[e]=t}setAcceptedLinkReferrers(e){if(Array.isArray(e)&&e.every(e=>"string"==typeof e))this.acceptedLinkReferrers=e;else throw Error("Parameter should be an array of domain strings")}parseVariableArgumentsPayload(e,t){let r={};for(let n=0,a=t.length;n<a;n++){let a=t[n];if("string"==typeof a)r[e[n]]=a;else if("object"==typeof a)return Object.assign(Object.assign({},r),a)}return r}isKeyAllowedEmpty(e,t){return -1!==(({[aY.search]:["queryText"]})[e]||[]).indexOf(t)}removeEmptyPayloadValues(e,t){let r=e=>null!=e&&""!==e;return Object.keys(e).filter(n=>this.isKeyAllowedEmpty(t,n)||r(e[n])).reduce((t,r)=>Object.assign(Object.assign({},t),{[r]:e[r]}),{})}removeUnknownParameters(e){return Object.keys(e).filter(e=>{if(iY(e))return!0;console.log(e,"is not processed by coveoua")}).reduce((t,r)=>Object.assign(Object.assign({},t),{[r]:e[r]}),{})}processCustomParameters(e){let{custom:t}=e,r=aD(e,["custom"]),n={};t&&ic(t)&&(n=this.lowercaseKeys(t));let a=iW(r);return Object.assign(Object.assign({},n),a)}mapCustomParametersToCustomData(e){let{custom:t}=e,r=aD(e,["custom"]);if(!(t&&ic(t)))return e;{let n=this.lowercaseKeys(t);return Object.assign(Object.assign({},r),{customData:Object.assign(Object.assign({},n),e.customData)})}}lowercaseKeys(e){let t=Object.keys(e),r={};return t.forEach(t=>{r[t.toLowerCase()]=e[t]}),r}validateParams(e,t){let{anonymizeIp:r}=e,n=aD(e,["anonymizeIp"]);return void 0!==r&&-1==["0","false","undefined","null","{}","[]",""].indexOf(`${r}`.toLowerCase())&&(n.anonymizeIp=1),(t==aY.view||t==aY.click||t==aY.search||t==aY.custom)&&(n.originLevel3=this.limit(n.originLevel3,128)),t==aY.view&&(n.location=this.limit(n.location,128)),("pageview"==t||"event"==t)&&(n.referrer=this.limit(n.referrer,2048),n.location=this.limit(n.location,2048),n.page=this.limit(n.page,2048)),n}ensureAnonymousUserWhenUsingApiKey(e){let{userId:t}=e,r=aD(e,["userId"]);return i5(this.options.token)&&!t?(r.userId="anonymous",r):e}setTrackingIdIfTrackingIdNotPresent(e){let{trackingId:t}=e,r=aD(e,["trackingId"]);return t?e:(r.hasOwnProperty("custom")&&ic(r.custom)&&(r.custom.hasOwnProperty("context_website")||r.custom.hasOwnProperty("siteName"))&&(r.trackingId=r.custom.context_website||r.custom.siteName),r.hasOwnProperty("customData")&&ic(r.customData)&&(r.customData.hasOwnProperty("context_website")||r.customData.hasOwnProperty("siteName"))&&(r.trackingId=r.customData.context_website||r.customData.siteName),r)}limit(e,t){return"string"!=typeof e?e:e.substring(0,t)}get baseUrl(){return function(e=i7.default,t="v15",r=!1){return(e=e.replace(/\/$/,""),r)?`${e}/${t}`:`${e}${e.endsWith("/rest")||e.endsWith("/rest/ua")?"":"/rest"}/${t}`}(this.options.endpoint,this.options.version,this.options.isCustomEndpoint)}};(i=i9||(i9={})).contextChanged="contextChanged",i.expandToFullUI="expandToFullUI",i.openUserActions="openUserActions",i.showPrecedingSessions="showPrecedingSessions",i.showFollowingSessions="showFollowingSessions",i.clickViewedDocument="clickViewedDocument",i.clickPageView="clickPageView",i.createArticle="createArticle",(o=f||(f={})).interfaceLoad="interfaceLoad",o.interfaceChange="interfaceChange",o.didyoumeanAutomatic="didyoumeanAutomatic",o.didyoumeanClick="didyoumeanClick",o.resultsSort="resultsSort",o.searchboxSubmit="searchboxSubmit",o.searchboxClear="searchboxClear",o.searchboxAsYouType="searchboxAsYouType",o.breadcrumbFacet="breadcrumbFacet",o.breadcrumbResetAll="breadcrumbResetAll",o.documentQuickview="documentQuickview",o.documentOpen="documentOpen",o.omniboxAnalytics="omniboxAnalytics",o.omniboxFromLink="omniboxFromLink",o.searchFromLink="searchFromLink",o.triggerNotify="notify",o.triggerExecute="execute",o.triggerQuery="query",o.undoTriggerQuery="undoQuery",o.triggerRedirect="redirect",o.pagerResize="pagerResize",o.pagerNumber="pagerNumber",o.pagerNext="pagerNext",o.pagerPrevious="pagerPrevious",o.pagerScrolling="pagerScrolling",o.staticFilterClearAll="staticFilterClearAll",o.staticFilterSelect="staticFilterSelect",o.staticFilterDeselect="staticFilterDeselect",o.facetClearAll="facetClearAll",o.facetSearch="facetSearch",o.facetSelect="facetSelect",o.facetSelectAll="facetSelectAll",o.facetDeselect="facetDeselect",o.facetExclude="facetExclude",o.facetUnexclude="facetUnexclude",o.facetUpdateSort="facetUpdateSort",o.facetShowMore="showMoreFacetResults",o.facetShowLess="showLessFacetResults",o.queryError="query",o.queryErrorBack="errorBack",o.queryErrorClear="errorClearQuery",o.queryErrorRetry="errorRetry",o.recommendation="recommendation",o.recommendationInterfaceLoad="recommendationInterfaceLoad",o.recommendationOpen="recommendationOpen",o.likeSmartSnippet="likeSmartSnippet",o.dislikeSmartSnippet="dislikeSmartSnippet",o.expandSmartSnippet="expandSmartSnippet",o.collapseSmartSnippet="collapseSmartSnippet",o.openSmartSnippetFeedbackModal="openSmartSnippetFeedbackModal",o.closeSmartSnippetFeedbackModal="closeSmartSnippetFeedbackModal",o.sendSmartSnippetReason="sendSmartSnippetReason",o.expandSmartSnippetSuggestion="expandSmartSnippetSuggestion",o.collapseSmartSnippetSuggestion="collapseSmartSnippetSuggestion",o.showMoreSmartSnippetSuggestion="showMoreSmartSnippetSuggestion",o.showLessSmartSnippetSuggestion="showLessSmartSnippetSuggestion",o.openSmartSnippetSource="openSmartSnippetSource",o.openSmartSnippetSuggestionSource="openSmartSnippetSuggestionSource",o.openSmartSnippetInlineLink="openSmartSnippetInlineLink",o.openSmartSnippetSuggestionInlineLink="openSmartSnippetSuggestionInlineLink",o.recentQueryClick="recentQueriesClick",o.clearRecentQueries="clearRecentQueries",o.recentResultClick="recentResultClick",o.clearRecentResults="clearRecentResults",o.noResultsBack="noResultsBack",o.showMoreFoldedResults="showMoreFoldedResults",o.showLessFoldedResults="showLessFoldedResults",o.copyToClipboard="copyToClipboard",o.caseSendEmail="Case.SendEmail",o.feedItemTextPost="FeedItem.TextPost",o.caseAttach="caseAttach",o.caseDetach="caseDetach",o.retryGeneratedAnswer="retryGeneratedAnswer",o.likeGeneratedAnswer="likeGeneratedAnswer",o.dislikeGeneratedAnswer="dislikeGeneratedAnswer",o.openGeneratedAnswerSource="openGeneratedAnswerSource",o.generatedAnswerStreamEnd="generatedAnswerStreamEnd",o.generatedAnswerSourceHover="generatedAnswerSourceHover",o.generatedAnswerCopyToClipboard="generatedAnswerCopyToClipboard",o.generatedAnswerHideAnswers="generatedAnswerHideAnswers",o.generatedAnswerShowAnswers="generatedAnswerShowAnswers",o.generatedAnswerFeedbackSubmit="generatedAnswerFeedbackSubmit",o.rephraseGeneratedAnswer="rephraseGeneratedAnswer";var ot={[f.triggerNotify]:"queryPipelineTriggers",[f.triggerExecute]:"queryPipelineTriggers",[f.triggerQuery]:"queryPipelineTriggers",[f.triggerRedirect]:"queryPipelineTriggers",[f.queryError]:"errors",[f.queryErrorBack]:"errors",[f.queryErrorClear]:"errors",[f.queryErrorRetry]:"errors",[f.pagerNext]:"getMoreResults",[f.pagerPrevious]:"getMoreResults",[f.pagerNumber]:"getMoreResults",[f.pagerResize]:"getMoreResults",[f.pagerScrolling]:"getMoreResults",[f.facetSearch]:"facet",[f.facetShowLess]:"facet",[f.facetShowMore]:"facet",[f.recommendation]:"recommendation",[f.likeSmartSnippet]:"smartSnippet",[f.dislikeSmartSnippet]:"smartSnippet",[f.expandSmartSnippet]:"smartSnippet",[f.collapseSmartSnippet]:"smartSnippet",[f.openSmartSnippetFeedbackModal]:"smartSnippet",[f.closeSmartSnippetFeedbackModal]:"smartSnippet",[f.sendSmartSnippetReason]:"smartSnippet",[f.expandSmartSnippetSuggestion]:"smartSnippetSuggestions",[f.collapseSmartSnippetSuggestion]:"smartSnippetSuggestions",[f.showMoreSmartSnippetSuggestion]:"smartSnippetSuggestions",[f.showLessSmartSnippetSuggestion]:"smartSnippetSuggestions",[f.clearRecentQueries]:"recentQueries",[f.recentResultClick]:"recentlyClickedDocuments",[f.clearRecentResults]:"recentlyClickedDocuments",[f.showLessFoldedResults]:"folding",[f.caseDetach]:"case",[f.likeGeneratedAnswer]:"generatedAnswer",[f.dislikeGeneratedAnswer]:"generatedAnswer",[f.openGeneratedAnswerSource]:"generatedAnswer",[f.generatedAnswerStreamEnd]:"generatedAnswer",[f.generatedAnswerSourceHover]:"generatedAnswer",[f.generatedAnswerCopyToClipboard]:"generatedAnswer",[f.generatedAnswerHideAnswers]:"generatedAnswer",[f.generatedAnswerShowAnswers]:"generatedAnswer",[f.generatedAnswerFeedbackSubmit]:"generatedAnswer",[i9.expandToFullUI]:"interface",[i9.openUserActions]:"User Actions",[i9.showPrecedingSessions]:"User Actions",[i9.showFollowingSessions]:"User Actions",[i9.clickViewedDocument]:"User Actions",[i9.clickPageView]:"User Actions",[i9.createArticle]:"createArticle"},or=class{constructor(){this.runtime=new i3,this.currentVisitorId=""}getPayload(){return Promise.resolve()}getParameters(){return Promise.resolve()}makeEvent(e){return Promise.resolve({eventType:e,payload:null,log:()=>Promise.resolve()})}sendEvent(){return Promise.resolve()}makeSearchEvent(){return this.makeEvent(aY.search)}sendSearchEvent(){return Promise.resolve()}makeClickEvent(){return this.makeEvent(aY.click)}sendClickEvent(){return Promise.resolve()}makeCustomEvent(){return this.makeEvent(aY.custom)}sendCustomEvent(){return Promise.resolve()}makeViewEvent(){return this.makeEvent(aY.view)}sendViewEvent(){return Promise.resolve()}getVisit(){return Promise.resolve({id:"",visitorId:""})}getHealth(){return Promise.resolve({status:""})}registerBeforeSendEventHook(){}registerAfterSendEventHook(){}addEventTypeMapping(){}get version(){return ir}},on=e=>{let t;return function e(t){let r=t.join(";");return r.length<=256?r:e(t.slice(1))}((t="",e.map(e=>e.replace(/;/g,"")).filter(e=>{let r=e!==t;return t=e,r})))};function oa(e){let t="string"==typeof e.partialQueries?e.partialQueries:on(e.partialQueries),r="string"==typeof e.suggestions?e.suggestions:on(e.suggestions);return Object.assign(Object.assign({},e),{partialQueries:t,suggestions:r})}var oi=class{constructor(e,t){this.opts=e,this.provider=t;let r=!1===e.enableAnalytics||i8();this.coveoAnalyticsClient=r?new or:new oe(e)}disable(){this.coveoAnalyticsClient instanceof oe&&this.coveoAnalyticsClient.clear(),this.coveoAnalyticsClient=new or}enable(){this.coveoAnalyticsClient=new oe(this.opts)}makeInterfaceLoad(){return this.makeSearchEvent(f.interfaceLoad)}logInterfaceLoad(){return aj(this,void 0,void 0,function*(){return(yield this.makeInterfaceLoad()).log({searchUID:this.provider.getSearchUID()})})}makeRecommendationInterfaceLoad(){return this.makeSearchEvent(f.recommendationInterfaceLoad)}logRecommendationInterfaceLoad(){return aj(this,void 0,void 0,function*(){return(yield this.makeRecommendationInterfaceLoad()).log({searchUID:this.provider.getSearchUID()})})}makeRecommendation(){return this.makeCustomEvent(f.recommendation)}logRecommendation(){return aj(this,void 0,void 0,function*(){return(yield this.makeRecommendation()).log({searchUID:this.provider.getSearchUID()})})}makeRecommendationOpen(e,t){return this.makeClickEvent(f.recommendationOpen,e,t)}logRecommendationOpen(e,t){return aj(this,void 0,void 0,function*(){return(yield this.makeRecommendationOpen(e,t)).log({searchUID:this.provider.getSearchUID()})})}makeStaticFilterClearAll(e){return this.makeSearchEvent(f.staticFilterClearAll,e)}logStaticFilterClearAll(e){return aj(this,void 0,void 0,function*(){return(yield this.makeStaticFilterClearAll(e)).log({searchUID:this.provider.getSearchUID()})})}makeStaticFilterSelect(e){return this.makeSearchEvent(f.staticFilterSelect,e)}logStaticFilterSelect(e){return aj(this,void 0,void 0,function*(){return(yield this.makeStaticFilterSelect(e)).log({searchUID:this.provider.getSearchUID()})})}makeStaticFilterDeselect(e){return this.makeSearchEvent(f.staticFilterDeselect,e)}logStaticFilterDeselect(e){return aj(this,void 0,void 0,function*(){return(yield this.makeStaticFilterDeselect(e)).log({searchUID:this.provider.getSearchUID()})})}makeFetchMoreResults(){return this.makeCustomEvent(f.pagerScrolling,{type:"getMoreResults"})}logFetchMoreResults(){return aj(this,void 0,void 0,function*(){return(yield this.makeFetchMoreResults()).log({searchUID:this.provider.getSearchUID()})})}makeInterfaceChange(e){return this.makeSearchEvent(f.interfaceChange,e)}logInterfaceChange(e){return aj(this,void 0,void 0,function*(){return(yield this.makeInterfaceChange(e)).log({searchUID:this.provider.getSearchUID()})})}makeDidYouMeanAutomatic(){return this.makeSearchEvent(f.didyoumeanAutomatic)}logDidYouMeanAutomatic(){return aj(this,void 0,void 0,function*(){return(yield this.makeDidYouMeanAutomatic()).log({searchUID:this.provider.getSearchUID()})})}makeDidYouMeanClick(){return this.makeSearchEvent(f.didyoumeanClick)}logDidYouMeanClick(){return aj(this,void 0,void 0,function*(){return(yield this.makeDidYouMeanClick()).log({searchUID:this.provider.getSearchUID()})})}makeResultsSort(e){return this.makeSearchEvent(f.resultsSort,e)}logResultsSort(e){return aj(this,void 0,void 0,function*(){return(yield this.makeResultsSort(e)).log({searchUID:this.provider.getSearchUID()})})}makeSearchboxSubmit(){return this.makeSearchEvent(f.searchboxSubmit)}logSearchboxSubmit(){return aj(this,void 0,void 0,function*(){return(yield this.makeSearchboxSubmit()).log({searchUID:this.provider.getSearchUID()})})}makeSearchboxClear(){return this.makeSearchEvent(f.searchboxClear)}logSearchboxClear(){return aj(this,void 0,void 0,function*(){return(yield this.makeSearchboxClear()).log({searchUID:this.provider.getSearchUID()})})}makeSearchboxAsYouType(){return this.makeSearchEvent(f.searchboxAsYouType)}logSearchboxAsYouType(){return aj(this,void 0,void 0,function*(){return(yield this.makeSearchboxAsYouType()).log({searchUID:this.provider.getSearchUID()})})}makeBreadcrumbFacet(e){return this.makeSearchEvent(f.breadcrumbFacet,e)}logBreadcrumbFacet(e){return aj(this,void 0,void 0,function*(){return(yield this.makeBreadcrumbFacet(e)).log({searchUID:this.provider.getSearchUID()})})}makeBreadcrumbResetAll(){return this.makeSearchEvent(f.breadcrumbResetAll)}logBreadcrumbResetAll(){return aj(this,void 0,void 0,function*(){return(yield this.makeBreadcrumbResetAll()).log({searchUID:this.provider.getSearchUID()})})}makeDocumentQuickview(e,t){return this.makeClickEvent(f.documentQuickview,e,t)}logDocumentQuickview(e,t){return aj(this,void 0,void 0,function*(){return(yield this.makeDocumentQuickview(e,t)).log({searchUID:this.provider.getSearchUID()})})}makeDocumentOpen(e,t){return this.makeClickEvent(f.documentOpen,e,t)}logDocumentOpen(e,t){return aj(this,void 0,void 0,function*(){return(yield this.makeDocumentOpen(e,t)).log({searchUID:this.provider.getSearchUID()})})}makeOmniboxAnalytics(e){return this.makeSearchEvent(f.omniboxAnalytics,oa(e))}logOmniboxAnalytics(e){return aj(this,void 0,void 0,function*(){return(yield this.makeOmniboxAnalytics(e)).log({searchUID:this.provider.getSearchUID()})})}makeOmniboxFromLink(e){return this.makeSearchEvent(f.omniboxFromLink,oa(e))}logOmniboxFromLink(e){return aj(this,void 0,void 0,function*(){return(yield this.makeOmniboxFromLink(e)).log({searchUID:this.provider.getSearchUID()})})}makeSearchFromLink(){return this.makeSearchEvent(f.searchFromLink)}logSearchFromLink(){return aj(this,void 0,void 0,function*(){return(yield this.makeSearchFromLink()).log({searchUID:this.provider.getSearchUID()})})}makeTriggerNotify(e){return this.makeCustomEvent(f.triggerNotify,e)}logTriggerNotify(e){return aj(this,void 0,void 0,function*(){return(yield this.makeTriggerNotify(e)).log({searchUID:this.provider.getSearchUID()})})}makeTriggerExecute(e){return this.makeCustomEvent(f.triggerExecute,e)}logTriggerExecute(e){return aj(this,void 0,void 0,function*(){return(yield this.makeTriggerExecute(e)).log({searchUID:this.provider.getSearchUID()})})}makeTriggerQuery(){return this.makeCustomEvent(f.triggerQuery,{query:this.provider.getSearchEventRequestPayload().queryText},"queryPipelineTriggers")}logTriggerQuery(){return aj(this,void 0,void 0,function*(){return(yield this.makeTriggerQuery()).log({searchUID:this.provider.getSearchUID()})})}makeUndoTriggerQuery(e){return this.makeSearchEvent(f.undoTriggerQuery,e)}logUndoTriggerQuery(e){return aj(this,void 0,void 0,function*(){return(yield this.makeUndoTriggerQuery(e)).log({searchUID:this.provider.getSearchUID()})})}makeTriggerRedirect(e){return this.makeCustomEvent(f.triggerRedirect,Object.assign(Object.assign({},e),{query:this.provider.getSearchEventRequestPayload().queryText}))}logTriggerRedirect(e){return aj(this,void 0,void 0,function*(){return(yield this.makeTriggerRedirect(e)).log({searchUID:this.provider.getSearchUID()})})}makePagerResize(e){return this.makeCustomEvent(f.pagerResize,e)}logPagerResize(e){return aj(this,void 0,void 0,function*(){return(yield this.makePagerResize(e)).log({searchUID:this.provider.getSearchUID()})})}makePagerNumber(e){return this.makeCustomEvent(f.pagerNumber,e)}logPagerNumber(e){return aj(this,void 0,void 0,function*(){return(yield this.makePagerNumber(e)).log({searchUID:this.provider.getSearchUID()})})}makePagerNext(e){return this.makeCustomEvent(f.pagerNext,e)}logPagerNext(e){return aj(this,void 0,void 0,function*(){return(yield this.makePagerNext(e)).log({searchUID:this.provider.getSearchUID()})})}makePagerPrevious(e){return this.makeCustomEvent(f.pagerPrevious,e)}logPagerPrevious(e){return aj(this,void 0,void 0,function*(){return(yield this.makePagerPrevious(e)).log({searchUID:this.provider.getSearchUID()})})}makePagerScrolling(){return this.makeCustomEvent(f.pagerScrolling)}logPagerScrolling(){return aj(this,void 0,void 0,function*(){return(yield this.makePagerScrolling()).log({searchUID:this.provider.getSearchUID()})})}makeFacetClearAll(e){return this.makeSearchEvent(f.facetClearAll,e)}logFacetClearAll(e){return aj(this,void 0,void 0,function*(){return(yield this.makeFacetClearAll(e)).log({searchUID:this.provider.getSearchUID()})})}makeFacetSearch(e){return this.makeSearchEvent(f.facetSearch,e)}logFacetSearch(e){return aj(this,void 0,void 0,function*(){return(yield this.makeFacetSearch(e)).log({searchUID:this.provider.getSearchUID()})})}makeFacetSelect(e){return this.makeSearchEvent(f.facetSelect,e)}logFacetSelect(e){return aj(this,void 0,void 0,function*(){return(yield this.makeFacetSelect(e)).log({searchUID:this.provider.getSearchUID()})})}makeFacetDeselect(e){return this.makeSearchEvent(f.facetDeselect,e)}logFacetDeselect(e){return aj(this,void 0,void 0,function*(){return(yield this.makeFacetDeselect(e)).log({searchUID:this.provider.getSearchUID()})})}makeFacetExclude(e){return this.makeSearchEvent(f.facetExclude,e)}logFacetExclude(e){return aj(this,void 0,void 0,function*(){return(yield this.makeFacetExclude(e)).log({searchUID:this.provider.getSearchUID()})})}makeFacetUnexclude(e){return this.makeSearchEvent(f.facetUnexclude,e)}logFacetUnexclude(e){return aj(this,void 0,void 0,function*(){return(yield this.makeFacetUnexclude(e)).log({searchUID:this.provider.getSearchUID()})})}makeFacetSelectAll(e){return this.makeSearchEvent(f.facetSelectAll,e)}logFacetSelectAll(e){return aj(this,void 0,void 0,function*(){return(yield this.makeFacetSelectAll(e)).log({searchUID:this.provider.getSearchUID()})})}makeFacetUpdateSort(e){return this.makeSearchEvent(f.facetUpdateSort,e)}logFacetUpdateSort(e){return aj(this,void 0,void 0,function*(){return(yield this.makeFacetUpdateSort(e)).log({searchUID:this.provider.getSearchUID()})})}makeFacetShowMore(e){return this.makeCustomEvent(f.facetShowMore,e)}logFacetShowMore(e){return aj(this,void 0,void 0,function*(){return(yield this.makeFacetShowMore(e)).log({searchUID:this.provider.getSearchUID()})})}makeFacetShowLess(e){return this.makeCustomEvent(f.facetShowLess,e)}logFacetShowLess(e){return aj(this,void 0,void 0,function*(){return(yield this.makeFacetShowLess(e)).log({searchUID:this.provider.getSearchUID()})})}makeQueryError(e){return this.makeCustomEvent(f.queryError,e)}logQueryError(e){return aj(this,void 0,void 0,function*(){return(yield this.makeQueryError(e)).log({searchUID:this.provider.getSearchUID()})})}makeQueryErrorBack(){return aj(this,void 0,void 0,function*(){let e=yield this.makeCustomEvent(f.queryErrorBack);return{description:e.description,log:()=>aj(this,void 0,void 0,function*(){return yield e.log({searchUID:this.provider.getSearchUID()}),this.logSearchEvent(f.queryErrorBack)})}})}logQueryErrorBack(){return aj(this,void 0,void 0,function*(){return(yield this.makeQueryErrorBack()).log({searchUID:this.provider.getSearchUID()})})}makeQueryErrorRetry(){return aj(this,void 0,void 0,function*(){let e=yield this.makeCustomEvent(f.queryErrorRetry);return{description:e.description,log:()=>aj(this,void 0,void 0,function*(){return yield e.log({searchUID:this.provider.getSearchUID()}),this.logSearchEvent(f.queryErrorRetry)})}})}logQueryErrorRetry(){return aj(this,void 0,void 0,function*(){return(yield this.makeQueryErrorRetry()).log({searchUID:this.provider.getSearchUID()})})}makeQueryErrorClear(){return aj(this,void 0,void 0,function*(){let e=yield this.makeCustomEvent(f.queryErrorClear);return{description:e.description,log:()=>aj(this,void 0,void 0,function*(){return yield e.log({searchUID:this.provider.getSearchUID()}),this.logSearchEvent(f.queryErrorClear)})}})}logQueryErrorClear(){return aj(this,void 0,void 0,function*(){return(yield this.makeQueryErrorClear()).log({searchUID:this.provider.getSearchUID()})})}makeLikeSmartSnippet(){return this.makeCustomEvent(f.likeSmartSnippet)}logLikeSmartSnippet(){return aj(this,void 0,void 0,function*(){return(yield this.makeLikeSmartSnippet()).log({searchUID:this.provider.getSearchUID()})})}makeDislikeSmartSnippet(){return this.makeCustomEvent(f.dislikeSmartSnippet)}logDislikeSmartSnippet(){return aj(this,void 0,void 0,function*(){return(yield this.makeDislikeSmartSnippet()).log({searchUID:this.provider.getSearchUID()})})}makeExpandSmartSnippet(){return this.makeCustomEvent(f.expandSmartSnippet)}logExpandSmartSnippet(){return aj(this,void 0,void 0,function*(){return(yield this.makeExpandSmartSnippet()).log({searchUID:this.provider.getSearchUID()})})}makeCollapseSmartSnippet(){return this.makeCustomEvent(f.collapseSmartSnippet)}logCollapseSmartSnippet(){return aj(this,void 0,void 0,function*(){return(yield this.makeCollapseSmartSnippet()).log({searchUID:this.provider.getSearchUID()})})}makeOpenSmartSnippetFeedbackModal(){return this.makeCustomEvent(f.openSmartSnippetFeedbackModal)}logOpenSmartSnippetFeedbackModal(){return aj(this,void 0,void 0,function*(){return(yield this.makeOpenSmartSnippetFeedbackModal()).log({searchUID:this.provider.getSearchUID()})})}makeCloseSmartSnippetFeedbackModal(){return this.makeCustomEvent(f.closeSmartSnippetFeedbackModal)}logCloseSmartSnippetFeedbackModal(){return aj(this,void 0,void 0,function*(){return(yield this.makeCloseSmartSnippetFeedbackModal()).log({searchUID:this.provider.getSearchUID()})})}makeSmartSnippetFeedbackReason(e,t){return this.makeCustomEvent(f.sendSmartSnippetReason,{reason:e,details:t})}logSmartSnippetFeedbackReason(e,t){return aj(this,void 0,void 0,function*(){return(yield this.makeSmartSnippetFeedbackReason(e,t)).log({searchUID:this.provider.getSearchUID()})})}makeExpandSmartSnippetSuggestion(e){return this.makeCustomEvent(f.expandSmartSnippetSuggestion,"documentId"in e?e:{documentId:e})}logExpandSmartSnippetSuggestion(e){return aj(this,void 0,void 0,function*(){return(yield this.makeExpandSmartSnippetSuggestion(e)).log({searchUID:this.provider.getSearchUID()})})}makeCollapseSmartSnippetSuggestion(e){return this.makeCustomEvent(f.collapseSmartSnippetSuggestion,"documentId"in e?e:{documentId:e})}logCollapseSmartSnippetSuggestion(e){return aj(this,void 0,void 0,function*(){return(yield this.makeCollapseSmartSnippetSuggestion(e)).log({searchUID:this.provider.getSearchUID()})})}makeShowMoreSmartSnippetSuggestion(e){return this.makeCustomEvent(f.showMoreSmartSnippetSuggestion,e)}logShowMoreSmartSnippetSuggestion(e){return aj(this,void 0,void 0,function*(){return(yield this.makeShowMoreSmartSnippetSuggestion(e)).log({searchUID:this.provider.getSearchUID()})})}makeShowLessSmartSnippetSuggestion(e){return this.makeCustomEvent(f.showLessSmartSnippetSuggestion,e)}logShowLessSmartSnippetSuggestion(e){return aj(this,void 0,void 0,function*(){return(yield this.makeShowLessSmartSnippetSuggestion(e)).log({searchUID:this.provider.getSearchUID()})})}makeOpenSmartSnippetSource(e,t){return this.makeClickEvent(f.openSmartSnippetSource,e,t)}logOpenSmartSnippetSource(e,t){return aj(this,void 0,void 0,function*(){return(yield this.makeOpenSmartSnippetSource(e,t)).log({searchUID:this.provider.getSearchUID()})})}makeOpenSmartSnippetSuggestionSource(e,t){return this.makeClickEvent(f.openSmartSnippetSuggestionSource,e,{contentIDKey:t.documentId.contentIdKey,contentIDValue:t.documentId.contentIdValue},t)}makeCopyToClipboard(e,t){return this.makeClickEvent(f.copyToClipboard,e,t)}logCopyToClipboard(e,t){return aj(this,void 0,void 0,function*(){return(yield this.makeCopyToClipboard(e,t)).log({searchUID:this.provider.getSearchUID()})})}logOpenSmartSnippetSuggestionSource(e,t){return aj(this,void 0,void 0,function*(){return(yield this.makeOpenSmartSnippetSuggestionSource(e,t)).log({searchUID:this.provider.getSearchUID()})})}makeOpenSmartSnippetInlineLink(e,t){return this.makeClickEvent(f.openSmartSnippetInlineLink,e,{contentIDKey:t.contentIDKey,contentIDValue:t.contentIDValue},t)}logOpenSmartSnippetInlineLink(e,t){return aj(this,void 0,void 0,function*(){return(yield this.makeOpenSmartSnippetInlineLink(e,t)).log({searchUID:this.provider.getSearchUID()})})}makeOpenSmartSnippetSuggestionInlineLink(e,t){return this.makeClickEvent(f.openSmartSnippetSuggestionInlineLink,e,{contentIDKey:t.documentId.contentIdKey,contentIDValue:t.documentId.contentIdValue},t)}logOpenSmartSnippetSuggestionInlineLink(e,t){return aj(this,void 0,void 0,function*(){return(yield this.makeOpenSmartSnippetSuggestionInlineLink(e,t)).log({searchUID:this.provider.getSearchUID()})})}makeRecentQueryClick(){return this.makeSearchEvent(f.recentQueryClick)}logRecentQueryClick(){return aj(this,void 0,void 0,function*(){return(yield this.makeRecentQueryClick()).log({searchUID:this.provider.getSearchUID()})})}makeClearRecentQueries(){return this.makeCustomEvent(f.clearRecentQueries)}logClearRecentQueries(){return aj(this,void 0,void 0,function*(){return(yield this.makeClearRecentQueries()).log({searchUID:this.provider.getSearchUID()})})}makeRecentResultClick(e,t){return this.makeCustomEvent(f.recentResultClick,{info:e,identifier:t})}logRecentResultClick(e,t){return aj(this,void 0,void 0,function*(){return(yield this.makeRecentResultClick(e,t)).log({searchUID:this.provider.getSearchUID()})})}makeClearRecentResults(){return this.makeCustomEvent(f.clearRecentResults)}logClearRecentResults(){return aj(this,void 0,void 0,function*(){return(yield this.makeClearRecentResults()).log({searchUID:this.provider.getSearchUID()})})}makeNoResultsBack(){return this.makeSearchEvent(f.noResultsBack)}logNoResultsBack(){return aj(this,void 0,void 0,function*(){return(yield this.makeNoResultsBack()).log({searchUID:this.provider.getSearchUID()})})}makeShowMoreFoldedResults(e,t){return this.makeClickEvent(f.showMoreFoldedResults,e,t)}logShowMoreFoldedResults(e,t){return aj(this,void 0,void 0,function*(){return(yield this.makeShowMoreFoldedResults(e,t)).log({searchUID:this.provider.getSearchUID()})})}makeShowLessFoldedResults(){return this.makeCustomEvent(f.showLessFoldedResults)}logShowLessFoldedResults(){return aj(this,void 0,void 0,function*(){return(yield this.makeShowLessFoldedResults()).log({searchUID:this.provider.getSearchUID()})})}makeEventDescription(e,t){var r;return{actionCause:t,customData:null===(r=e.payload)||void 0===r?void 0:r.customData}}makeCustomEvent(e,t,r=ot[e]){return aj(this,void 0,void 0,function*(){this.coveoAnalyticsClient.getParameters;let n=Object.assign(Object.assign({},this.provider.getBaseMetadata()),t),a=Object.assign(Object.assign({},(yield this.getBaseEventRequest(n))),{eventType:r,eventValue:e}),i=yield this.coveoAnalyticsClient.makeCustomEvent(a);return{description:this.makeEventDescription(i,e),log:({searchUID:e})=>i.log({lastSearchQueryUid:e})}})}logCustomEvent(e,t,r=ot[e]){return aj(this,void 0,void 0,function*(){return(yield this.makeCustomEvent(e,t,r)).log({searchUID:this.provider.getSearchUID()})})}makeCustomEventWithType(e,t,r){return aj(this,void 0,void 0,function*(){let n=Object.assign(Object.assign({},this.provider.getBaseMetadata()),r),a=Object.assign(Object.assign({},(yield this.getBaseEventRequest(n))),{eventType:t,eventValue:e}),i=yield this.coveoAnalyticsClient.makeCustomEvent(a);return{description:this.makeEventDescription(i,e),log:({searchUID:e})=>i.log({lastSearchQueryUid:e})}})}logCustomEventWithType(e,t,r){return aj(this,void 0,void 0,function*(){return(yield this.makeCustomEventWithType(e,t,r)).log({searchUID:this.provider.getSearchUID()})})}logSearchEvent(e,t){return aj(this,void 0,void 0,function*(){return(yield this.makeSearchEvent(e,t)).log({searchUID:this.provider.getSearchUID()})})}makeSearchEvent(e,t){return aj(this,void 0,void 0,function*(){let r=yield this.getBaseSearchEventRequest(e,t),n=yield this.coveoAnalyticsClient.makeSearchEvent(r);return{description:this.makeEventDescription(n,e),log:({searchUID:e})=>n.log({searchQueryUid:e})}})}makeClickEvent(e,t,r,n){return aj(this,void 0,void 0,function*(){let a=Object.assign(Object.assign(Object.assign({},t),(yield this.getBaseEventRequest(Object.assign(Object.assign({},r),n)))),{queryPipeline:this.provider.getPipeline(),actionCause:e}),i=yield this.coveoAnalyticsClient.makeClickEvent(a);return{description:this.makeEventDescription(i,e),log:({searchUID:e})=>i.log({searchQueryUid:e})}})}logClickEvent(e,t,r,n){return aj(this,void 0,void 0,function*(){return(yield this.makeClickEvent(e,t,r,n)).log({searchUID:this.provider.getSearchUID()})})}getBaseSearchEventRequest(e,t){var r,n;return aj(this,void 0,void 0,function*(){return Object.assign(Object.assign(Object.assign({},(yield this.getBaseEventRequest(Object.assign(Object.assign({},t),null===(n=(r=this.provider).getGeneratedAnswerMetadata)||void 0===n?void 0:n.call(r))))),this.provider.getSearchEventRequestPayload()),{queryPipeline:this.provider.getPipeline(),actionCause:e})})}getBaseEventRequest(e){return aj(this,void 0,void 0,function*(){let t=Object.assign(Object.assign({},this.provider.getBaseMetadata()),e);return Object.assign(Object.assign(Object.assign({},this.getOrigins()),this.getSplitTestRun()),{customData:t,language:this.provider.getLanguage(),facetState:this.provider.getFacetState?this.provider.getFacetState():[],anonymous:this.provider.getIsAnonymous(),clientId:yield this.getClientId()})})}getOrigins(){var e,t;return{originContext:null===(t=(e=this.provider).getOriginContext)||void 0===t?void 0:t.call(e),originLevel1:this.provider.getOriginLevel1(),originLevel2:this.provider.getOriginLevel2(),originLevel3:this.provider.getOriginLevel3()}}getClientId(){return this.coveoAnalyticsClient instanceof oe?this.coveoAnalyticsClient.getCurrentVisitorId():void 0}getSplitTestRun(){let e=this.provider.getSplitTestRunName?this.provider.getSplitTestRunName():"",t=this.provider.getSplitTestRunVersion?this.provider.getSplitTestRunVersion():"";return Object.assign(Object.assign({},e&&{splitTestRunName:e}),t&&{splitTestRunVersion:t})}makeLikeGeneratedAnswer(e){return this.makeCustomEvent(f.likeGeneratedAnswer,e)}logLikeGeneratedAnswer(e){return aj(this,void 0,void 0,function*(){return(yield this.makeLikeGeneratedAnswer(e)).log({searchUID:this.provider.getSearchUID()})})}makeDislikeGeneratedAnswer(e){return this.makeCustomEvent(f.dislikeGeneratedAnswer,e)}logDislikeGeneratedAnswer(e){return aj(this,void 0,void 0,function*(){return(yield this.makeDislikeGeneratedAnswer(e)).log({searchUID:this.provider.getSearchUID()})})}makeOpenGeneratedAnswerSource(e){return this.makeCustomEvent(f.openGeneratedAnswerSource,e)}logOpenGeneratedAnswerSource(e){return aj(this,void 0,void 0,function*(){return(yield this.makeOpenGeneratedAnswerSource(e)).log({searchUID:this.provider.getSearchUID()})})}makeGeneratedAnswerSourceHover(e){return this.makeCustomEvent(f.generatedAnswerSourceHover,e)}logGeneratedAnswerSourceHover(e){return aj(this,void 0,void 0,function*(){return(yield this.makeGeneratedAnswerSourceHover(e)).log({searchUID:this.provider.getSearchUID()})})}makeGeneratedAnswerCopyToClipboard(e){return this.makeCustomEvent(f.generatedAnswerCopyToClipboard,e)}logGeneratedAnswerCopyToClipboard(e){return aj(this,void 0,void 0,function*(){return(yield this.makeGeneratedAnswerCopyToClipboard(e)).log({searchUID:this.provider.getSearchUID()})})}makeGeneratedAnswerHideAnswers(e){return this.makeCustomEvent(f.generatedAnswerHideAnswers,e)}logGeneratedAnswerHideAnswers(e){return aj(this,void 0,void 0,function*(){return(yield this.makeGeneratedAnswerHideAnswers(e)).log({searchUID:this.provider.getSearchUID()})})}makeGeneratedAnswerShowAnswers(e){return this.makeCustomEvent(f.generatedAnswerShowAnswers,e)}logGeneratedAnswerShowAnswers(e){return aj(this,void 0,void 0,function*(){return(yield this.makeGeneratedAnswerShowAnswers(e)).log({searchUID:this.provider.getSearchUID()})})}makeGeneratedAnswerFeedbackSubmit(e){return this.makeCustomEvent(f.generatedAnswerFeedbackSubmit,e)}logGeneratedAnswerFeedbackSubmit(e){return aj(this,void 0,void 0,function*(){return(yield this.makeGeneratedAnswerFeedbackSubmit(e)).log({searchUID:this.provider.getSearchUID()})})}makeRephraseGeneratedAnswer(e){return this.makeSearchEvent(f.rephraseGeneratedAnswer,e)}logRephraseGeneratedAnswer(e){return aj(this,void 0,void 0,function*(){return(yield this.makeRephraseGeneratedAnswer(e)).log({searchUID:this.provider.getSearchUID()})})}makeRetryGeneratedAnswer(){return this.makeSearchEvent(f.retryGeneratedAnswer)}logRetryGeneratedAnswer(){return aj(this,void 0,void 0,function*(){return(yield this.makeRetryGeneratedAnswer()).log({searchUID:this.provider.getSearchUID()})})}makeGeneratedAnswerStreamEnd(e){return this.makeCustomEvent(f.generatedAnswerStreamEnd,e)}logGeneratedAnswerStreamEnd(e){return aj(this,void 0,void 0,function*(){return(yield this.makeGeneratedAnswerStreamEnd(e)).log({searchUID:this.provider.getSearchUID()})})}},oo=Object.assign({},ii),os=Object.keys(oo).map(e=>oo[e]),ol=class extends is{constructor({client:e,uuidGenerator:t=a7}){super({client:e,uuidGenerator:t}),this.ticket={}}getApi(e){let t=super.getApi(e);return null!==t?t:"setTicket"===e?this.setTicket:null}addHooks(){this.addHooksForEvent(),this.addHooksForPageView(),this.addHooksForSVCEvents()}setTicket(e){this.ticket=e}clearPluginData(){this.ticket={}}addHooksForSVCEvents(){this.client.registerBeforeSendEventHook((e,...[t])=>-1!==os.indexOf(e)?this.addSVCDataToPayload(e,t):t),this.client.registerAfterSendEventHook((e,...[t])=>(-1!==os.indexOf(e)&&this.updateLocationInformation(e,t),t))}addHooksForPageView(){this.client.addEventTypeMapping(oo.pageview,{newEventType:aY.collect,variableLengthArgumentsNames:["page"],addVisitorIdParameter:!0,usesMeasurementProtocol:!0})}addHooksForEvent(){this.client.addEventTypeMapping(oo.event,{newEventType:aY.collect,variableLengthArgumentsNames:["eventCategory","eventAction","eventLabel","eventValue"],addVisitorIdParameter:!0,usesMeasurementProtocol:!0})}addSVCDataToPayload(e,t){var r;let n=Object.assign(Object.assign(Object.assign(Object.assign({},this.getLocationInformation(e,t)),this.getDefaultContextInformation(e)),this.action?{svcAction:this.action}:{}),Object.keys(null!==(r=this.actionData)&&void 0!==r?r:{}).length>0?{svcActionData:this.actionData}:{}),a=this.getTicketPayload();return this.clearData(),Object.assign(Object.assign(Object.assign({},a),n),t)}getTicketPayload(){return ih(this.ticket)}};ol.Id="svc",(s=p||(p={})).click="click",s.flowStart="flowStart",(l=h||(h={})).enterInterface="ticket_create_start",l.fieldUpdate="ticket_field_update",l.fieldSuggestionClick="ticket_classification_click",l.suggestionClick="suggestion_click",l.suggestionRate="suggestion_rate",l.nextCaseStep="ticket_next_stage",l.caseCancelled="ticket_cancel",l.caseSolved="ticket_cancel",l.caseCreated="ticket_create",(u=g||(g={})).quit="Quit",u.solved="Solved";var ou=class{constructor(e,t){var r;this.options=e,this.provider=t;let n=(null===(r=e.enableAnalytics)||void 0===r||r)&&!i8();this.coveoAnalyticsClient=n?new oe(e):new or,this.svc=new ol({client:this.coveoAnalyticsClient})}disable(){this.coveoAnalyticsClient instanceof oe&&this.coveoAnalyticsClient.clear(),this.coveoAnalyticsClient=new or,this.svc=new ol({client:this.coveoAnalyticsClient})}enable(){this.coveoAnalyticsClient=new oe(this.options),this.svc=new ol({client:this.coveoAnalyticsClient})}logEnterInterface(e){return this.svc.setAction(h.enterInterface),this.svc.setTicket(e.ticket),this.sendFlowStartEvent()}logUpdateCaseField(e){return this.svc.setAction(h.fieldUpdate,{fieldName:e.fieldName}),this.svc.setTicket(e.ticket),this.sendClickEvent()}logSelectFieldSuggestion(e){return this.svc.setAction(h.fieldSuggestionClick,e.suggestion),this.svc.setTicket(e.ticket),this.sendClickEvent()}logSelectDocumentSuggestion(e){return this.svc.setAction(h.suggestionClick,e.suggestion),this.svc.setTicket(e.ticket),this.sendClickEvent()}logRateDocumentSuggestion(e){return this.svc.setAction(h.suggestionRate,Object.assign({rate:e.rating},e.suggestion)),this.svc.setTicket(e.ticket),this.sendClickEvent()}logMoveToNextCaseStep(e){return this.svc.setAction(h.nextCaseStep,{stage:null==e?void 0:e.stage}),this.svc.setTicket(e.ticket),this.sendClickEvent()}logCaseCancelled(e){return this.svc.setAction(h.caseCancelled,{reason:g.quit}),this.svc.setTicket(e.ticket),this.sendClickEvent()}logCaseSolved(e){return this.svc.setAction(h.caseSolved,{reason:g.solved}),this.svc.setTicket(e.ticket),this.sendClickEvent()}logCaseCreated(e){return this.svc.setAction(h.caseCreated),this.svc.setTicket(e.ticket),this.sendClickEvent()}sendFlowStartEvent(){return this.coveoAnalyticsClient.sendEvent("event","svc",p.flowStart,this.provider?{searchHub:this.provider.getOriginLevel1()}:null)}sendClickEvent(){return this.coveoAnalyticsClient.sendEvent("event","svc",p.click,this.provider?{searchHub:this.provider.getOriginLevel1()}:null)}},oc=e=>{let t={};return e.caseContext&&Object.keys(e.caseContext).forEach(r=>{var n;let a=null===(n=e.caseContext)||void 0===n?void 0:n[r];a&&(t[`context_${r}`]=a)}),t},od=(e,t=!0)=>{let{caseContext:r,caseId:n,caseNumber:a}=e,i=aD(e,["caseContext","caseId","caseNumber"]),o=oc(e);return Object.assign(Object.assign(Object.assign({CaseId:n,CaseNumber:a},i),!!o.context_Case_Subject&&{CaseSubject:o.context_Case_Subject}),t&&o)},of=class{constructor(e,t){this.opts=e,this.provider=t;let r=!1===e.enableAnalytics||i8();this.coveoAnalyticsClient=r?new or:new oe(e)}disable(){this.coveoAnalyticsClient instanceof oe&&this.coveoAnalyticsClient.clear(),this.coveoAnalyticsClient=new or}enable(){this.coveoAnalyticsClient=new oe(this.opts)}logInterfaceLoad(e){if(e){let t=od(e);return this.logSearchEvent(f.interfaceLoad,t)}return this.logSearchEvent(f.interfaceLoad)}logInterfaceChange(e){let t=od(e);return this.logSearchEvent(f.interfaceChange,t)}logStaticFilterDeselect(e){let t=od(e);return this.logSearchEvent(f.staticFilterDeselect,t)}logFetchMoreResults(e){if(e){let t=od(e);return this.logCustomEvent(f.pagerScrolling,Object.assign(Object.assign({},t),{type:"getMoreResults"}))}return this.logCustomEvent(f.pagerScrolling,{type:"getMoreResults"})}logBreadcrumbFacet(e){let t=od(e);return this.logSearchEvent(f.breadcrumbFacet,t)}logBreadcrumbResetAll(e){if(e){let t=od(e);return this.logSearchEvent(f.breadcrumbResetAll,t)}return this.logSearchEvent(f.breadcrumbResetAll)}logFacetSelect(e){let t=od(e);return this.logSearchEvent(f.facetSelect,t)}logFacetExclude(e){let t=od(e);return this.logSearchEvent(f.facetExclude,t)}logFacetDeselect(e){let t=od(e);return this.logSearchEvent(f.facetDeselect,t)}logFacetUpdateSort(e){let t=od(e);return this.logSearchEvent(f.facetUpdateSort,t)}logFacetClearAll(e){let t=od(e);return this.logSearchEvent(f.facetClearAll,t)}logFacetShowMore(e){let t=od(e,!1);return this.logCustomEvent(f.facetShowMore,t)}logFacetShowLess(e){let t=od(e,!1);return this.logCustomEvent(f.facetShowLess,t)}logQueryError(e){let t=od(e,!1);return this.logCustomEvent(f.queryError,t)}logPagerNumber(e){let t=od(e,!1);return this.logCustomEvent(f.pagerNumber,t)}logPagerNext(e){let t=od(e,!1);return this.logCustomEvent(f.pagerNext,t)}logPagerPrevious(e){let t=od(e,!1);return this.logCustomEvent(f.pagerPrevious,t)}logDidYouMeanAutomatic(e){if(e){let t=od(e);return this.logSearchEvent(f.didyoumeanAutomatic,t)}return this.logSearchEvent(f.didyoumeanAutomatic)}logDidYouMeanClick(e){if(e){let t=od(e);return this.logSearchEvent(f.didyoumeanClick,t)}return this.logSearchEvent(f.didyoumeanClick)}logResultsSort(e){let t=od(e);return this.logSearchEvent(f.resultsSort,t)}logSearchboxSubmit(e){if(e){let t=od(e);return this.logSearchEvent(f.searchboxSubmit,t)}return this.logSearchEvent(f.searchboxSubmit)}logContextChanged(e){let t=od(e);return this.logSearchEvent(i9.contextChanged,t)}logExpandToFullUI(e){let t=od(e);return this.logCustomEvent(i9.expandToFullUI,t)}logOpenUserActions(e){let t=od(e,!1);return this.logCustomEvent(i9.openUserActions,t)}logShowPrecedingSessions(e){let t=od(e,!1);return this.logCustomEvent(i9.showPrecedingSessions,t)}logShowFollowingSessions(e){let t=od(e,!1);return this.logCustomEvent(i9.showFollowingSessions,t)}logViewedDocumentClick(e,t){return this.logCustomEvent(i9.clickViewedDocument,Object.assign(Object.assign({},od(t,!1)),{document:e}))}logPageViewClick(e,t){return this.logCustomEvent(i9.clickPageView,Object.assign(Object.assign({},od(t,!1)),{pageView:e}))}logCreateArticle(e,t){return this.logCustomEvent(i9.createArticle,t?Object.assign(Object.assign({},od(t,!1)),e):e)}logDocumentOpen(e,t,r){return this.logClickEvent(f.documentOpen,e,t,r?od(r,!1):void 0)}logCopyToClipboard(e,t,r){return this.logClickEvent(f.copyToClipboard,e,t,r?od(r,!1):void 0)}logCaseSendEmail(e,t,r){return this.logClickEvent(f.caseSendEmail,e,t,r?od(r,!1):void 0)}logFeedItemTextPost(e,t,r){return this.logClickEvent(f.feedItemTextPost,e,t,r?od(r,!1):void 0)}logDocumentQuickview(e,t,r){let n={documentTitle:e.documentTitle,documentURL:e.documentUrl};return this.logClickEvent(f.documentQuickview,e,t,r?Object.assign(Object.assign({},od(r,!1)),n):n)}logCaseAttach(e,t,r){let n={documentTitle:e.documentTitle,documentURL:e.documentUrl,resultUriHash:e.documentUriHash};return this.logClickEvent(f.caseAttach,e,t,r?Object.assign(Object.assign({},od(r,!1)),n):n)}logCaseDetach(e,t){return this.logCustomEvent(f.caseDetach,t?Object.assign(Object.assign({},od(t,!1)),{resultUriHash:e}):{resultUriHash:e})}logLikeSmartSnippet(e){return this.logCustomEvent(f.likeSmartSnippet,e?od(e,!1):void 0)}logDislikeSmartSnippet(e){return this.logCustomEvent(f.dislikeSmartSnippet,e?od(e,!1):void 0)}logExpandSmartSnippet(e){return this.logCustomEvent(f.expandSmartSnippet,e?od(e,!1):void 0)}logCollapseSmartSnippet(e){return this.logCustomEvent(f.collapseSmartSnippet,e?od(e,!1):void 0)}logOpenSmartSnippetFeedbackModal(e){return this.logCustomEvent(f.openSmartSnippetFeedbackModal,e?od(e,!1):void 0)}logCloseSmartSnippetFeedbackModal(e){return this.logCustomEvent(f.closeSmartSnippetFeedbackModal,e?od(e,!1):void 0)}logSmartSnippetFeedbackReason(e,t,r){return this.logCustomEvent(f.sendSmartSnippetReason,r?Object.assign(Object.assign({},od(r,!1)),{reason:e,details:t}):{reason:e,details:t})}logExpandSmartSnippetSuggestion(e,t){let r="documentId"in e?e:{documentId:e};return this.logCustomEvent(f.expandSmartSnippetSuggestion,t?Object.assign(Object.assign({},od(t,!1)),r):r)}logCollapseSmartSnippetSuggestion(e,t){let r="documentId"in e?e:{documentId:e};return this.logCustomEvent(f.collapseSmartSnippetSuggestion,t?Object.assign(Object.assign({},od(t,!1)),r):r)}logOpenSmartSnippetSource(e,t,r){return this.logClickEvent(f.openSmartSnippetSource,e,t,r?od(r,!1):void 0)}logOpenSmartSnippetSuggestionSource(e,t,r){return this.logClickEvent(f.openSmartSnippetSuggestionSource,e,{contentIDKey:t.documentId.contentIdKey,contentIDValue:t.documentId.contentIdValue},r?Object.assign(Object.assign({},od(r,!1)),t):t)}logOpenSmartSnippetInlineLink(e,t,r){return this.logClickEvent(f.openSmartSnippetInlineLink,e,{contentIDKey:t.contentIDKey,contentIDValue:t.contentIDValue},r?Object.assign(Object.assign({},od(r,!1)),t):t)}logOpenSmartSnippetSuggestionInlineLink(e,t,r){return this.logClickEvent(f.openSmartSnippetSuggestionInlineLink,e,{contentIDKey:t.documentId.contentIdKey,contentIDValue:t.documentId.contentIdValue},r?Object.assign(Object.assign({},od(r,!1)),t):t)}logLikeGeneratedAnswer(e,t){return this.logCustomEvent(f.likeGeneratedAnswer,t?Object.assign(Object.assign({},od(t,!1)),e):e)}logDislikeGeneratedAnswer(e,t){return this.logCustomEvent(f.dislikeGeneratedAnswer,t?Object.assign(Object.assign({},od(t,!1)),e):e)}logOpenGeneratedAnswerSource(e,t){return this.logCustomEvent(f.openGeneratedAnswerSource,t?Object.assign(Object.assign({},od(t,!1)),e):e)}logGeneratedAnswerSourceHover(e,t){return this.logCustomEvent(f.generatedAnswerSourceHover,t?Object.assign(Object.assign({},od(t,!1)),e):e)}logGeneratedAnswerCopyToClipboard(e,t){return this.logCustomEvent(f.generatedAnswerCopyToClipboard,t?Object.assign(Object.assign({},od(t,!1)),e):e)}logGeneratedAnswerHideAnswers(e,t){return this.logCustomEvent(f.generatedAnswerHideAnswers,t?Object.assign(Object.assign({},od(t,!1)),e):e)}logGeneratedAnswerShowAnswers(e,t){return this.logCustomEvent(f.generatedAnswerShowAnswers,t?Object.assign(Object.assign({},od(t,!1)),e):e)}logGeneratedAnswerFeedbackSubmit(e,t){return this.logCustomEvent(f.generatedAnswerFeedbackSubmit,t?Object.assign(Object.assign({},od(t,!1)),e):e)}logRephraseGeneratedAnswer(e,t){return this.logSearchEvent(f.rephraseGeneratedAnswer,t?Object.assign(Object.assign({},od(t,!1)),e):e)}logRetryGeneratedAnswer(e){return this.logSearchEvent(f.retryGeneratedAnswer,e?Object.assign({},od(e,!1)):{})}logGeneratedAnswerStreamEnd(e,t){return this.logCustomEvent(f.generatedAnswerStreamEnd,t?Object.assign(Object.assign({},od(t,!1)),e):e)}logCustomEvent(e,t){return aj(this,void 0,void 0,function*(){let r=Object.assign(Object.assign({},this.provider.getBaseMetadata()),t),n=Object.assign(Object.assign({},(yield this.getBaseCustomEventRequest(r))),{eventType:ot[e],eventValue:e});return this.coveoAnalyticsClient.sendCustomEvent(n)})}logSearchEvent(e,t){return aj(this,void 0,void 0,function*(){return this.coveoAnalyticsClient.sendSearchEvent((yield this.getBaseSearchEventRequest(e,t)))})}logClickEvent(e,t,r,n){return aj(this,void 0,void 0,function*(){let a=Object.assign(Object.assign(Object.assign({},t),(yield this.getBaseEventRequest(Object.assign(Object.assign({},r),n)))),{searchQueryUid:this.provider.getSearchUID(),queryPipeline:this.provider.getPipeline(),actionCause:e});return this.coveoAnalyticsClient.sendClickEvent(a)})}logShowMoreFoldedResults(e,t,r){return aj(this,void 0,void 0,function*(){return this.logClickEvent(f.showMoreFoldedResults,e,t,r?od(r,!1):void 0)})}logShowLessFoldedResults(e){return aj(this,void 0,void 0,function*(){return this.logCustomEvent(f.showLessFoldedResults,e?od(e,!1):void 0)})}getBaseCustomEventRequest(e){return aj(this,void 0,void 0,function*(){return Object.assign(Object.assign({},(yield this.getBaseEventRequest(e))),{lastSearchQueryUid:this.provider.getSearchUID()})})}getBaseSearchEventRequest(e,t){var r,n;return aj(this,void 0,void 0,function*(){return Object.assign(Object.assign(Object.assign({},(yield this.getBaseEventRequest(Object.assign(Object.assign({},t),null===(n=(r=this.provider).getGeneratedAnswerMetadata)||void 0===n?void 0:n.call(r))))),this.provider.getSearchEventRequestPayload()),{searchQueryUid:this.provider.getSearchUID(),queryPipeline:this.provider.getPipeline(),actionCause:e})})}getBaseEventRequest(e){return aj(this,void 0,void 0,function*(){let t=Object.assign(Object.assign({},this.provider.getBaseMetadata()),e);return Object.assign(Object.assign({},this.getOrigins()),{customData:t,language:this.provider.getLanguage(),facetState:this.provider.getFacetState?this.provider.getFacetState():[],anonymous:this.provider.getIsAnonymous(),clientId:yield this.getClientId()})})}getOrigins(){var e,t;return{originContext:null===(t=(e=this.provider).getOriginContext)||void 0===t?void 0:t.call(e),originLevel1:this.provider.getOriginLevel1(),originLevel2:this.provider.getOriginLevel2(),originLevel3:this.provider.getOriginLevel3()}}getClientId(){return this.coveoAnalyticsClient instanceof oe?this.coveoAnalyticsClient.getCurrentVisitorId():void 0}},op=(e,t)=>{let r=e=>e.facetId===t;return"productListing"in e&&e.productListing&&"facets"in e.productListing&&"results"in e.productListing.facets?e.productListing.facets.results.find(r):"search"in e&&e.search?e.search.response.facets.find(r):void 0},oh=(e,t)=>{var r;return null==(r=e.facetSet[t])?void 0:r.request},og=(e,t)=>{let r=op(e,t);if(r&&r.facetId in e.facetSet)return r},ov=e=>"productListing"in e?e.productListing.isLoading:e.search.isLoading;function oy(e){let{activeValue:t,ancestryMap:r}=function(e){let t=[...e],r=new Map;for(;t.length>0;){let e=t.shift();if("selected"===e.state)return{activeValue:e,ancestryMap:r};if(r)for(let t of e.children)r.set(t,e);t.unshift(...e.children)}return{}}(e);return t?function(e,t){let r=[];if(!e)return[];let n=e;do r.unshift(n),n=t.get(n);while(n);return r}(t,r):[]}var om=(e,t)=>{var r;return null==(r=e.categoryFacetSet[t])?void 0:r.request},oS=(e,t)=>{var r;let n=om(e,t);return oy(null!=(r=null==n?void 0:n.currentValues)?r:[])},ob=(e,t)=>{let r=oT(t,e),n=r?r.field:"",a=oM(n,e);return{facetId:e,facetField:n,facetTitle:a}};function ow(e,t){let{facetId:r,facetValue:n}=e,a=ob(r,t),i=oU(t,r);return{...a,facetValue:"hierarchical"===i?oD(t,r):n}}function oC(e){var t,r,n,a,i;return{facetSet:null!=(t=e.facetSet)?t:{},categoryFacetSet:null!=(r=e.categoryFacetSet)?r:{},dateFacetSet:null!=(n=e.dateFacetSet)?n:{},numericFacetSet:null!=(a=e.numericFacetSet)?a:{},automaticFacetSet:null!=(i=e.automaticFacetSet)?i:al()}}var ok=e=>{let t=[];return oA(e).forEach((r,n)=>{let a=oU(e,r.facetId),i=oP(r,n+1);if(oI(r)){if(!oS(e,r.facetId).length)return;t.push({...i,...oj(e,r.facetId),facetType:a,state:"selected"});return}r.currentValues.forEach((e,n)=>{if("idle"===e.state)return;let o=oE(e,n+1,a),s=oO(r)?oR(e):ox(e);t.push({...i,...o,...s})})}),oq(e).forEach((e,r)=>{let n=oF(e,r+1);e.values.forEach((e,r)=>{if("idle"===e.state)return;let a=oE(e,r+1,"specific"),i=oR(e);t.push({...n,...a,...i})})}),t},oO=e=>"specific"===e.type,oI=e=>"hierarchical"===e.type,oA=e=>[...Object.values(e.facetSet),...Object.values(e.categoryFacetSet),...Object.values(e.dateFacetSet),...Object.values(e.numericFacetSet)].map(e=>e.request),oq=e=>[...Object.values(e.automaticFacetSet.set)].map(e=>e.response),oE=(e,t,r)=>({state:e.state,valuePosition:t,facetType:r}),ox=e=>({displayValue:`${e.start}..${e.end}`,value:`${e.start}..${e.end}`,start:e.start,end:e.end,endInclusive:e.endInclusive}),oR=e=>({displayValue:e.value,value:e.value}),oD=(e,t)=>oS(e,t).map(e=>e.value).join(";"),oj=(e,t)=>{let r=oD(e,t);return{value:r,valuePosition:1,displayValue:r}},oF=(e,t)=>({title:oM(e.field,e.field),field:e.field,id:e.field,facetPosition:t}),oP=(e,t)=>({title:oM(e.field,e.facetId),field:e.field,id:e.facetId,facetPosition:t}),oM=(e,t)=>`${e}_${t}`,oT=(e,t)=>{var r,n,a,i,o;return(null==(r=e.facetSet[t])?void 0:r.request)||(null==(n=e.categoryFacetSet[t])?void 0:n.request)||(null==(a=e.dateFacetSet[t])?void 0:a.request)||(null==(i=e.numericFacetSet[t])?void 0:i.request)||(null==(o=e.automaticFacetSet.set[t])?void 0:o.response)},oU=(e,t)=>{let r=oT(e,t);return r?r.type:"specific"},oV="2.47.0",oL=e=>{let t=e.configuration.search.locale.split("-")[0];return t&&2===t.length?t:"en"},o$=class{constructor(e){this.getState=e,this.state=e()}getLanguage(){return oL(this.state)}getBaseMetadata(){let{context:e}=this.state,t=(null==e?void 0:e.contextValues)||{},r={};for(let[e,n]of Object.entries(t))r[`context_${e}`]=n;return r.coveoHeadlessVersion=oV,r}getOriginContext(){return this.state.configuration.analytics.originContext}getOriginLevel1(){return this.state.searchHub||nm()}getOriginLevel2(){return this.state.configuration.analytics.originLevel2}getOriginLevel3(){return this.state.configuration.analytics.originLevel3}getIsAnonymous(){return this.state.configuration.analytics.anonymous}},o_=e=>new oe(e).getCurrentVisitorId(),oQ=e=>{let t=new oe(e);t.clear(),t.deleteHttpOnlyVisitorId()},oN=new aX.HistoryStore,oz=(e,t)=>"function"==typeof t?(...r)=>{let n=ns(r[0]);try{return t.apply(t,r)}catch(t){return e.error(t,"Error in analytics preprocessRequest. Returning original request."),n}}:void 0,oB=(e,t)=>(...r)=>{let n=ns(r[1]);try{return t.apply(t,r)}catch(t){return e.error(t,"Error in analytics hook. Returning original request."),n}},oH=class extends o${constructor(){super(...arguments),this.getFacetRequest=e=>{var t,r,n,a,i,o,s,l,u,c;return(null==(r=null==(t=this.state.facetSet)?void 0:t[e])?void 0:r.request)||(null==(a=null==(n=this.state.categoryFacetSet)?void 0:n[e])?void 0:a.request)||(null==(o=null==(i=this.state.dateFacetSet)?void 0:i[e])?void 0:o.request)||(null==(l=null==(s=this.state.numericFacetSet)?void 0:s[e])?void 0:l.request)||(null==(c=null==(u=this.state.automaticFacetSet)?void 0:u.set[e])?void 0:c.response)}}getFacetState(){return ok(oC(this.getState()))}getPipeline(){var e;return this.state.pipeline||(null==(e=this.state.search)?void 0:e.response.pipeline)||oH.fallbackPipelineName}getSearchEventRequestPayload(){return{queryText:this.queryText,responseTime:this.responseTime,results:this.resultURIs,numberOfResults:this.numberOfResults}}getSearchUID(){var e,t;let r=this.getState();return(null==(e=r.search)?void 0:e.searchResponseId)||(null==(t=r.search)?void 0:t.response.searchUid)||nk().response.searchUid}getSplitTestRunName(){var e;return null==(e=this.state.search)?void 0:e.response.splitTestRun}getSplitTestRunVersion(){var e;let t=!!this.getSplitTestRunName(),r=(null==(e=this.state.search)?void 0:e.response.pipeline)||this.state.pipeline||oH.fallbackPipelineName;return t?r:void 0}getBaseMetadata(){var e,t,r;let n=this.getState(),a=super.getBaseMetadata(),i=null==(r=null==(t=null==(e=n.search)?void 0:e.response)?void 0:t.extendedResults)?void 0:r.generativeQuestionAnsweringId;return i&&(a.generativeQuestionAnsweringId=i),a}getFacetMetadata(e,t){var r;let n=this.getFacetRequest(e),a=null!=(r=null==n?void 0:n.field)?r:"";return{...this.getBaseMetadata(),facetId:e,facetField:a,facetValue:t,facetTitle:`${a}_${e}`}}getFacetClearAllMetadata(e){var t;let r=this.getFacetRequest(e),n=null!=(t=null==r?void 0:r.field)?t:"";return{...this.getBaseMetadata(),facetId:e,facetField:n,facetTitle:`${n}_${e}`}}getFacetUpdateSortMetadata(e,t){var r;let n=this.getFacetRequest(e),a=null!=(r=null==n?void 0:n.field)?r:"";return{...this.getBaseMetadata(),facetId:e,facetField:a,criteria:t,facetTitle:`${a}_${e}`}}getRangeBreadcrumbFacetMetadata(e,t){var r;let n=this.getFacetRequest(e),a=null!=(r=null==n?void 0:n.field)?r:"";return{...this.getBaseMetadata(),facetId:e,facetField:a,facetRangeEnd:t.end,facetRangeEndInclusive:t.endInclusive,facetRangeStart:t.start,facetTitle:`${a}_${e}`}}getResultSortMetadata(){var e;return{...this.getBaseMetadata(),resultsSortBy:null!=(e=this.state.sortCriteria)?e:n6()}}getStaticFilterToggleMetadata(e,t){return{...this.getBaseMetadata(),staticFilterId:e,staticFilterValue:t}}getStaticFilterClearAllMetadata(e){return{...this.getBaseMetadata(),staticFilterId:e}}getUndoTriggerQueryMetadata(e){return{...this.getBaseMetadata(),undoneQuery:e}}getCategoryBreadcrumbFacetMetadata(e,t){var r;let n=this.getFacetRequest(e),a=null!=(r=null==n?void 0:n.field)?r:"";return{...this.getBaseMetadata(),categoryFacetId:e,categoryFacetField:a,categoryFacetPath:t,categoryFacetTitle:`${a}_${e}`}}getOmniboxAnalyticsMetadata(e,t){let r=this.state.querySuggest&&this.state.querySuggest[e],n=r.completions.map(e=>e.expression),a=r.partialQueries.length-1,i=r.partialQueries[a]||"",o=r.responseId;return{...this.getBaseMetadata(),suggestionRanking:n.indexOf(t),partialQuery:i,partialQueries:r.partialQueries.length>0?r.partialQueries:"",suggestions:n.length>0?n:"",querySuggestResponseId:o}}getInterfaceChangeMetadata(){return{...this.getBaseMetadata(),interfaceChangeTo:this.state.configuration.analytics.originLevel2}}getOmniboxFromLinkMetadata(e){return{...this.getBaseMetadata(),...e}}getGeneratedAnswerMetadata(){var e;let t=this.getState(),r={};return(null==(e=t.generatedAnswer)?void 0:e.isVisible)!==void 0&&(r.showGeneratedAnswer=t.generatedAnswer.isVisible),r}get resultURIs(){var e;return null==(e=this.results)?void 0:e.map(e=>({documentUri:e.uri,documentUriHash:e.raw.urihash}))}get results(){var e;return null==(e=this.state.search)?void 0:e.response.results}get queryText(){var e;return(null==(e=this.state.query)?void 0:e.q)||nZ().q}get responseTime(){var e;return(null==(e=this.state.search)?void 0:e.duration)||nk().duration}get numberOfResults(){var e;return(null==(e=this.state.search)?void 0:e.response.totalCountFiltered)||nk().response.totalCountFiltered}},oY=oH;oY.fallbackPipelineName="default";var oW=e=>{let t,r,n,a,i,o;let s=e.configuration.accessToken,l=e.configuration.analytics.trackingId,{emit:u}=(n=(t=ax({url:e.configuration.analytics.nextApiBaseUrl,token:s,trackingId:l}),{get:()=>t,update:e=>{t=ax({...t,...e})}}),a=function(){let e=[];function t({type:t,callback:r}){return e.findIndex(e=>e.type===t&&e.callback===r)}function r(r,n){let a;n?(a=t({type:r,callback:n}))>=0&&e.splice(a,1):function(t){if("*"===t)e.length=0;else for(let r=e.length-1;r>=0;r--)e[r].type===t&&e.splice(r,1)}(r)}return{add:function(n){return 0>t(n)&&e.push(n),()=>r(n.type,n.callback)},call:function(t){e.forEach(e=>{var r;if(r=t.meta.type,"*"===e.type||r===e.type)try{e.callback(t)}catch(e){console.error(e)}})},remove:r}}(),i={get:()=>Object.freeze("disabled"!==n.get().mode&&function(){try{return"object"==typeof window}catch{return!1}}()?{runtime:"browser",send:async(e,t,r)=>{let n,a=navigator.sendBeacon(`${e}?access_token=${t}`,new Blob([JSON.stringify([r])],{type:"application/json"}));if((n="undefined"!=typeof window,{sendMessage(e){n&&window.postMessage(e,"*")}}).sendMessage({kind:"EVENT_PROTOCOL",event:r,url:e,token:t}),!a)throw Error("Failed to send the event(s) because the payload size exceeded the maximum allowed size (32 KB). Please contact support if the problem persists.")},getReferrer:()=>{let e;return""===(e=document.referrer)?null:e},getLocation:()=>window.location.href,getUserAgent:()=>navigator.userAgent,generateUUID:()=>crypto.randomUUID(),storage:{getItem:e=>aR.getItem(e)||localStorage.getItem(e),removeItem(e){aR.removeItem(e),localStorage.removeItem(e)},setItem(e,t){localStorage.setItem(e,t),aR.setItem(e,t,31556952e3)}}}:{runtime:"null",send:async()=>{},getReferrer:()=>null,getLocation:()=>null,getUserAgent:()=>null,generateUUID:()=>"",storage:{getItem:()=>null,removeItem(){},setItem(){}}})},o=(r="visitorId",{getClientId:()=>{var e;let t=i.get(),n=t.storage,a=n.getItem(r),o=a&&"string"==typeof(e=a)&&aA.test(e)?a:t.generateUUID();return n.setItem(r,o),o},clear:()=>{i.get().storage.removeItem(r)}}),{emit:(e,t)=>{let r=n.get(),s=i.get(),l={...t,meta:aE(e,r,s,o)};return aI({config:r,environment:s,event:l,listenerManager:a})},getMeta:e=>aE(e,n.get(),i.get(),o),on:(e,t)=>a.add({type:e,callback:t}),off:(e,t)=>a.remove(e,t),updateConfig:e=>n.update(e),version:aq,clearStorage:()=>{o.clear()}});return u},oG=()=>{let e=oN.getHistory().reverse().find(e=>"PageView"===e.name&&e.value);return e?e.value:""},oJ=class{constructor(e){this.state=e()}getSearchUID(){return null}getOriginLevel1(){return this.state.searchHub||nm()}},oK=class extends o${constructor(){super(...arguments),this.initialState=n8()}getPipeline(){return""}getSearchEventRequestPayload(){return{queryText:"",responseTime:0,results:this.mapResultsToAnalyticsDocument(),numberOfResults:this.numberOfResults}}getSearchUID(){var e;return(null==(e=this.getState().productListing)?void 0:e.responseId)||this.initialState.responseId}mapResultsToAnalyticsDocument(){var e;return null==(e=this.state.productListing)?void 0:e.products.map(e=>({documentUri:e.documentUri,documentUriHash:e.documentUriHash,permanentid:e.permanentid}))}get numberOfResults(){return this.state.productListing.products.length}},oZ=class extends o${getSearchUID(){var e,t;let r=this.getState();return(null==(e=r.search)?void 0:e.searchResponseId)||(null==(t=r.search)?void 0:t.response.searchUid)||nk().response.searchUid}getPipeline(){var e;return this.state.pipeline||(null==(e=this.state.search)?void 0:e.response.pipeline)||"default"}getSearchEventRequestPayload(){return{queryText:this.queryText,responseTime:this.responseTime,results:this.mapResultsToAnalyticsDocument(),numberOfResults:this.numberOfResults}}getFacetState(){return ok(oC(this.state))}getBaseMetadata(){var e,t,r;let n=this.getState(),a=super.getBaseMetadata(),i=null==(r=null==(t=null==(e=n.search)?void 0:e.response)?void 0:t.extendedResults)?void 0:r.generativeQuestionAnsweringId;return i&&(a.generativeQuestionAnsweringId=i),a}getGeneratedAnswerMetadata(){var e;let t=this.getState();return{...(null==(e=t.generatedAnswer)?void 0:e.isVisible)!==void 0&&{showGeneratedAnswer:t.generatedAnswer.isVisible}}}get queryText(){var e;return(null==(e=this.state.query)?void 0:e.q)||nZ().q}get responseTime(){var e;return(null==(e=this.state.search)?void 0:e.duration)||nk().duration}mapResultsToAnalyticsDocument(){var e;return null==(e=this.state.search)?void 0:e.response.results.map(e=>({documentUri:e.uri,documentUriHash:e.raw.urihash}))}get numberOfResults(){var e;return(null==(e=this.state.search)?void 0:e.response.results.length)||nk().response.results.length}},oX=class extends o${constructor(){super(...arguments),this.initialState=n8()}getPipeline(){return""}getSearchEventRequestPayload(){return{queryText:"",responseTime:0,results:this.mapResultsToAnalyticsDocument(),numberOfResults:this.numberOfResults}}getSearchUID(){var e;return(null==(e=this.getState().productListing)?void 0:e.responseId)||this.initialState.responseId}mapResultsToAnalyticsDocument(){var e;return null==(e=this.state.productListing)?void 0:e.products.map(e=>({documentUri:e.documentUri,documentUriHash:e.documentUriHash,permanentid:e.permanentid}))}get numberOfResults(){return this.state.productListing.products.length}};function o0(e){var t,r;let n=function e(t){return t.childResults?t.childResults.flatMap(t=>[t,...e(t)]):[]}(e),a=[e,...n].filter(e=>e.parentResult).map(e=>e.parentResult);return t=[e,...n,...a],r=e=>e.uniqueId,[...t.reduce((e,t)=>{let n=r(t);return e.has(n)||e.set(n,t),e},new Map).values()]}var o1=(e,t,r)=>function(...n){return o5(1===n.length?{...n[0],__legacy__getBuilder:t(n[0].__legacy__getBuilder),analyticsConfigurator:e,providerClass:r}:{prefix:n[0],__legacy__getBuilder:t(n[1]),__legacy__provider:n[2],analyticsConfigurator:e,providerClass:r})},o2=e=>"legacy"===e.configuration.analytics.analyticsMode,o3=e=>"next"===e.configuration.analytics.analyticsMode,o5=({prefix:e,__legacy__getBuilder:t,__legacy__provider:r,analyticsPayloadBuilder:n,analyticsType:a,analyticsConfigurator:i,providerClass:o})=>{var s;let l,u;return null!=r||(r=e=>new o(e)),s=async({getState:e,analyticsClientMiddleware:o,preprocessRequest:s,logger:l})=>{let u=[],c={log:async({state:e})=>{for(let t of u)await t(e)}},d=e(),f=i({getState:e,logger:l,analyticsClientMiddleware:o,preprocessRequest:s,provider:r(e)}),p=await t(f,e());c.description=null==p?void 0:p.description,u.push(async e=>{o2(e)&&await o4(p,r,e,l,f.coveoAnalyticsClient)});let h=oW(d);return u.push(async e=>{if(o3(e)&&a&&n){let t=n(e);await so(h,a,t)}}),c},Object.assign(u=(l=t=>Object.assign(tH(e,t),{instantlyCallable:!0}))(async(e,{getState:t,extra:r})=>{let{analyticsClientMiddleware:n,preprocessRequest:a,logger:i}=r;return await (await s({getState:t,analyticsClientMiddleware:n,preprocessRequest:a,logger:i})).log({state:t(),extra:r})}),{prepare:async({getState:e,analyticsClientMiddleware:t,preprocessRequest:r,logger:n})=>{let{description:a,log:i}=await s({getState:e,analyticsClientMiddleware:t,preprocessRequest:r,logger:n});return{description:a,action:l(async(e,{getState:t,extra:r})=>await i({state:t(),extra:r}))}}}),u};async function o4(e,t,r,n,a){t(()=>r);let i=await (null==e?void 0:e.log({searchUID:t(()=>r).getSearchUID()}));n.info({client:a,response:i},"Analytics response")}var o6=e=>(t,r)=>Promise.resolve({description:{actionCause:"caseAssist"},log:async n=>{e(t,r)}}),o8=o1(({logger:e,getState:t,analyticsClientMiddleware:r=(e,t)=>t,preprocessRequest:n,provider:a=new oY(t)})=>{let i=t(),o=i.configuration.accessToken,s=i.configuration.analytics.apiBaseUrl,l=i.configuration.analytics.runtimeEnvironment,u=i.configuration.analytics.enabled,c=new oi({token:o,endpoint:s,runtimeEnvironment:l,preprocessRequest:oz(e,n),beforeSendHooks:[oB(e,r),(t,r)=>(e.info({...r,type:t,endpoint:s,token:o},"Analytics request"),r)]},a);return u||c.disable(),c},e=>e,oY),o9=(o1(({logger:e,getState:t,analyticsClientMiddleware:r=(e,t)=>t,preprocessRequest:n,provider:a=new oJ(t)})=>{let i=t(),o=i.configuration.accessToken,s=i.configuration.analytics.apiBaseUrl,l=i.configuration.analytics.runtimeEnvironment,u=i.configuration.analytics.enabled,c=new ou({enableAnalytics:u,token:o,endpoint:s,runtimeEnvironment:l,preprocessRequest:oz(e,n),beforeSendHooks:[oB(e,r),(t,r)=>(e.info({...r,type:t,endpoint:s,token:o},"Analytics request"),r)]},a);return u||c.disable(),c},o6,oJ),o1(({logger:e,getState:t,analyticsClientMiddleware:r=(e,t)=>t,preprocessRequest:n,provider:a=new oZ(t)})=>{let i=t(),o=i.configuration.accessToken,s=i.configuration.analytics.apiBaseUrl,l=i.configuration.analytics.runtimeEnvironment,u=i.configuration.analytics.enabled,c=new of({enableAnalytics:u,token:o,endpoint:s,runtimeEnvironment:l,preprocessRequest:oz(e,n),beforeSendHooks:[oB(e,r),(t,r)=>(e.info({...r,type:t,endpoint:s,token:o},"Analytics request"),r)]},a);return u||c.disable(),c},o6,oZ),o1(({logger:e,getState:t,analyticsClientMiddleware:r=(e,t)=>t,preprocessRequest:n,provider:a=new oK(t)})=>{let i=t(),o=i.configuration.accessToken,s=i.configuration.analytics.apiBaseUrl,l=i.configuration.analytics.runtimeEnvironment,u=i.configuration.analytics.enabled,c=new oi({token:o,endpoint:s,runtimeEnvironment:l,preprocessRequest:oz(e,n),beforeSendHooks:[oB(e,r),(t,r)=>(e.info({...r,type:t,endpoint:s,token:o},"Analytics request"),r)]},a);return u||c.disable(),c},e=>e,oK)),o7=o1(({logger:e,getState:t,analyticsClientMiddleware:r=(e,t)=>t,preprocessRequest:n,provider:a=new oX(t)})=>{let i=t(),o=i.configuration.accessToken,s=i.configuration.analytics.apiBaseUrl,l=i.configuration.analytics.runtimeEnvironment,u=i.configuration.analytics.enabled,c=new oi({token:o,endpoint:s,runtimeEnvironment:l,preprocessRequest:oz(e,n),beforeSendHooks:[oB(e,r),(t,r)=>(e.info({...r,type:t,endpoint:s,token:o},"Analytics request"),r)]},a);return u||c.disable(),c},e=>e,oX),se=(e,t)=>{var r,n,a,i;let o,s,l;let u=-1,c=null==(r=t.search)?void 0:r.results;return(u=si(e,c))<0&&(u=function(e,t){for(let[r,n]of t.entries())if(-1!==si(e,o0(n)))return r;return -1}(e,c)),u<0&&(u=0),i=u+(null!=(a=null==(n=t.pagination)?void 0:n.firstResult)?a:0),{collectionName:"string"==typeof(o=e.raw.collection)?o:"default",documentAuthor:rM(s=e.raw.author)?"unknown":Array.isArray(s)?s.join(";"):`${s}`,documentPosition:i+1,documentTitle:e.title,documentUri:e.uri,documentUriHash:e.raw.urihash,documentUrl:e.clickUri,rankingModifier:e.rankingModifier||"",sourceName:rM(l=e.raw.source)?"unknown":l,queryPipeline:t.pipeline||ae()}},st=e=>(e.raw.permanentid||console.warn("Missing field permanentid on result. This might cause many issues with your Coveo deployment. See https://docs.coveo.com/en/1913 and https://docs.coveo.com/en/1640 for more information.",e),{contentIDKey:"permanentid",contentIDValue:e.raw.permanentid||""}),sr={urihash:new r_,sourcetype:new r_,permanentid:new r_},sn={uniqueId:rW,raw:new rN({values:sr}),title:rW,uri:rW,clickUri:rW,rankingModifier:new r_({required:!1,emptyAllowed:!0})},sa=e=>{var t;return new rj(sn).validate(Object.assign({},...Object.keys(sn).map(t=>({[t]:e[t]})),{raw:(t=e.raw,Object.assign({},...Object.keys(sr).map(e=>({[e]:t[e]}))))}))};function si(e,t=[]){return t.findIndex(({uniqueId:t})=>t===e.uniqueId)}async function so(e,t,r){await e(t,r)}var ss=((c=ss||{}).interfaceLoad="interfaceLoad",c.interfaceChange="interfaceChange",c.didyoumeanAutomatic="didyoumeanAutomatic",c.didyoumeanClick="didyoumeanClick",c.resultsSort="resultsSort",c.searchboxSubmit="searchboxSubmit",c.searchboxClear="searchboxClear",c.searchboxAsYouType="searchboxAsYouType",c.breadcrumbFacet="breadcrumbFacet",c.breadcrumbResetAll="breadcrumbResetAll",c.documentQuickview="documentQuickview",c.documentOpen="documentOpen",c.omniboxAnalytics="omniboxAnalytics",c.omniboxFromLink="omniboxFromLink",c.searchFromLink="searchFromLink",c.triggerNotify="notify",c.triggerExecute="execute",c.triggerQuery="query",c.undoTriggerQuery="undoQuery",c.triggerRedirect="redirect",c.pagerResize="pagerResize",c.pagerNumber="pagerNumber",c.pagerNext="pagerNext",c.pagerPrevious="pagerPrevious",c.pagerScrolling="pagerScrolling",c.staticFilterClearAll="staticFilterClearAll",c.staticFilterSelect="staticFilterSelect",c.staticFilterDeselect="staticFilterDeselect",c.facetClearAll="facetClearAll",c.facetSearch="facetSearch",c.facetSelect="facetSelect",c.facetSelectAll="facetSelectAll",c.facetDeselect="facetDeselect",c.facetExclude="facetExclude",c.facetUnexclude="facetUnexclude",c.facetUpdateSort="facetUpdateSort",c.facetShowMore="showMoreFacetResults",c.facetShowLess="showLessFacetResults",c.queryError="query",c.queryErrorBack="errorBack",c.queryErrorClear="errorClearQuery",c.queryErrorRetry="errorRetry",c.recommendation="recommendation",c.recommendationInterfaceLoad="recommendationInterfaceLoad",c.recommendationOpen="recommendationOpen",c.likeSmartSnippet="likeSmartSnippet",c.dislikeSmartSnippet="dislikeSmartSnippet",c.expandSmartSnippet="expandSmartSnippet",c.collapseSmartSnippet="collapseSmartSnippet",c.openSmartSnippetFeedbackModal="openSmartSnippetFeedbackModal",c.closeSmartSnippetFeedbackModal="closeSmartSnippetFeedbackModal",c.sendSmartSnippetReason="sendSmartSnippetReason",c.expandSmartSnippetSuggestion="expandSmartSnippetSuggestion",c.collapseSmartSnippetSuggestion="collapseSmartSnippetSuggestion",c.showMoreSmartSnippetSuggestion="showMoreSmartSnippetSuggestion",c.showLessSmartSnippetSuggestion="showLessSmartSnippetSuggestion",c.openSmartSnippetSource="openSmartSnippetSource",c.openSmartSnippetSuggestionSource="openSmartSnippetSuggestionSource",c.openSmartSnippetInlineLink="openSmartSnippetInlineLink",c.openSmartSnippetSuggestionInlineLink="openSmartSnippetSuggestionInlineLink",c.recentQueryClick="recentQueriesClick",c.clearRecentQueries="clearRecentQueries",c.recentResultClick="recentResultClick",c.clearRecentResults="clearRecentResults",c.noResultsBack="noResultsBack",c.showMoreFoldedResults="showMoreFoldedResults",c.showLessFoldedResults="showLessFoldedResults",c.copyToClipboard="copyToClipboard",c.caseSendEmail="Case.SendEmail",c.feedItemTextPost="FeedItem.TextPost",c.caseAttach="caseAttach",c.caseDetach="caseDetach",c.retryGeneratedAnswer="retryGeneratedAnswer",c.likeGeneratedAnswer="likeGeneratedAnswer",c.dislikeGeneratedAnswer="dislikeGeneratedAnswer",c.openGeneratedAnswerSource="openGeneratedAnswerSource",c.generatedAnswerStreamEnd="generatedAnswerStreamEnd",c.historyForward="historyForward",c.historyBackward="historyBackward",c),sl=()=>o8("analytics/interface/load",e=>e.makeInterfaceLoad()),su=()=>o8("analytics/interface/searchFromLink",e=>e.makeSearchFromLink()),sc=e=>o8("analytics/interface/omniboxFromLink",t=>t.makeOmniboxFromLink(e)),sd=()=>({actionCause:ss.interfaceLoad,getEventExtraPayload:e=>new oY(()=>e).getBaseMetadata()}),sf=()=>({actionCause:ss.searchFromLink,getEventExtraPayload:e=>new oY(()=>e).getBaseMetadata()}),sp=e=>({actionCause:ss.omniboxFromLink,getEventExtraPayload:t=>new oY(()=>t).getOmniboxFromLinkMetadata(e)}),sh=()=>rG,sg=()=>rW,sv=ty("configuration/updateBasicConfiguration",e=>r0(e,{accessToken:rG,organizationId:rG,platformUrl:rG})),sy=ty("configuration/updateSearchConfiguration",e=>r0(e,{apiBaseUrl:rG,pipeline:new r_({required:!1,emptyAllowed:!0}),searchHub:rG,timezone:rG,locale:rG,authenticationProviders:new rB({required:!1,each:rW})})),sm=ty("configuration/updateAnalyticsConfiguration",e=>(no()&&(e.enabled=!1),r0(e,{enabled:new rV({default:!0}),originContext:sh(),originLevel2:sh(),originLevel3:sh(),apiBaseUrl:rG,nextApiBaseUrl:rG,runtimeEnvironment:new rF,anonymous:new rV({default:!1}),deviceId:rG,userDisplayName:rG,documentLocation:rG,trackingId:rG,analyticsMode:new r_({constrainTo:["legacy","next"],required:!1,default:"legacy"})}))),sS=ty("configuration/analytics/disable"),sb=ty("configuration/analytics/enable"),sw=ty("configuration/analytics/originlevel2",e=>r0(e,{originLevel2:sg()})),sC=ty("configuration/analytics/originlevel3",e=>r0(e,{originLevel3:sg()})),sk={q:new r_,enableQuerySyntax:new rV,aq:new r_,cq:new r_,firstResult:new rT({min:0}),numberOfResults:new rT({min:0}),sortCriteria:new r_,f:new rN,fExcluded:new rN,cf:new rN,nf:new rN,df:new rN,debug:new rV,sf:new rN,tab:new r_,af:new rN},sO=ty("searchParameters/restore",e=>r0(e,sk)),sI=ty("debug/enable"),sA=ty("debug/disable"),sq=tP(nv(),e=>{e.addCase(sI,()=>!0).addCase(sA,()=>!1).addCase(sO,(e,t)=>{var r;return null!=(r=t.payload.debug)?r:e})}),sE=ty("history/undo"),sx=ty("history/redo"),sR=ty("history/snapshot"),sD=(tH("history/back",async(e,{dispatch:t})=>{t(sE()),await t(sD())}),tH("history/forward",async(e,{dispatch:t})=>{t(sx()),await t(sD())}),tH("history/change",async(e,{getState:t})=>t().history.present)),sj=ty("pipeline/set",e=>r0(e,new r_({required:!0,emptyAllowed:!0}))),sF=tP(ae(),e=>{e.addCase(sj,(e,t)=>t.payload).addCase(sD.fulfilled,(e,t)=>{var r,n;return null!=(n=null==(r=t.payload)?void 0:r.pipeline)?n:e}).addCase(sy,(e,t)=>t.payload.pipeline||e)}),sP=ty("searchHub/set",e=>r0(e,new r_({required:!0,emptyAllowed:!0}))),sM=tP(nm(),e=>{e.addCase(sP,(e,t)=>t.payload).addCase(sD.fulfilled,(e,t)=>{var r,n;return null!=(n=null==(r=t.payload)?void 0:r.searchHub)?n:e}).addCase(sy,(e,t)=>t.payload.searchHub||e)}),sT=ty("breadcrumb/deselectAll"),sU=ty("breadcrumb/deselectAllNonBreadcrumbs"),sV=ty("facet/updateFacetAutoSelection",e=>r0(e,{allow:new rV({required:!0})})),sL=class extends oY{constructor(e){super(e),this.getState=e}get activeInstantResultQuery(){let e=this.getState().instantResults;for(let t in e)for(let r in e[t].cache)if(e[t].cache[r].isActive)return e[t].q;return null}get activeInstantResultCache(){let e=this.getState().instantResults;for(let t in e)for(let r in e[t].cache)if(e[t].cache[r].isActive)return e[t].cache[r];return null}get results(){var e;return null==(e=this.activeInstantResultCache)?void 0:e.results}get queryText(){var e;return null!=(e=this.activeInstantResultQuery)?e:nZ().q}get responseTime(){var e,t;return null!=(t=null==(e=this.activeInstantResultCache)?void 0:e.duration)?t:nk().duration}get numberOfResults(){var e,t;return null!=(t=null==(e=this.activeInstantResultCache)?void 0:e.totalCountFiltered)?t:nk().response.totalCountFiltered}getSearchUID(){var e;return(null==(e=this.activeInstantResultCache)?void 0:e.searchUid)||super.getSearchUID()}},s$=()=>o8("analytics/instantResult/searchboxAsYouType",e=>e.makeSearchboxAsYouType(),e=>new sL(e)),s_=()=>({actionCause:ss.searchboxAsYouType,getEventExtraPayload:e=>new oY(()=>e).getBaseMetadata()}),sQ={id:rW},sN={...sQ,q:rJ},sz=ty("instantResults/register",e=>r0(e,sQ)),sB=ty("instantResults/updateQuery",e=>r0(e,sN)),sH=ty("instantResults/clearExpired",e=>r0(e,sQ)),sY=new rT({required:!0,min:0}),sW=ty("pagination/registerNumberOfResults",e=>r0(e,sY)),sG=ty("pagination/updateNumberOfResults",e=>r0(e,sY)),sJ=ty("pagination/registerPage",e=>r0(e,sY)),sK=ty("pagination/updatePage",e=>r0(e,sY)),sZ=ty("pagination/nextPage"),sX=ty("pagination/previousPage"),s0=ty("query/updateQuery",e=>r0(e,{q:new r_,enableQuerySyntax:new rV})),s1=async(e,t)=>({analytics:{clientId:await o_(e),clientTimestamp:new Date().toISOString(),documentReferrer:e.originLevel3,originContext:e.originContext,...t&&{actionCause:t.actionCause,customData:t.customData},...e.userDisplayName&&{userDisplayName:e.userDisplayName},...e.documentLocation&&{documentLocation:e.documentLocation},...e.deviceId&&{deviceId:e.deviceId},...oG()&&{pageId:oG()},...e.analyticsMode&&e.trackingId&&{trackingId:e.trackingId},capture:"next"===e.analyticsMode}}),s2=async(e,t)=>{var r,n,a,i;return{accessToken:e.configuration.accessToken,organizationId:e.configuration.organizationId,url:e.configuration.search.apiBaseUrl,locale:e.configuration.search.locale,debug:e.debug,tab:e.configuration.analytics.originLevel2,referrer:e.configuration.analytics.originLevel3,timezone:e.configuration.search.timezone,...e.configuration.analytics.enabled&&{visitorId:await o_(e.configuration.analytics),actionsHistory:oN.getHistory()},...(null==(r=e.advancedSearchQueries)?void 0:r.aq)&&{aq:e.advancedSearchQueries.aq},...(null==(n=e.advancedSearchQueries)?void 0:n.cq)&&{cq:e.advancedSearchQueries.cq},...(null==(a=e.advancedSearchQueries)?void 0:a.lq)&&{lq:e.advancedSearchQueries.lq},...(null==(i=e.advancedSearchQueries)?void 0:i.dq)&&{dq:e.advancedSearchQueries.dq},...e.context&&{context:e.context.contextValues},...e.fields&&!e.fields.fetchAllFields&&{fieldsToInclude:e.fields.fieldsToInclude},...e.dictionaryFieldContext&&{dictionaryFieldContext:e.dictionaryFieldContext.contextValues},...e.pipeline&&{pipeline:e.pipeline},...e.query&&{q:e.query.q,enableQuerySyntax:e.query.enableQuerySyntax},...e.searchHub&&{searchHub:e.searchHub},...e.sortCriteria&&{sortCriteria:e.sortCriteria},...e.configuration.analytics.enabled&&await s1(e.configuration.analytics,t),...e.excerptLength&&!rM(e.excerptLength.length)&&{excerptLength:e.excerptLength.length},...e.configuration.search.authenticationProviders.length&&{authentication:e.configuration.search.authenticationProviders.join(",")}}},s3=()=>o8("search/logFetchMoreResults",e=>e.makeFetchMoreResults()),s5=e=>o8("search/queryError",(t,r)=>{var n,a,i,o;return t.makeQueryError({query:(null==(n=r.query)?void 0:n.q)||nZ().q,aq:(null==(a=r.advancedSearchQueries)?void 0:a.aq)||n7().aq,cq:(null==(i=r.advancedSearchQueries)?void 0:i.cq)||n7().cq,dq:(null==(o=r.advancedSearchQueries)?void 0:o.dq)||n7().dq,errorType:e.type,errorMessage:e.message})}),s4=E(L()),s6=E(er()),s8=E(L()),s9=E(en());s8.default.extend(s9.default);var s7="YYYY/MM/DD@HH:mm:ss";function le(e,t){let r=(0,s8.default)(e,t);return r.isValid()||t?r:(0,s8.default)(e,s7)}function lt(e){if(e.isBefore("1401-01-01"))throw Error(`Date is before year 1401, which is unsupported by the API: ${e}`)}s4.default.extend(s6.default);var lr=["past","now","next"],ln=["minute","hour","day","week","month","quarter","year"],la=e=>{let t="now"===e;return{amount:new rT({required:!t,min:1}),unit:new r_({required:!t,constrainTo:ln}),period:new r_({required:!0,constrainTo:lr})}};function li(e){if("string"==typeof e&&!lu(e))throw Error(`The value "${e}" is not respecting the relative date format "period-amount-unit"`);let t="string"==typeof e?lc(e):e;new rj(la(t.period)).validate(t);let r=lo(t),n=JSON.stringify(t);if(!r.isValid())throw Error(`Date is invalid: ${n}`);lt(r)}function lo(e){let{period:t,amount:r,unit:n}=e;switch(t){case"past":return(0,s4.default)().subtract(r,n);case"next":return(0,s4.default)().add(r,n);case"now":return(0,s4.default)()}}function ls(e){return lo(lc(e)).format(s7)}function ll(e){return e.toLocaleLowerCase().split("-")}function lu(e){let[t,r,n]=ll(e);if("now"===t)return!0;if(!lr.includes(t)||!ln.includes(n))return!1;let a=parseInt(r);return!(isNaN(a)||a<=0)}function lc(e){let[t,r,n]=ll(e);return"now"===t?{period:"now"}:{period:t,amount:r?parseInt(r):void 0,unit:n||void 0}}var ld=()=>({dateFacetValueMap:{}});function lf(e){var t;let r=ld();return{request:{...e,facets:null==(t=e.facets)?void 0:t.map(e=>(function(e,t){if("dateRange"===e.type){let{facetId:r,currentValues:n}=e;return t.dateFacetValueMap[r]={},{...e,currentValues:n.map(e=>{let n,a;return n=e.start,a=e.end,lu(n)&&(n=ls(n),t.dateFacetValueMap[r][`start${n}`]=e.start),lu(a)&&(a=ls(a),t.dateFacetValueMap[r][`end${a}`]=e.end),{...e,start:n,end:a}})}}return e})(e,r))},mappings:r}}function lp(e,t){var r;return"success"in e?{success:{...e.success,facets:null==(r=e.success.facets)?void 0:r.map(e=>e.facetId in t.dateFacetValueMap?{...e,values:e.values.map(r=>{var n;return n=e.facetId,{...r,start:t.dateFacetValueMap[n][`start${r.start}`]||r.start,end:t.dateFacetValueMap[n][`end${r.end}`]||r.end}})}:e)}}:e}function lh(e,t){let r={};e.forEach(e=>r[e.facetId]=e);let n=[];return t.forEach(e=>{e in r&&(n.push(r[e]),delete r[e])}),[...n,...Object.values(r)]}function lg(e){return Object.values(e).map(e=>e.request)}var lv=async(e,t)=>{var r,n,a,i,o,s,l,u;let c,d,f;let p=(c=(null==(n=e.advancedSearchQueries)?void 0:n.cq.trim())||"",[c,(null==(d=Object.values(e.tabSet||{}).find(e=>e.isActive))?void 0:d.expression.trim())||"",...Object.values(e.staticFilterSet||{}).map(e=>{let t=e.values.filter(e=>"selected"===e.state&&!!e.expression.trim()),r=t.map(e=>e.expression).join(" OR ");return t.length>1?`(${r})`:r})].filter(e=>!!e).join(" AND ")),h=lh([...lg(null!=(i=e.facetSet)?i:{}).map(e=>"alphanumericDescending"===e.sortCriteria?{...e,sortCriteria:{type:"alphanumeric",order:"descending"}}:e),...lm(null!=(o=e.numericFacetSet)?o:{}),...lm(null!=(s=e.dateFacetSet)?s:{}),...lg(null!=(l=e.categoryFacetSet)?l:{})].filter(({facetId:t})=>{var r,n,a;return null==(a=null==(n=null==(r=e.facetOptions)?void 0:r.facets[t])?void 0:n.enabled)||a}),null!=(a=e.facetOrder)?a:[]),g=(f=null==(u=e.automaticFacetSet)?void 0:u.set)?Object.values(f).map(e=>e.response).map(ly).filter(e=>e.currentValues.length>0):void 0,v=await s2(e,t);return lf({...v,...e.didYouMean&&{queryCorrection:{enabled:e.didYouMean.enableDidYouMean&&"next"===e.didYouMean.queryCorrectionMode,options:{automaticallyCorrect:e.didYouMean.automaticallyCorrectQuery?"whenNoResults":"never"}},enableDidYouMean:e.didYouMean.enableDidYouMean&&"legacy"===e.didYouMean.queryCorrectionMode},...p&&{cq:p},...h.length&&{facets:h},...e.pagination&&{numberOfResults:e.pagination?e.pagination.firstResult+e.pagination.numberOfResults>5e3?5e3-e.pagination.firstResult:e.pagination.numberOfResults:void 0,firstResult:e.pagination.firstResult},...e.facetOptions&&{facetOptions:{freezeFacetOrder:e.facetOptions.freezeFacetOrder}},...(null==(r=e.folding)?void 0:r.enabled)&&{filterField:e.folding.fields.collection,childField:e.folding.fields.parent,parentField:e.folding.fields.child,filterFieldRange:e.folding.filterFieldRange},...e.automaticFacetSet&&{generateAutomaticFacets:{desiredCount:e.automaticFacetSet.desiredCount,numberOfValues:e.automaticFacetSet.numberOfValues,currentFacets:g}},...e.generatedAnswer&&{pipelineRuleParameters:{mlGenerativeQuestionAnswering:{responseFormat:e.generatedAnswer.responseFormat,citationsFieldToInclude:e.generatedAnswer.fieldsToIncludeInCitations}}}})};function ly(e){let{field:t,label:r,values:n}=e;return{field:t,label:r,currentValues:n.filter(e=>"selected"===e.state)}}function lm(e){return lg(e).map(e=>{let t=e.currentValues.some(({state:e})=>"idle"!==e);return e.generateAutomaticRanges&&!t?{...e,currentValues:[]}:e})}var lS=ty("didYouMean/enable"),lb=ty("didYouMean/disable"),lw=ty("didYouMean/automaticCorrections/disable"),lC=ty("didYouMean/automaticCorrections/enable"),lk=ty("didYouMean/correction",e=>r0(e,rW)),lO=ty("didYouMean/automaticCorrections/mode",e=>r0(e,new r_({constrainTo:["next","legacy"],emptyAllowed:!1,required:!0}))),lI=()=>o8("analytics/didyoumean/automatic",e=>e.makeDidYouMeanAutomatic()),lA=()=>({actionCause:ss.didyoumeanAutomatic,getEventExtraPayload:e=>new oY(()=>e).getBaseMetadata()});new rN({values:{undoneQuery:rJ},options:{required:!0}});var lq=()=>o8("analytics/trigger/query",(e,t)=>{var r;return(null==(r=t.triggers)?void 0:r.queryModification.newQuery)?e.makeTriggerQuery():null}),lE=ty("trigger/query/ignore",e=>r0(e,new r_({emptyAllowed:!0,required:!0}))),lx=ty("trigger/query/modification",e=>r0(e,new rN({values:{originalQuery:rG,modification:rG}}))),lR=class{constructor(e,t=e=>{this.dispatch(s0({q:e}))}){this.config=e,this.onUpdateQueryForCorrection=t}async fetchFromAPI({mappings:e,request:t},r){var n;let a=new Date().getTime();return{response:lp(await this.extra.apiClient.search(t,r),e),duration:new Date().getTime()-a,queryExecuted:(null==(n=this.getState().query)?void 0:n.q)||"",requestExecuted:t}}async process(e){var t,r,n;return null!=(n=null!=(r=null!=(t=this.processQueryErrorOrContinue(e))?t:await this.processQueryCorrectionsOrContinue(e))?r:await this.processQueryTriggersOrContinue(e))?n:this.processSuccessResponse(e)}processQueryErrorOrContinue(e){return n_(e.response)?(this.dispatch(s5(e.response.error)),this.rejectWithValue(e.response.error)):null}async processQueryCorrectionsOrContinue(e){let t=this.getState(),r=this.getSuccessResponse(e);if(!r||!t.didYouMean)return null;let{enableDidYouMean:n,automaticallyCorrectQuery:a}=t.didYouMean,{results:i,queryCorrections:o,queryCorrection:s}=r;if(!n||!a)return null;let l=0===i.length&&o&&0!==o.length,u=!rM(s)&&!rM(s.correctedQuery);if(!l&&!u)return null;let c=l?await this.processLegacyDidYouMeanAutoCorrection(e):this.processModernDidYouMeanAutoCorrection(e);return this.dispatch(sR(au(this.getState()))),c}async processLegacyDidYouMeanAutoCorrection(e){let t=this.getCurrentQuery(),r=this.getSuccessResponse(e);if(!r.queryCorrections)return null;let{correctedQuery:n}=r.queryCorrections[0],a=await this.automaticallyRetryQueryWithCorrection(n);return n_(a.response)?(this.dispatch(s5(a.response.error)),this.rejectWithValue(a.response.error)):(this.logOriginalAnalyticsQueryBeforeAutoCorrection(e),this.dispatch(sR(au(this.getState()))),{...a,response:{...a.response.success,queryCorrections:r.queryCorrections},automaticallyCorrected:!0,originalQuery:t,analyticsAction:lI()})}processModernDidYouMeanAutoCorrection(e){let t=this.getSuccessResponse(e),{correctedQuery:r,originalQuery:n}=t.queryCorrection;return this.logOriginalAnalyticsQueryBeforeAutoCorrection(e),this.onUpdateQueryForCorrection(r),{...e,response:{...t},queryExecuted:r,automaticallyCorrected:!0,originalQuery:n,analyticsAction:lI()}}logOriginalAnalyticsQueryBeforeAutoCorrection(e){let t=this.getState(),r=this.getSuccessResponse(e);this.analyticsAction&&this.analyticsAction()(this.dispatch,()=>this.getStateAfterResponse(e.queryExecuted,e.duration,t,r),this.extra)}async processQueryTriggersOrContinue(e){var t,r;let n=this.getSuccessResponse(e);if(!n)return null;let a=(null==(t=n.triggers.find(e=>"query"===e.type))?void 0:t.content)||"";if(!a)return null;if((null==(r=this.getState().triggers)?void 0:r.queryModification.queryToIgnore)===a)return this.dispatch(lE("")),null;this.analyticsAction&&await this.dispatch(this.analyticsAction);let i=this.getCurrentQuery(),o=await this.automaticallyRetryQueryWithTriggerModification(a);return n_(o.response)?(this.dispatch(s5(o.response.error)),this.rejectWithValue(o.response.error)):(this.dispatch(sR(au(this.getState()))),{...o,response:{...o.response.success},automaticallyCorrected:!1,originalQuery:i,analyticsAction:lq()})}getStateAfterResponse(e,t,r,n){var a,i;return{...r,query:{q:e,enableQuerySyntax:null!=(i=null==(a=r.query)?void 0:a.enableQuerySyntax)?i:nZ().enableQuerySyntax},search:{...nk(),duration:t,response:n,results:n.results}}}processSuccessResponse(e){return this.dispatch(sR(au(this.getState()))),{...e,response:this.getSuccessResponse(e),automaticallyCorrected:!1,originalQuery:this.getCurrentQuery(),analyticsAction:this.analyticsAction}}getSuccessResponse(e){return n$(e.response)?e.response.success:null}async automaticallyRetryQueryWithCorrection(e){this.onUpdateQueryForCorrection(e);let t=await this.fetchFromAPI(await lv(this.getState()),{origin:"mainSearch"});return this.dispatch(lk(e)),t}async automaticallyRetryQueryWithTriggerModification(e){return this.dispatch(lx({newQuery:e,originalQuery:this.getCurrentQuery()})),this.onUpdateQueryForCorrection(e),await this.fetchFromAPI(await lv(this.getState()),{origin:"mainSearch"})}getCurrentQuery(){var e;let t=this.getState();return(null==(e=t.query)?void 0:e.q)!==void 0?t.query.q:""}get extra(){return this.config.extra}getState(){return this.config.getState()}get dispatch(){return this.config.dispatch}get analyticsAction(){return this.config.analyticsAction}get rejectWithValue(){return this.config.rejectWithValue}};tH("search/prepareForSearchWithQuery",(e,t)=>{let{dispatch:r}=t;r0(e,{q:new r_,enableQuerySyntax:new rV,clearFilters:new rV}),e.clearFilters&&(r(sT()),r(sU())),r(sV({allow:!0})),r(s0({q:e.q,enableQuerySyntax:e.enableQuerySyntax})),r(sK(1))});var lD=tH("search/executeSearch",async(e,t)=>{let r=t.getState();return await lN(r,t,e)}),lj=tH("search/fetchPage",async(e,t)=>{let r=t.getState();return await l$(r,t,e)}),lF=tH("search/fetchMoreResults",async(e,t)=>{let r=t.getState();return await l_(t,r)}),lP=tH("search/fetchFacetValues",async(e,t)=>{let r=t.getState();return await lQ(t,e,r)}),lM=(tH("search/fetchInstantResults",async(e,t)=>lL(e,t)),async(e,t)=>{var r,n,a,i;let o=await lv(e,t);return o.request={...o.request,firstResult:(null!=(n=null==(r=e.pagination)?void 0:r.firstResult)?n:0)+(null!=(i=null==(a=e.search)?void 0:a.results.length)?i:0)},o}),lT=async(e,t,r)=>{let n=await s2(e);return lf({...n,...e.didYouMean&&{enableDidYouMean:e.didYouMean.enableDidYouMean},numberOfResults:r,q:t})},lU=async(e,t)=>{let r=await lv(e,t);return r.request.numberOfResults=0,r},lV=e=>{var t;e.configuration.analytics.enabled&&oN.addElement({name:"Query",...(null==(t=e.query)?void 0:t.q)&&{value:e.query.q},time:JSON.stringify(new Date)})};async function lL(e,t){r0(e,{id:rW,q:rW,maxResultsPerQuery:new rT({required:!0,min:1}),cacheTimeout:new rT});let{q:r,maxResultsPerQuery:n}=e,a=t.getState(),i=new lR({...t,analyticsAction:s$()},r=>{t.dispatch(sB({q:r,id:e.id}))}),o=await lT(a,r,n),s=await i.fetchFromAPI(o,{origin:"instantResults",disableAbortWarning:!0}),l=await i.process(s);return"response"in l?{results:l.response.results,searchUid:l.response.searchUid,analyticsAction:l.analyticsAction,totalCountFiltered:l.response.totalCountFiltered,duration:l.duration}:l}async function l$(e,t,r){lV(e);let{analyticsClientMiddleware:n,preprocessRequest:a,logger:i}=t.extra,{description:o}=await r.prepare({getState:()=>t.getState(),analyticsClientMiddleware:n,preprocessRequest:a,logger:i}),s=new lR({...t,analyticsAction:r}),l=await lv(e,o),u=await s.fetchFromAPI(l,{origin:"mainSearch"});return await s.process(u)}async function l_(e,t){let{analyticsClientMiddleware:r,preprocessRequest:n,logger:a}=e.extra,{description:i}=await s3().prepare({getState:()=>e.getState(),analyticsClientMiddleware:r,preprocessRequest:n,logger:a}),o=new lR({...e,analyticsAction:s3()}),s=await lM(t,i),l=await o.fetchFromAPI(s,{origin:"mainSearch"});return await o.process(l)}async function lQ(e,t,r){let{analyticsClientMiddleware:n,preprocessRequest:a,logger:i}=e.extra,{description:o}=await t.prepare({getState:()=>e.getState(),analyticsClientMiddleware:n,preprocessRequest:a,logger:i}),s=new lR({...e,analyticsAction:t}),l=await lU(r,o),u=await s.fetchFromAPI(l,{origin:"facetValues"});return await s.process(u)}async function lN(e,t,r){lV(e);let{analyticsClientMiddleware:n,preprocessRequest:a,logger:i}=t.extra,{description:o}=await r.prepare({getState:()=>t.getState(),analyticsClientMiddleware:n,preprocessRequest:a,logger:i}),s=await lv(e,o),l=new lR({...t,analyticsAction:r}),u=await l.fetchFromAPI(s,{origin:"mainSearch"});return await l.process(u)}var lz=class{constructor(e,t=e=>{this.dispatch(s0({q:e}))}){this.config=e,this.onUpdateQueryForCorrection=t}async fetchFromAPI({mappings:e,request:t},r){var n;let a=new Date().getTime();return{response:lp(await this.extra.apiClient.search(t,r),e),duration:new Date().getTime()-a,queryExecuted:(null==(n=this.getState().query)?void 0:n.q)||"",requestExecuted:t}}async process(e){var t,r,n;return null!=(n=null!=(r=null!=(t=this.processQueryErrorOrContinue(e))?t:await this.processQueryCorrectionsOrContinue(e))?r:await this.processQueryTriggersOrContinue(e))?n:this.processSuccessResponse(e)}processQueryErrorOrContinue(e){return n_(e.response)?(this.dispatch(s5(e.response.error)),this.rejectWithValue(e.response.error)):null}async processQueryCorrectionsOrContinue(e){let t=this.getState(),r=this.getSuccessResponse(e);if(!r||!t.didYouMean)return null;let{enableDidYouMean:n,automaticallyCorrectQuery:a}=t.didYouMean,{results:i,queryCorrections:o,queryCorrection:s}=r;if(!n||!a)return null;let l=0===i.length&&o&&0!==o.length,u=!rM(s)&&!rM(s.correctedQuery);if(!l&&!u)return null;let c=l?await this.processLegacyDidYouMeanAutoCorrection(e):this.processModernDidYouMeanAutoCorrection(e);return this.dispatch(sR(au(this.getState()))),c}async processLegacyDidYouMeanAutoCorrection(e){let t=this.getCurrentQuery(),r=this.getSuccessResponse(e);if(!r.queryCorrections)return null;let{correctedQuery:n}=r.queryCorrections[0],a=await this.automaticallyRetryQueryWithCorrection(n);return n_(a.response)?(this.dispatch(s5(a.response.error)),this.rejectWithValue(a.response.error)):(this.dispatch(sR(au(this.getState()))),{...a,response:{...a.response.success,queryCorrections:r.queryCorrections},automaticallyCorrected:!0,originalQuery:t})}processModernDidYouMeanAutoCorrection(e){let t=this.getSuccessResponse(e),{correctedQuery:r,originalQuery:n}=t.queryCorrection;return this.onUpdateQueryForCorrection(r),{...e,response:{...t},queryExecuted:r,automaticallyCorrected:!0,originalQuery:n}}async processQueryTriggersOrContinue(e){var t,r;let n=this.getSuccessResponse(e);if(!n)return null;let a=(null==(t=n.triggers.find(e=>"query"===e.type))?void 0:t.content)||"";if(!a)return null;if((null==(r=this.getState().triggers)?void 0:r.queryModification.queryToIgnore)===a)return this.dispatch(lE("")),null;let i=this.getCurrentQuery(),o=await this.automaticallyRetryQueryWithTriggerModification(a);return n_(o.response)?(this.dispatch(s5(o.response.error)),this.rejectWithValue(o.response.error)):(this.dispatch(sR(au(this.getState()))),{...o,response:{...o.response.success},automaticallyCorrected:!1,originalQuery:i})}processSuccessResponse(e){return this.dispatch(sR(au(this.getState()))),{...e,response:this.getSuccessResponse(e),automaticallyCorrected:!1,originalQuery:this.getCurrentQuery()}}getSuccessResponse(e){return n$(e.response)?e.response.success:null}async automaticallyRetryQueryWithCorrection(e){this.onUpdateQueryForCorrection(e);let t=this.getState(),{actionCause:r,getEventExtraPayload:n}=lA(),a=await this.fetchFromAPI(await lv(t,{actionCause:r,customData:n(t)}),{origin:"mainSearch"});return this.dispatch(lk(e)),a}async automaticallyRetryQueryWithTriggerModification(e){return this.dispatch(lx({newQuery:e,originalQuery:this.getCurrentQuery()})),this.onUpdateQueryForCorrection(e),await this.fetchFromAPI(await lv(this.getState()),{origin:"mainSearch"})}getCurrentQuery(){var e;let t=this.getState();return(null==(e=t.query)?void 0:e.q)!==void 0?t.query.q:""}get extra(){return this.config.extra}getState(){return this.config.getState()}get dispatch(){return this.config.dispatch}get rejectWithValue(){return this.config.rejectWithValue}},lB=tH("search/prepareForSearchWithQuery",(e,t)=>{let{dispatch:r}=t;r0(e,{q:new r_,enableQuerySyntax:new rV,clearFilters:new rV}),e.clearFilters&&(r(sT()),r(sU())),r(sV({allow:!0})),r(s0({q:e.q,enableQuerySyntax:e.enableQuerySyntax})),r(sK(1))}),lH=tH("search/executeSearch",async(e,t)=>{let r=t.getState();if("legacy"===r.configuration.analytics.analyticsMode||!e.next)return lN(r,t,e.legacy);l0(r);let n=l1(e.next,r),a=await lv(r,n),i=new lz({...t,analyticsAction:n}),o=await i.fetchFromAPI(a,{origin:"mainSearch"});return await i.process(o)}),lY=tH("search/fetchPage",async(e,t)=>{let r=t.getState();if(l0(r),"legacy"===r.configuration.analytics.analyticsMode||!e.next)return l$(r,t,e.legacy);let n=new lz({...t,analyticsAction:e.next}),a=await lv(r,e.next),i=await n.fetchFromAPI(a,{origin:"mainSearch"});return await n.process(i)}),lW=tH("search/fetchMoreResults",async(e,t)=>{var r,n;let a=t.getState();if("legacy"===a.configuration.analytics.analyticsMode)return l_(t,a);let i=(r=ss.pagerScrolling,n=t.getState,{...new oY(n).getBaseMetadata(),actionCause:r,type:r}),o=new lz({...t,analyticsAction:i}),s=await lK(a,i),l=await o.fetchFromAPI(s,{origin:"mainSearch"});return await o.process(l)}),lG=tH("search/fetchFacetValues",async(e,t)=>{let r=t.getState();if("legacy"===r.configuration.analytics.analyticsMode||!e.next)return lN(r,t,e.legacy);let n=l1(e.next,r),a=new lz({...t,analyticsAction:n}),i=await lX(r,n),o=await a.fetchFromAPI(i,{origin:"facetValues"});return await a.process(o)}),lJ=tH("search/fetchInstantResults",async(e,t)=>{let r=t.getState();if("legacy"===r.configuration.analytics.analyticsMode)return lL(e,t);r0(e,{id:rW,q:rW,maxResultsPerQuery:new rT({required:!0,min:1}),cacheTimeout:new rT});let{q:n,maxResultsPerQuery:a}=e,i=l1(s_(),r),o=await lZ(r,n,a,i),s=new lz({...t,analyticsAction:i},r=>{t.dispatch(sB({q:r,id:e.id}))}),l=await s.fetchFromAPI(o,{origin:"instantResults",disableAbortWarning:!0}),u=await s.process(l);return"response"in u?{results:u.response.results,searchUid:u.response.searchUid,totalCountFiltered:u.response.totalCountFiltered,duration:u.duration}:u}),lK=async(e,t)=>{var r,n,a,i;let o=await lv(e,t);return o.request={...o.request,firstResult:(null!=(n=null==(r=e.pagination)?void 0:r.firstResult)?n:0)+(null!=(i=null==(a=e.search)?void 0:a.results.length)?i:0)},o},lZ=async(e,t,r,n)=>{let a=await s2(e,n);return lf({...a,...e.didYouMean&&{enableDidYouMean:e.didYouMean.enableDidYouMean},numberOfResults:r,q:t})},lX=async(e,t)=>{let r=await lv(e,t);return r.request.numberOfResults=0,r},l0=e=>{var t;e.configuration.analytics.enabled&&oN.addElement({name:"Query",...(null==(t=e.query)?void 0:t.q)&&{value:e.query.q},time:JSON.stringify(new Date)})},l1=(e,t)=>({customData:e.getEventExtraPayload(t),actionCause:e.actionCause,type:e.actionCause}),l2=(e,t)=>rM(e[t])?rM(e.raw[t])?null:e.raw[t]:e[t],l3=(e,t)=>{let r=l2(t,e);return nn(r)?r:[r]};function l5(e){return""!==e.search.response.searchUid}function l4(e,t){var r;let n=null!=(r=t.payload)?r:null;n&&(e.response=nk().response,e.results=[],e.questionAnswer=nC()),e.error=n,e.isLoading=!1}function l6(e,t){e.error=null,e.response=t.payload.response,e.queryExecuted=t.payload.queryExecuted,e.duration=t.payload.duration,e.isLoading=!1}function l8(e,t){e.isLoading=!0,e.requestId=t.meta.requestId}var l9=tP(nk(),e=>{e.addCase(lD.rejected,(e,t)=>l4(e,t)),e.addCase(lF.rejected,(e,t)=>l4(e,t)),e.addCase(lj.rejected,(e,t)=>l4(e,t)),e.addCase(lD.fulfilled,(e,t)=>{l6(e,t),e.results=t.payload.response.results,e.searchResponseId=t.payload.response.searchUid,e.questionAnswer=t.payload.response.questionAnswer,e.extendedResults=t.payload.response.extendedResults}),e.addCase(lF.fulfilled,(e,t)=>{l6(e,t),e.results=[...e.results,...t.payload.response.results]}),e.addCase(lj.fulfilled,(e,t)=>{l6(e,t),e.results=t.payload.response.results}),e.addCase(lP.fulfilled,(e,t)=>{e.response.facets=t.payload.response.facets,e.response.searchUid=t.payload.response.searchUid}),e.addCase(lD.pending,l8),e.addCase(lF.pending,l8),e.addCase(lj.pending,l8)}),l7=tP(oV,e=>e),ue=E(ea()),ut=ty("tab/register",e=>r0(e,new rN({values:{id:rW,expression:rJ}}))),ur=ty("tab/updateActiveTab",e=>r0(e,rW)),un=tP(ng(),e=>e.addCase(sv,(e,t)=>{t.payload.accessToken&&(e.accessToken=t.payload.accessToken),t.payload.organizationId&&(e.organizationId=t.payload.organizationId),t.payload.platformUrl&&(e.platformUrl=t.payload.platformUrl,e.search.apiBaseUrl=`${t.payload.platformUrl}${np}`,e.analytics.apiBaseUrl=function(e,t){if(nj(e))return e.replace(/^(https:\/\/)platform/,"$1analytics")+nh;let r=nF(e,t);return r?nd(t,r.environment).analytics:e}(t.payload.platformUrl,e.organizationId))}).addCase(sy,(e,t)=>{t.payload.apiBaseUrl&&(e.search.apiBaseUrl=t.payload.apiBaseUrl),t.payload.locale&&(e.search.locale=t.payload.locale),t.payload.timezone&&(e.search.timezone=t.payload.timezone),t.payload.authenticationProviders&&(e.search.authenticationProviders=t.payload.authenticationProviders)}).addCase(sm,(e,t)=>{rM(t.payload.enabled)||(!t.payload.enabled&&e.analytics.enabled&&oQ(e.analytics),e.analytics.enabled=t.payload.enabled),rM(t.payload.originContext)||(e.analytics.originContext=t.payload.originContext),rM(t.payload.originLevel2)||(e.analytics.originLevel2=t.payload.originLevel2),rM(t.payload.originLevel3)||(e.analytics.originLevel3=t.payload.originLevel3),rM(t.payload.apiBaseUrl)||(e.analytics.apiBaseUrl=t.payload.apiBaseUrl),rM(t.payload.nextApiBaseUrl)||(e.analytics.nextApiBaseUrl=t.payload.nextApiBaseUrl),rM(t.payload.trackingId)||(e.analytics.trackingId=t.payload.trackingId),rM(t.payload.analyticsMode)||(e.analytics.analyticsMode=t.payload.analyticsMode);let r=(0,ue.default)();r&&(e.analytics.analyticsMode="next",e.analytics.trackingId=r),rM(t.payload.runtimeEnvironment)||(e.analytics.runtimeEnvironment=t.payload.runtimeEnvironment),rM(t.payload.anonymous)||(e.analytics.anonymous=t.payload.anonymous),rM(t.payload.deviceId)||(e.analytics.deviceId=t.payload.deviceId),rM(t.payload.userDisplayName)||(e.analytics.userDisplayName=t.payload.userDisplayName),rM(t.payload.documentLocation)||(e.analytics.documentLocation=t.payload.documentLocation)}).addCase(sS,e=>{e.analytics.enabled=!1,oQ(e.analytics)}).addCase(sb,e=>{e.analytics.enabled=!0}).addCase(sw,(e,t)=>{e.analytics.originLevel2=t.payload.originLevel2}).addCase(sC,(e,t)=>{e.analytics.originLevel3=t.payload.originLevel3}).addCase(ur,(e,t)=>{e.analytics.originLevel2=t.payload}).addCase(sO,(e,t)=>{e.analytics.originLevel2=t.payload.tab||e.analytics.originLevel2}));function ua(e,t,r){void 0===t&&(t=50),void 0===r&&(r={});var n,a,i,o=null!=(n=r.isImmediate)&&n,s=null!=(a=r.callback)&&a,l=r.maxWait,u=Date.now(),c=[],d=function(){var r=[].slice.call(arguments),n=this;return new Promise(function(a,d){var f=o&&void 0===i;if(void 0!==i&&clearTimeout(i),i=setTimeout(function(){if(i=void 0,u=Date.now(),!o){var t=e.apply(n,r);s&&s(t),c.forEach(function(e){return(0,e.resolve)(t)}),c=[]}},function(){if(void 0!==l){var e=Date.now()-u;if(e+t>=l)return l-e}return t}()),f){var p=e.apply(n,r);return s&&s(p),a(p)}c.push({resolve:a,reject:d})})};return d.cancel=function(e){void 0!==i&&clearTimeout(i),c.forEach(function(t){return(0,t.reject)(e)}),c=[]},d}async function ui(e){try{return await e()}catch(e){return""}}var uo={configuration:un,version:l7},us=E(T()),ul=E(ee()),uu=(e,t,r,n,a,i)=>{let o=e[t];rM(o)||rM(a)||a!==o&&a!==n&&(i.warn(`Mismatch on access token (JWT Token) ${t} and engine configuration.`),i.warn(`To remove this warning, make sure that access token value [${o}] matches engine configuration value [${r}]`))},uc=(e,t)=>!(rM(e)||t===e),ud=e=>{try{let t="undefined"!=typeof atob?atob:ul.atob,r=e.split(".")[1].replace(/-/g,"+").replace(/_/g,"/"),n=t(r);if(!n)return!1;let a=decodeURIComponent(n.split("").map(e=>"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)).join(""));return JSON.parse(a)}catch(e){return!1}},uf=(e,t)=>(uc(e.searchHub,t.searchHub)&&(t.searchHub=e.searchHub),t),up=(e,t,r,n)=>(uu(e,"searchHub",t.searchHub,nm(),r,n),uf(e,t)),uh=(e,t)=>(uc(e.pipeline,t.pipeline)&&(t.pipeline=e.pipeline),t),ug=(e,t,r,n)=>(uu(e,"pipeline",t.pipeline,ae(),r,n),uh(e,t)),uv=(e,t)=>(uc(e.userDisplayName,t.configuration.analytics.userDisplayName)&&(t.configuration.analytics.userDisplayName=e.userDisplayName),t),uy=(e,t,r,n)=>(uu(e,"userDisplayName",t.configuration.analytics.userDisplayName,ng().analytics.userDisplayName,r,n),uv(e,t)),um=e=>tP({},t=>{t.addCase(sP,(t,r)=>{let n=ud(t.configuration.accessToken);return n?up(n,t,r.payload,e):t}).addCase(sj,(t,r)=>{let n=ud(t.configuration.accessToken);return n?ug(n,t,r.payload,e):t}).addCase(sv,(e,t)=>{if(e.configuration.accessToken!==t.payload.accessToken)return e;let{accessToken:r}=t.payload;if(!r)return e;let n=ud(r);return n?[uh,uf,uv].reduce((e,t)=>t(n,e),e):e}).addCase(sy,(t,r)=>{var n;let a=ud(t.configuration.accessToken);if(!a)return t;let i=up(a,t,r.payload.searchHub,e);return ug(a,i,null==(n=r.payload)?void 0:n.pipeline,e)}).addCase(sm,(t,r)=>{let n=ud(t.configuration.accessToken);return n?uy(n,t,r.payload.userDisplayName,e):t})}),uS={organizationId:rW,accessToken:rW,platformUrl:new r_({required:!1,emptyAllowed:!1}),name:new r_({required:!1,emptyAllowed:!1}),analytics:new rN({options:{required:!1},values:{enabled:new rV({required:!1}),originContext:new r_({required:!1}),originLevel2:new r_({required:!1}),originLevel3:new r_({required:!1}),analyticsMode:new r_({constrainTo:["legacy","next"],required:!1})}})},ub=new rj({...uS,search:new rN({options:{required:!1},values:{pipeline:new r_({required:!1,emptyAllowed:!0}),searchHub:rG,locale:rG,timezone:rG,authenticationProviders:new rB({required:!1,each:rW})}})}),uw={debug:sq,pipeline:sF,searchHub:sM,search:l9};function uC(e){var t,r,n;let a,i;let o=(t=e.loggerOptions,(0,us.default)({name:"@coveo/headless",level:(null==t?void 0:t.level)||"warn",formatters:{log:null==t?void 0:t.logFormatter}}));!function(e,t){try{ub.validate(e)}catch(e){throw t.error(e,"Search engine configuration error"),e}}(e.configuration,o);let s=function(e,t){let{search:r}=e;return new nL({logger:t,preprocessRequest:e.preprocessRequest||nw,postprocessSearchResponseMiddleware:(null==r?void 0:r.preprocessSearchResponseMiddleware)||at,postprocessFacetSearchResponseMiddleware:(null==r?void 0:r.preprocessFacetSearchResponseMiddleware)||ar,postprocessQuerySuggestResponseMiddleware:(null==r?void 0:r.preprocessQuerySuggestResponseMiddleware)||an})}(e.configuration,o),l=new aO({logger:o}),u={analyticsClientMiddleware:function(e){let{analytics:t}=e;return(null==t?void 0:t.analyticsClientMiddleware)||((e,t)=>t)}(r=e.configuration),validatePayload:rX,preprocessRequest:r.preprocessRequest||nw,logger:o,apiClient:s,streamingClient:l},c=function(e,t){var r,n;let a=function(e,t){var r,n,a;let i,o,s;let{reducers:l}=e,u=(n={...uo,...l},a=null!=(r=e.preloadedState)?r:{},i={...n},s=e=>(t,r)=>{let n=e(t,r);return o?o(n,r):n},{get combinedReducer(){let e=function(e){let t={};for(let[r,n]of e)t[r]=n;return t}(Object.entries(a).filter(([e])=>!(e in i)).map(([e,t])=>[e,()=>t]));return s((0,ei.combineReducers)({...e,...i}))},containsAll:e=>Object.keys(e).every(e=>e in i),add(e){Object.keys(e).filter(e=>!(e in i)).forEach(t=>i[t]=e[t])},addCrossReducer(e){o=e}});e.crossReducer&&u.addCrossReducer(e.crossReducer);let c=t.logger,d=function(e,t,r){let{preloadedState:n,configuration:a}=e,i=a.name||"coveo-headless",o=function(e,t){let r,n;let{renewAccessToken:a}=e.configuration;return[rE,(r=0,n=ua(()=>r=0,500),e=>i=>async o=>{var s;if("function"!=typeof o)return i(o);let l=await i(o);if((null==(s=null==l?void 0:l.error)?void 0:s.name)!==new r7().name)return l;if("function"!=typeof a)return t.warn("Unable to renew the expired token because a renew function was not provided. Please specify the #renewAccessToken option when initializing the engine."),l;if(r>=5)return t.warn("Attempted to renew the token but was not successful. Please check the #renewAccessToken function."),l;r++,n();let u=await ui(a);e.dispatch(sv({accessToken:u})),e.dispatch(o)}),rx(t),rq].concat(e.middlewares||[])}(e,t.logger);return function({reducer:e,preloadedState:t,middlewares:r=[],thunkExtraArguments:n,name:a}){return tj({reducer:e,preloadedState:t,devTools:{stateSanitizer:e=>e.history?{...e,history:"<<OMIT>>"}:e,name:a,shouldHotReload:!1},middleware:e=>[...r,...e({thunk:{extraArgument:n}}),rR(n.logger)]})}({preloadedState:n,reducer:r.combinedReducer,middlewares:o,thunkExtraArguments:t,name:i})}(e,t,u);return{addReducers(e){u.containsAll(e)||(u.add(e),d.replaceReducer(u.combinedReducer))},dispatch:d.dispatch,subscribe:d.subscribe,enableAnalytics(){d.dispatch(sb())},disableAnalytics(){d.dispatch(sS())},get state(){return d.getState()},logger:c,store:d}}(e,t),{accessToken:i,organizationId:o}=e.configuration,{organizationEndpoints:s}=e.configuration,l=(null==s?void 0:s.platform)||e.configuration.platformUrl;(!rM(e.configuration.platformUrl)||rM(null==(n=e.configuration.organizationEndpoints)?void 0:n.platform))&&a.logger.warn(`The \`platformUrl\` (${e.configuration.platformUrl}) option will be deprecated in the next major version. Consider using the \`organizationEndpoints\` option instead. See [Organization endpoints](https://docs.coveo.com/en/mcc80216).`),rP(e.configuration.organizationEndpoints)?a.logger.warn("The `organizationEndpoints` options was not explicitly set in the Headless engine configuration. Coveo recommends setting this option, as it has resiliency benefits and simplifies the overall configuration for multi-region deployments. See [Organization endpoints](https://docs.coveo.com/en/mcc80216)."):function(e){let{platform:t}=e.configuration.organizationEndpoints;if(rP(t))return!1;let r=nP(t);return r&&r.organizationId!==e.configuration.organizationId}(e)&&a.logger.warn(`There is a mismatch between the \`organizationId\` option (${e.configuration.organizationId}) and the organization configured in the \`organizationEndpoints\` option (${null==(r=e.configuration.organizationEndpoints)?void 0:r.platform}). This could lead to issues that are complex to troubleshoot. Please make sure both values match.`),a.dispatch(sv({accessToken:i,organizationId:o,platformUrl:l}));let u=function(e,t){var r,n;let a=(null==(r=e.configuration.organizationEndpoints)?void 0:r.analytics)||void 0,{analyticsClientMiddleware:i,...o}=null!=(n=e.configuration.analytics)?n:{},s={...o,nextApiBaseUrl:`${a}/rest/organizations/${e.configuration.organizationId}/events/v1`,apiBaseUrl:a};return no()?(t.info("Analytics disabled since doNotTrack is active."),{...s,enabled:!1}):s}(e,a.logger);return u&&a.dispatch(sm(u)),a}({...e,reducers:uw,crossReducer:um(o)},u),d=(a=e.configuration.search,i=(null==(n=e.configuration.organizationEndpoints)?void 0:n.search)||void 0,{...a,apiBaseUrl:i});return d&&c.dispatch(sy(d)),{...c,get state(){return c.state},executeFirstSearch(e=sl()){if(l5(c.state))return;let t=lH({legacy:e,next:sd()});c.dispatch(t)},executeFirstSearchAfterStandaloneSearchBoxRedirect(e){let{cause:t,metadata:r}=e;if(l5(c.state))return;let n=r&&"omniboxFromLink"===t,a=lH({legacy:n?sc(r):su(),next:n?sp(r):sf()});c.dispatch(a)}}}function uk(e){let t,r=new Map,n=()=>0===r.size,a=e=>{try{let r=JSON.stringify(e),n=t!==r;return t=r,n}catch(e){return console.warn('Could not detect if state has changed, check the controller "get state method"',e),!0}};return{subscribe(i){i();let o=Symbol(),s;return n()&&(t=JSON.stringify(this.state),s=e.subscribe(()=>{a(this.state)&&r.forEach(e=>e())})),r.set(o,i),()=>{r.delete(o),n()&&s&&s()}},get state(){return{}}}}var uO=ty("fields/registerFieldsToInclude",e=>r0(e,rK)),uI=ty("fields/fetchall/enable"),uA=ty("fields/fetchall/disable"),uq=tH("fields/fetchDescription",async(e,{extra:t,getState:r,rejectWithValue:n})=>{let a=r(),{accessToken:i,organizationId:o}=a.configuration,{apiBaseUrl:s}=a.configuration.search,l=await t.apiClient.fieldDescriptions({accessToken:i,organizationId:o,url:s});return n_(l)?n(l.error):l.success.fields}),uE={collectionField:new r_({emptyAllowed:!1,required:!1}),parentField:new r_({emptyAllowed:!1,required:!1}),childField:new r_({emptyAllowed:!1,required:!1}),numberOfFoldedResults:new rT({min:0,required:!1})},ux=ty("folding/register",e=>r0(e,uE)),uR=tH("folding/loadCollection",async(e,{getState:t,rejectWithValue:r,extra:{apiClient:n}})=>{let a=t(),i=await s2(a),o=await n.search({...i,q:""===a.query.q?"":a.query.enableQuerySyntax?`${a.query.q} OR @uri`:`( <@- ${a.query.q} -@> ) OR @uri`,enableQuerySyntax:!0,cq:`@${a.folding.fields.collection}="${e}"`,filterField:a.folding.fields.collection,childField:a.folding.fields.parent,parentField:a.folding.fields.child,filterFieldRange:100},{origin:"foldingCollection"});return n_(o)?r(o.error):{collectionId:e,results:o.success.results,rootResult:a.folding.collections[e].result}}),uD=tP({fieldsToInclude:nW,fetchAllFields:!1,fieldsDescription:[]},e=>e.addCase(uO,(e,t)=>{e.fieldsToInclude=[...new Set(e.fieldsToInclude.concat(t.payload))]}).addCase(uI,e=>{e.fetchAllFields=!0}).addCase(uA,e=>{e.fetchAllFields=!1}).addCase(uq.fulfilled,(e,{payload:t})=>{e.fieldsDescription=t}).addCase(ux,(e,{payload:t})=>{var r,n,a;let i=nG().fields;e.fieldsToInclude.push(null!=(r=t.collectionField)?r:i.collection,null!=(n=t.parentField)?n:i.parent,null!=(a=t.childField)?a:i.child)}));new rj({enabled:new rV({default:!1})});var uj=new rB({each:rW,required:!0}),uF=(e,t)=>(r0(e,rW),rQ(t)?r0(t,rW):r0(t,uj),{payload:{contextKey:e,contextValue:t}}),uP=ty("context/set",e=>{for(let[t,r]of Object.entries(e))uF(t,r);return{payload:e}}),uM=ty("context/add",e=>uF(e.contextKey,e.contextValue)),uT=ty("context/remove",e=>r0(e,rW));tP(nN(),e=>{e.addCase(uP,(e,t)=>{e.contextValues=t.payload}).addCase(uM,(e,t)=>{e.contextValues[t.payload.contextKey]=t.payload.contextValue}).addCase(uT,(e,t)=>{delete e.contextValues[t.payload]}).addCase(sD.fulfilled,(e,t)=>{t.payload&&(e.contextValues=t.payload.context.contextValues)})}),new rj({values:new rN({options:{required:!1}})});var uU=ty("dictionaryFieldContext/set",e=>{let t=r0(e,new rN({options:{required:!0}})).error;if(t)return{payload:e,error:t};let r=r0(Object.values(e),new rB({each:rJ})).error;return r?{payload:e,error:r}:{payload:e}}),uV=ty("dictionaryFieldContext/add",e=>r0(e,new rN({options:{required:!0},values:{field:rJ,key:rJ}}))),uL=ty("dictionaryFieldContext/remove",e=>r0(e,rJ));tP(n9(),e=>{e.addCase(uU,(e,t)=>{e.contextValues=t.payload}).addCase(uV,(e,t)=>{let{field:r,key:n}=t.payload;e.contextValues[r]=n}).addCase(uL,(e,t)=>{delete e.contextValues[t.payload]}).addCase(sD.fulfilled,(e,t)=>{t.payload&&(e.contextValues=t.payload.dictionaryFieldContext.contextValues)})}),tP({enableDidYouMean:!1,wasCorrectedTo:"",wasAutomaticallyCorrected:!1,queryCorrection:nz(),originalQuery:"",automaticallyCorrectQuery:!0,queryCorrectionMode:"legacy"},e=>{e.addCase(lS,e=>{e.enableDidYouMean=!0}).addCase(lb,e=>{e.enableDidYouMean=!1}).addCase(lC,e=>{e.automaticallyCorrectQuery=!0}).addCase(lw,e=>{e.automaticallyCorrectQuery=!1}).addCase(lH.pending,e=>{e.queryCorrection=nz(),e.wasAutomaticallyCorrected=!1,e.wasCorrectedTo=""}).addCase(lH.fulfilled,(e,t)=>{var r;let{queryCorrection:n,queryCorrections:a}=t.payload.response;if("legacy"===e.queryCorrectionMode){let t=a&&a[0]?a[0]:nz();e.queryCorrection=t}if("next"===e.queryCorrectionMode){let t={...nB(),...n,correctedQuery:(null==n?void 0:n.correctedQuery)||(null==(r=null==n?void 0:n.corrections[0])?void 0:r.correctedQuery)||""};e.queryCorrection=t,e.wasCorrectedTo=t.correctedQuery}e.wasAutomaticallyCorrected=t.payload.automaticallyCorrected,e.originalQuery=t.payload.originalQuery}).addCase(lk,(e,t)=>{e.wasCorrectedTo=t.payload}).addCase(lO,(e,t)=>{e.queryCorrectionMode=t.payload})});var u$=ty("facetOptions/update",(e={freezeFacetOrder:!0})=>r0(e,{freezeFacetOrder:new rV({required:!1})})),u_=ty("facetOptions/facet/enable",e=>r0(e,rW)),uQ=ty("facetOptions/facet/disable",e=>r0(e,rW)),uN={facetId:rW,captions:new rN({options:{required:!1}}),numberOfValues:new rT({required:!1,min:1}),query:new r_({required:!1,emptyAllowed:!0})},uz={path:new rB({required:!0,each:rW}),displayValue:rJ,rawValue:rJ,count:new rT({required:!0,min:0})},uB=ty("categoryFacet/selectSearchResult",e=>r0(e,{facetId:rW,value:new rN({values:uz})})),uH=ty("categoryFacetSearch/register",e=>r0(e,uN));function uY(e,t){var r;let{facetId:n,criterion:a}=t,i=null==(r=e[n])?void 0:r.request;i&&(i.sortCriteria=a)}function uW(e){e&&(e.currentValues=e.currentValues.map(e=>({...e,state:"idle"})),e.preventAutoSelect=!0)}function uG(e,t){e&&(e.numberOfValues=t)}function uJ(e,t){let r=e[t];r&&(r.request.numberOfValues=r.initialNumberOfValues,r.request.currentValues=[],r.request.preventAutoSelect=!0)}function uK(e,t,r){e.currentValues=function(e,t){if(!e.length)return[];let r=uZ(e[0],t),n=r;for(let r of e.splice(1)){let e=uZ(r,t);n.children.push(e),n=e}return n.state="selected",n.retrieveChildren=!0,[r]}(t,r),e.numberOfValues=t.length?1:r,e.preventAutoSelect=!0}function uZ(e,t){return{value:e,retrieveCount:t,children:[],state:"idle",retrieveChildren:!1}}var uX={state:new rF({required:!0}),numberOfResults:new rT({required:!0,min:0}),value:new r_({required:!0,emptyAllowed:!0}),path:new rB({required:!0,each:rW}),moreValuesAvailable:new rV({required:!1})},u0={facetId:rW,field:rW,delimitingCharacter:new r_({required:!1,emptyAllowed:!0}),filterFacetCount:new rV({required:!1}),injectionDepth:new rT({required:!1,min:0}),numberOfValues:new rT({required:!1,min:1}),sortCriteria:new rF({required:!1}),basePath:new rB({required:!1,each:rW}),filterByBasePath:new rV({required:!1})},u1=ty("categoryFacet/register",e=>r0(e,u0)),u2=ty("categoryFacet/toggleSelectValue",e=>{try{return rX(e.facetId,rW),function e(t){t.children.forEach(t=>{e(t)}),rX({state:t.state,numberOfResults:t.numberOfResults,value:t.value,path:t.path,moreValuesAvailable:t.moreValuesAvailable},uX)}(e.selection),{payload:e,error:null}}catch(t){return{payload:e,error:rZ(t)}}}),u3=ty("categoryFacet/deselectAll",e=>r0(e,u0.facetId)),u5=ty("categoryFacet/updateNumberOfValues",e=>r0(e,{facetId:u0.facetId,numberOfValues:u0.numberOfValues})),u4=ty("categoryFacet/updateSortCriterion",e=>r0(e,{facetId:u0.facetId,criterion:new rF})),u6=ty("categoryFacet/updateBasePath",e=>r0(e,{facetId:u0.facetId,basePath:new rB({each:rW})}));tP({},e=>{e.addCase(u1,(e,t)=>{let r=t.payload,{facetId:n}=r;if(n in e)return;let a={...u8,currentValues:[],preventAutoSelect:!1,type:"hierarchical",...r},i=a.numberOfValues;e[n]={request:a,initialNumberOfValues:i}}).addCase(sD.fulfilled,(e,t)=>{var r,n;return null!=(n=null==(r=t.payload)?void 0:r.categoryFacetSet)?n:e}).addCase(sO,(e,t)=>{let r=t.payload.cf||{};Object.keys(e).forEach(t=>{let n=e[t].request,a=r[t]||[];(a.length||n.currentValues.length)&&uK(n,a,e[t].initialNumberOfValues)})}).addCase(u4,(e,t)=>{var r;let{facetId:n,criterion:a}=t.payload,i=null==(r=e[n])?void 0:r.request;i&&(i.sortCriteria=a)}).addCase(u6,(e,t)=>{var r;let{facetId:n,basePath:a}=t.payload,i=null==(r=e[n])?void 0:r.request;i&&(i.basePath=[...a])}).addCase(u2,(e,t)=>{var r;let{facetId:n,selection:a,retrieveCount:i}=t.payload,o=null==(r=e[n])?void 0:r.request;if(!o)return;let{path:s}=a,l=function(e,t,r){let n=e.currentValues;for(let e of t){let t=n[0];t&&e===t.value||(t=u9(e,r),n.length=0,n.push(t)),t.retrieveChildren=!1,t.state="idle",n=t.children}return n}(o,s.slice(0,s.length-1),i);if(l.length){let e=l[0];e.retrieveChildren=!0,e.state="selected",e.children=[];return}let u=u9(a.value,i);u.state="selected",l.push(u),o.numberOfValues=1}).addCase(u3,(e,t)=>{uJ(e,t.payload)}).addCase(sT,e=>{Object.keys(e).forEach(t=>uJ(e,t))}).addCase(sV,(e,t)=>Object.keys(e).forEach(r=>{e[r].request.preventAutoSelect=!t.payload.allow})).addCase(u5,(e,t)=>{var r;let{facetId:n,numberOfValues:a}=t.payload,i=null==(r=e[n])?void 0:r.request;if(i){if(!i.currentValues.length)return uG(i,a);!function(e,t){var r;let{facetId:n,numberOfValues:a}=t,i=null==(r=e[n])?void 0:r.request.currentValues[0];if(i){for(;i.children.length&&(null==i?void 0:i.state)!=="selected";)i=i.children[0];i.retrieveCount=a}}(e,t.payload)}}).addCase(uB,(e,t)=>{let{facetId:r,value:n}=t.payload,a=e[r];if(!a)return;let i=[...n.path,n.rawValue];uK(a.request,i,a.initialNumberOfValues)}).addCase(lG.fulfilled,(e,t)=>{u7(e,t.payload.response.facets)}).addCase(lH.fulfilled,(e,t)=>{u7(e,t.payload.response.facets)}).addCase(uQ,(e,t)=>{uJ(e,t.payload)})});var u8={delimitingCharacter:";",filterFacetCount:!0,injectionDepth:1e3,numberOfValues:5,sortCriteria:"occurrences",basePath:[],filterByBasePath:!0,resultsMustMatch:"atLeastOneValue"};function u9(e,t){return{value:e,state:"idle",children:[],retrieveChildren:!0,retrieveCount:t}}function u7(e,t){t.forEach(t=>{var r;let n,a;if(!(t.facetId in e))return;let i=null==(r=e[t.facetId])?void 0:r.request;if(!i)return;let o=(n=oy(i.currentValues),a=oy(t.values),n.length!==a.length);i.currentValues=o?[]:i.currentValues,i.preventAutoSelect=!1})}function ce(e,t,r){let{facetId:n}=t;if(e[n])return;let a={...cs,...t},i=r();e[n]={options:a,isLoading:!1,response:i,initialNumberOfValues:a.numberOfValues,requestId:""}}function ct(e,t){let{facetId:r,...n}=t,a=e[r];a&&(a.options={...a.options,...n})}function cr(e,t,r){let n=e[t];n&&(n.requestId=r,n.isLoading=!0)}function cn(e,t){let r=e[t];r&&(r.isLoading=!1)}function ca(e,t,r){let{facetId:n,response:a}=t,i=e[n];i&&(i.requestId!==r||(i.isLoading=!1,i.response=a))}function ci(e,t,r){let{facetId:n}=t,a=e[n];a&&(a.requestId="",a.isLoading=!1,a.response=r(),a.options.numberOfValues=a.initialNumberOfValues,a.options.query=cs.query)}function co(e,t){Object.keys(e).forEach(r=>ci(e,{facetId:r},t))}var cs={captions:{},numberOfValues:10,query:""},cl=async(e,t,r)=>{let n=t.categoryFacetSearchSet[e].options,a=t.categoryFacetSet[e].request,{captions:i,query:o,numberOfValues:s}=n,{field:l,delimitingCharacter:u,basePath:c,filterFacetCount:d}=a,f=cu(a),p=f.length?[f]:[],h=`*${o}*`;return{url:t.configuration.search.apiBaseUrl,accessToken:t.configuration.accessToken,organizationId:t.configuration.organizationId,...t.configuration.search.authenticationProviders.length&&{authentication:t.configuration.search.authenticationProviders.join(",")},basePath:c,captions:i,numberOfValues:s,query:h,field:l,delimitingCharacter:u,ignorePaths:p,filterFacetCount:d,type:"hierarchical",...r?{}:{searchContext:(await lv(t)).request}}},cu=e=>{let t=[],r=e.currentValues[0];for(;r;)t.push(r.value),r=r.children[0];return t},cc=async(e,t,r)=>{let{captions:n,query:a,numberOfValues:i}=t.facetSearchSet[e].options,{field:o,currentValues:s,filterFacetCount:l}=t.facetSet[e].request,u=s.filter(e=>"idle"!==e.state).map(e=>e.value),c=`*${a}*`;return{url:t.configuration.search.apiBaseUrl,accessToken:t.configuration.accessToken,organizationId:t.configuration.organizationId,...t.configuration.search.authenticationProviders&&{authentication:t.configuration.search.authenticationProviders.join(",")},captions:n,numberOfValues:i,query:c,field:o,ignoreValues:u,filterFacetCount:l,type:"specific",...r?{}:{searchContext:(await lv(t)).request}}},cd=e=>async(t,{getState:r,extra:{apiClient:n,validatePayload:a}})=>{let i=r(),o;a(t,rW),o=cg(i,t)?await cc(t,i,e):await cl(t,i,e);let s=await n.facetSearch(o);return{facetId:t,response:s}},cf=tH("facetSearch/executeSearch",cd(!1)),cp=tH("facetSearch/executeSearch",cd(!0)),ch=ty("facetSearch/clearResults",e=>r0(e,{facetId:rW})),cg=(e,t)=>void 0!==e.facetSearchSet&&void 0!==e.facetSet&&void 0!==e.facetSet[t],cv={facetId:rW,value:new rN({values:{displayValue:rJ,rawValue:rJ,count:new rT({required:!0,min:0})}})},cy=ty("facetSearch/register",e=>r0(e,uN)),cm=ty("facetSearch/update",e=>r0(e,uN)),cS=ty("facetSearch/toggleSelectValue",e=>r0(e,cv)),cb=ty("facetSearch/toggleExcludeValue",e=>r0(e,cv));function cw(){return{moreValuesAvailable:!1,values:[]}}tP({},e=>{e.addCase(uH,(e,t)=>{ce(e,t.payload,cw)}).addCase(cm,(e,t)=>{ct(e,t.payload)}).addCase(cf.pending,(e,t)=>{cr(e,t.meta.arg,t.meta.requestId)}).addCase(cf.rejected,(e,t)=>{cn(e,t.meta.arg)}).addCase(cf.fulfilled,(e,t)=>{ca(e,t.payload,t.meta.requestId)}).addCase(ch,(e,{payload:{facetId:t}})=>{ci(e,{facetId:t},cw)}).addCase(lH.fulfilled,e=>{co(e,cw)})});var cC=e=>o8("analytics/facet/showMore",(t,r)=>{r0(e,rW);let n=ob(e,oC(r));return t.makeFacetShowMore(n)}),ck=e=>o8("analytics/facet/showLess",(t,r)=>{r0(e,rW);let n=ob(e,oC(r));return t.makeFacetShowLess(n)}),cO=e=>o8("analytics/facet/sortChange",(t,r)=>{r0(e,{facetId:rW,criterion:new rF({required:!0})});let{facetId:n,criterion:a}=e,i={...ob(n,oC(r)),criteria:a};return t.makeFacetUpdateSort(i)}),cI=e=>o8("analytics/facet/reset",(t,r)=>{r0(e,rW);let n=ob(e,oC(r));return t.makeFacetClearAll(n)}),cA=e=>o8("analytics/facet/select",(t,r)=>{r0(e,{facetId:rW,facetValue:rW});let n=ow(e,oC(r));return t.makeFacetSelect(n)}),cq=e=>o8("analytics/facet/exclude",(t,r)=>{r0(e,{facetId:rW,facetValue:rW});let n=ow(e,oC(r));return t.makeFacetExclude(n)}),cE=e=>o8("analytics/facet/deselect",(t,r)=>{r0(e,{facetId:rW,facetValue:rW});let n=ow(e,oC(r));return t.makeFacetDeselect(n)}),cx=e=>o8("analytics/facet/unexclude",(t,r)=>{r0(e,{facetId:rW,facetValue:rW});let n=ow(e,oC(r));return t.makeFacetUnexclude(n)}),cR=(e,t)=>({actionCause:ss.facetUpdateSort,getEventExtraPayload:r=>new oY(()=>r).getFacetUpdateSortMetadata(e,t)}),cD=e=>({actionCause:ss.facetClearAll,getEventExtraPayload:t=>new oY(()=>t).getFacetClearAllMetadata(e)}),cj=(e,t)=>({actionCause:ss.facetSelect,getEventExtraPayload:r=>new oY(()=>r).getFacetMetadata(e,t)}),cF=(e,t)=>({actionCause:ss.facetExclude,getEventExtraPayload:r=>new oY(()=>r).getFacetMetadata(e,t)}),cP=(e,t)=>({actionCause:ss.facetDeselect,getEventExtraPayload:r=>new oY(()=>r).getFacetMetadata(e,t)}),cM=(e,t)=>({actionCause:ss.facetUnexclude,getEventExtraPayload:r=>new oY(()=>r).getFacetMetadata(e,t)}),cT=(e,t)=>{var r,n;return null==(n=null==(r=e.facetOptions.facets[t])?void 0:r.enabled)||n},cU=new r_({regex:/^[a-zA-Z0-9-_]+$/}),cV=new r_({required:!0}),cL=new rB({each:new r_}),c$=new r_,c_=new rV,cQ=new rV,cN=new rT({min:0}),cz=new rT({min:1}),cB=new rV({required:!0}),cH=new rN,cY=new r_,cW=new rN({values:{captions:cH,numberOfValues:cz,query:cY}}),cG=new rN({options:{required:!1},values:{type:new r_({constrainTo:["simple"],emptyAllowed:!1,required:!0}),values:new rB({required:!0,max:25,each:new r_({emptyAllowed:!1,required:!0})})}}),cJ=new rV,cK=new rB({min:1,max:25,required:!1,each:new r_({emptyAllowed:!1,required:!0})}),cZ={value:rW,numberOfResults:new rT({min:0}),state:rW},cX={facetId:rW,field:new r_({required:!0,emptyAllowed:!0}),filterFacetCount:new rV({required:!1}),injectionDepth:new rT({required:!1,min:0}),numberOfValues:new rT({required:!1,min:1}),sortCriteria:new rF({required:!1}),resultsMustMatch:new rF({required:!1}),allowedValues:cG,customSort:cK},c0=ty("facet/register",e=>r0(e,cX)),c1=ty("facet/toggleSelectValue",e=>r0(e,{facetId:rW,selection:new rN({values:cZ})})),c2=ty("facet/toggleExcludeValue",e=>r0(e,{facetId:rW,selection:new rN({values:cZ})})),c3=ty("facet/deselectAll",e=>r0(e,rW)),c5=ty("facet/updateSortCriterion",e=>r0(e,{facetId:rW,criterion:new rF({required:!0})})),c4=ty("facet/updateNumberOfValues",e=>r0(e,{facetId:rW,numberOfValues:new rT({required:!0,min:1})})),c6=ty("facet/updateIsFieldExpanded",e=>r0(e,{facetId:rW,isFieldExpanded:new rV({required:!0})})),c8=ty("facet/updateFreezeCurrentValues",e=>r0(e,{facetId:rW,freezeCurrentValues:new rV({required:!0})}));function c9(e,t){let{dateFormat:r}=t;return e&&"object"==typeof e&&"period"in e?(li(e),function(e){let{period:t,amount:r,unit:n}=e;switch(t){case"past":case"next":return`${t}-${r}-${n}`;case"now":return t}}(e)):"string"==typeof e&&lu(e)?(li(e),e):(function(e,t){let r=le(e,t);if(!r.isValid())throw Error(`Could not parse the provided date "${e}"${t?` with the format "${t}""`:". Please provide a date format string in the configuration options. See https://day.js.org/docs/en/parse/string-format for more information."}`);lt(r)}(e,r),le(e,r).format(s7))}var c7=ty("rangeFacet/updateSortCriterion",e=>r0(e,{facetId:rW,criterion:new rF({required:!0})})),de={state:rW,start:new rT({required:!0}),end:new rT({required:!0}),endInclusive:new rV({required:!0}),numberOfResults:new rT({required:!0,min:0})},dt={start:rW,end:rW,endInclusive:new rV({required:!0}),state:rW,numberOfResults:new rT({required:!0,min:0})},dr=e=>({facetId:rW,selection:new rN("string"==typeof e.start?{values:dt}:{values:de})}),dn={start:rW,end:rW,endInclusive:new rV({required:!0}),state:rW},da={facetId:rW,field:rW,currentValues:new rB({required:!1,each:new rN({values:dn})}),generateAutomaticRanges:new rV({required:!0}),filterFacetCount:new rV({required:!1}),injectionDepth:new rT({required:!1,min:0}),numberOfValues:new rT({required:!1,min:1}),sortCriteria:new rF({required:!1}),rangeAlgorithm:new rF({required:!1})};function di(e){e.currentValues&&e.currentValues.forEach(e=>{var t,r;let{start:n,end:a}={start:c9(e.start,e),end:c9(e.end,e),endInclusive:null!=(t=e.endInclusive)&&t,state:null!=(r=e.state)?r:"idle"};if(le(lu(n)?ls(n):n).isAfter(le(lu(a)?ls(a):a)))throw Error(`The start value is greater than the end value for the date range ${e.start} to ${e.end}`)})}var ds=ty("dateFacet/register",e=>{try{return rX(e,da),di(e),{payload:e,error:null}}catch(t){return{payload:e,error:rZ(t)}}}),dl=ty("dateFacet/toggleSelectValue",e=>r0(e,{facetId:rW,selection:new rN({values:dt})})),du=ty("dateFacet/toggleExcludeValue",e=>r0(e,{facetId:rW,selection:new rN({values:dt})})),dc=ty("dateFacet/updateFacetValues",e=>{try{return rX(e,{facetId:rW,values:new rB({each:new rN({values:dt})})}),di({currentValues:e.values}),{payload:e,error:null}}catch(t){return{payload:e,error:rZ(t)}}}),dd={state:rW,start:new rT({required:!0}),end:new rT({required:!0}),endInclusive:new rV({required:!0})},df={facetId:rW,field:rW,currentValues:new rB({required:!1,each:new rN({values:dd})}),generateAutomaticRanges:new rV({required:!0}),filterFacetCount:new rV({required:!1}),injectionDepth:new rT({required:!1,min:0}),numberOfValues:new rT({required:!1,min:1}),sortCriteria:new rF({required:!1}),rangeAlgorithm:new rF({required:!1})};function dp(e){e.currentValues&&e.currentValues.forEach(({start:e,end:t})=>{if(e>t)throw Error(`The start value is greater than the end value for the numeric range ${e} to ${t}`)})}var dh=ty("numericFacet/register",e=>{try{return r0(e,df),dp(e),{payload:e,error:null}}catch(t){return{payload:e,error:rZ(t)}}}),dg=ty("numericFacet/toggleSelectValue",e=>r0(e,{facetId:rW,selection:new rN({values:de})})),dv=ty("numericFacet/toggleExcludeValue",e=>r0(e,{facetId:rW,selection:new rN({values:de})})),dy=ty("numericFacet/updateFacetValues",e=>{try{return rX(e,{facetId:rW,values:new rB({each:new rN({values:de})})}),dp({currentValues:e.values}),{payload:e,error:null}}catch(t){return{payload:e,error:rZ(t)}}}),dm=tP(nY(),e=>{e.addCase(u$,(e,t)=>({...e,...t.payload})).addCase(lH.fulfilled,e=>{e.freezeFacetOrder=!1}).addCase(lH.rejected,e=>{e.freezeFacetOrder=!1}).addCase(sD.fulfilled,(e,t)=>{var r,n;return null!=(n=null==(r=t.payload)?void 0:r.facetOptions)?n:e}).addCase(u1,(e,t)=>{e.facets[t.payload.facetId]=nH()}).addCase(c0,(e,t)=>{e.facets[t.payload.facetId]=nH()}).addCase(ds,(e,t)=>{e.facets[t.payload.facetId]=nH()}).addCase(dh,(e,t)=>{e.facets[t.payload.facetId]=nH()}).addCase(u_,(e,t)=>{e.facets[t.payload].enabled=!0}).addCase(uQ,(e,t)=>{e.facets[t.payload].enabled=!1}).addCase(sO,(e,t)=>{var r,n,a,i,o;[...Object.keys(null!=(r=t.payload.f)?r:{}),...Object.keys(null!=(n=t.payload.fExcluded)?n:{}),...Object.keys(null!=(a=t.payload.cf)?a:{}),...Object.keys(null!=(i=t.payload.nf)?i:{}),...Object.keys(null!=(o=t.payload.df)?o:{})].forEach(t=>{t in e||(e.facets[t]=nH()),e.facets[t].enabled=!0})})});function dS(e){let{facetSet:t,numericFacetSet:r,dateFacetSet:n,categoryFacetSet:a}=e;return[t,r,n,a]}new rj({field:cV,basePath:cL,delimitingCharacter:c$,facetId:cU,facetSearch:cW,filterByBasePath:c_,filterFacetCount:cQ,injectionDepth:cN,numberOfValues:cz,sortCriteria:new r_({constrainTo:["alphanumeric","occurrences"]})});var db=tP({},e=>{e.addCase(cy,(e,t)=>{ce(e,t.payload,dw)}).addCase(cm,(e,t)=>{ct(e,t.payload)}).addCase(cf.pending,(e,t)=>{cr(e,t.meta.arg,t.meta.requestId)}).addCase(cf.rejected,(e,t)=>{cn(e,t.meta.arg)}).addCase(cf.fulfilled,(e,t)=>{ca(e,t.payload,t.meta.requestId)}).addCase(ch,(e,{payload:t})=>{ci(e,t,dw)}).addCase(lH.fulfilled,e=>{co(e,dw)})});function dw(){return{moreValuesAvailable:!1,values:[]}}var dC=()=>o7("analytics/productListing/load",e=>e.makeInterfaceLoad(),e=>new oX(e));ty("productlisting/setUrl",e=>r0(e,{url:new r_({required:!0,url:!0})})),ty("productlisting/setAdditionalFields",e=>r0(e,{additionalFields:new rB({required:!0,each:new r_({required:!0,emptyAllowed:!1})})}));var dk=tH("productlisting/fetch",async(e,{getState:t,dispatch:r,rejectWithValue:n,extra:a})=>{let i=t(),{apiClient:o}=a,s=await o.getProducts(await dO(i));return n_(s)?(r(s5(s.error)),n(s.error)):{response:s.success,analyticsAction:dC()}}),dO=async e=>{var t,r,n,a,i,o,s,l;let u=lh([...lg(null!=(i=e.facetSet)?i:{}),...lg(null!=(o=e.numericFacetSet)?o:{}),...lg(null!=(s=e.dateFacetSet)?s:{}),...lg(null!=(l=e.categoryFacetSet)?l:{})],null!=(a=e.facetOrder)?a:[]),c=await o_(e.configuration.analytics);return{accessToken:e.configuration.accessToken,organizationId:e.configuration.organizationId,platformUrl:e.configuration.platformUrl,url:null==(t=e.productListing)?void 0:t.url,...e.configuration.analytics.enabled&&c?{clientId:c}:{},...(null==(r=e.productListing.additionalFields)?void 0:r.length)?{additionalFields:e.productListing.additionalFields}:{},...e.productListing.advancedParameters&&e.productListing.advancedParameters.debug?{advancedParameters:e.productListing.advancedParameters||{}}:{},...u.length&&{facets:{requests:u}},...e.pagination&&{pagination:{numberOfValues:e.pagination.numberOfResults,page:Math.ceil(e.pagination.firstResult/(e.pagination.numberOfResults||1))+1}},...((null==(n=e.sort)?void 0:n.by)||nS.Relevance)!==nS.Relevance&&{sort:e.sort},...e.context&&{userContext:e.context.contextValues}}},dI=tP({},e=>{e.addCase(c0,(e,t)=>{var r;let{facetId:n}=t.payload;n in e||(e[n]={request:(r=t.payload,{...dE,type:"specific",currentValues:[],freezeCurrentValues:!1,isFieldExpanded:!1,preventAutoSelect:!1,...r}),hasBreadcrumbs:!0})}).addCase(sD.fulfilled,(e,t)=>{if(t.payload&&0!==Object.keys(t.payload.facetSet).length)return t.payload.facetSet}).addCase(sO,(e,t)=>{let r=t.payload.f||{},n=t.payload.fExcluded||{};Object.keys(e).forEach(t=>{let{request:a}=e[t],i=r[t]||[],o=n[t]||[],s=i.length+o.length,l=a.currentValues.filter(e=>!i.includes(e.value)&&!o.includes(e.value));a.currentValues=[...i.map(dR),...o.map(dD),...l.map(dj)],a.preventAutoSelect=s>0,a.numberOfValues=Math.max(s,a.numberOfValues)})}).addCase(c1,(e,t)=>{var r;let{facetId:n,selection:a}=t.payload,i=null==(r=e[n])?void 0:r.request;if(!i)return;i.preventAutoSelect=!0;let o=i.currentValues.find(e=>e.value===a.value);if(!o){dA(i,a);return}let s="selected"===o.state;o.state=s?"idle":"selected",i.freezeCurrentValues=!0}).addCase(c2,(e,t)=>{var r;let{facetId:n,selection:a}=t.payload,i=null==(r=e[n])?void 0:r.request;if(!i)return;i.preventAutoSelect=!0;let o=i.currentValues.find(e=>e.value===a.value);if(!o){dA(i,a);return}let s="excluded"===o.state;o.state=s?"idle":"excluded",i.freezeCurrentValues=!0}).addCase(c8,(e,t)=>{var r;let{facetId:n,freezeCurrentValues:a}=t.payload,i=null==(r=e[n])?void 0:r.request;i&&(i.freezeCurrentValues=a)}).addCase(c3,(e,t)=>{var r;uW(null==(r=e[t.payload])?void 0:r.request)}).addCase(sT,e=>{Object.values(e).filter(e=>e.hasBreadcrumbs).forEach(({request:e})=>uW(e))}).addCase(sU,e=>{Object.values(e).filter(e=>!e.hasBreadcrumbs).forEach(({request:e})=>uW(e))}).addCase(sV,(e,t)=>Object.values(e).forEach(e=>{e.request.preventAutoSelect=!t.payload.allow})).addCase(c5,(e,t)=>{uY(e,t.payload)}).addCase(c4,(e,t)=>{var r;let{facetId:n,numberOfValues:a}=t.payload;uG(null==(r=e[n])?void 0:r.request,a)}).addCase(c6,(e,t)=>{var r;let{facetId:n,isFieldExpanded:a}=t.payload,i=null==(r=e[n])?void 0:r.request;i&&(i.isFieldExpanded=a)}).addCase(lH.fulfilled,(e,t)=>{t.payload.response.facets.forEach(t=>{var r;return dq(null==(r=e[t.facetId])?void 0:r.request,t)})}).addCase(dk.fulfilled,(e,t)=>{var r,n;((null==(n=null==(r=t.payload.response)?void 0:r.facets)?void 0:n.results)||[]).forEach(t=>{var r;return dq(null==(r=e[t.facetId])?void 0:r.request,t)})}).addCase(lG.fulfilled,(e,t)=>{t.payload.response.facets.forEach(t=>{var r;return dq(null==(r=e[t.facetId])?void 0:r.request,t)})}).addCase(cS,(e,t)=>{var r;let{facetId:n,value:a}=t.payload,i=null==(r=e[n])?void 0:r.request;if(!i)return;let{rawValue:o}=a,{currentValues:s}=i,l=s.find(e=>e.value===o);if(l){l.state="selected";return}dA(i,dR(o)),i.freezeCurrentValues=!0,i.preventAutoSelect=!0}).addCase(cb,(e,t)=>{var r;let{facetId:n,value:a}=t.payload,i=null==(r=e[n])?void 0:r.request;if(!i)return;let{rawValue:o}=a,{currentValues:s}=i,l=s.find(e=>e.value===o);if(l){l.state="excluded";return}dA(i,dD(o)),i.freezeCurrentValues=!0,i.preventAutoSelect=!0}).addCase(uQ,(e,t)=>{if(!(t.payload in e))return;let{request:r}=e[t.payload];uW(r)})});function dA(e,t){let{currentValues:r}=e,n=r.findIndex(e=>"idle"===e.state),a=-1===n?r.length:n,i=r.slice(0,a),o=r.slice(a+1);e.currentValues=[...i,t,...o],e.numberOfValues=e.currentValues.length}function dq(e,t){e&&(e.currentValues=t.values.map(dx),e.freezeCurrentValues=!1,e.preventAutoSelect=!1)}var dE={filterFacetCount:!0,injectionDepth:1e3,numberOfValues:8,sortCriteria:"automatic",resultsMustMatch:"atLeastOneValue"};function dx(e){let{value:t,state:r}=e;return{value:t,state:r}}function dR(e){return{value:e,state:"selected"}}function dD(e){return{value:e,state:"excluded"}}function dj(e){return{...e,state:"idle"}}var dF=e=>"selected"===e.state,dP=e=>"excluded"===e.state,dM=(e,t)=>{let r={facetId:e,facetValue:t.value};return dF(t)?cE(r):cA(r)},dT=(e,t)=>dF(t)?cP(e,t.value):cj(e,t.value),dU=(e,t)=>{let r={facetId:e,facetValue:t.value};return dP(t)?cx(r):cq(r)},dV=(e,t)=>dP(t)?cM(e,t.value):cF(e,t.value),dL={facetId:rW,selection:new rN({values:cZ})},d$=tH("facet/executeToggleSelect",({facetId:e,selection:t},r)=>{let{dispatch:n,extra:{validatePayload:a}}=r;a({facetId:e,selection:t},dL),n(c1({facetId:e,selection:t})),n(u$())}),d_=tH("facet/executeToggleExclude",({facetId:e,selection:t},r)=>{let{dispatch:n,extra:{validatePayload:a}}=r;a({facetId:e,selection:t},dL),n(c2({facetId:e,selection:t})),n(u$())}),dQ=["allValues","atLeastOneValue"],dN=["score","alphanumeric","alphanumericDescending","occurrences","automatic"],dz=new rj({facetId:cU,field:cV,filterFacetCount:cQ,injectionDepth:cN,numberOfValues:cz,sortCriteria:new r_({constrainTo:dN}),resultsMustMatch:new r_({constrainTo:dQ}),facetSearch:cW}),dB=new rj({facetId:cU,field:cV,filterFacetCount:cQ,injectionDepth:cN,numberOfValues:cz,sortCriteria:new r_({constrainTo:dN}),resultsMustMatch:new r_({constrainTo:dQ}),facetSearch:cW,allowedValues:cG,hasBreadcrumbs:cJ,customSort:cK});function dH(e,t){e.addReducers({facetSet:dI,configuration:un,facetSearchSet:db,search:l9});let{dispatch:r}=e,n=function(e,t,r=dz){e.addReducers({facetSet:dI,facetOptions:dm,configuration:un,facetSearchSet:db});let{dispatch:n}=e,a=uk(e),i=function(e,t){let{state:r,logger:n}=e,{field:a,facetId:i}=t;return i||function(e,t){let r,{field:n,state:a}=e;if(!function(e){let{field:t,state:r}=e;return dS(r).some(e=>e&&t in e)}(e))return n;let i=`${n}_`,o=(null!=(r=dS(a).map(e=>Object.keys(e||{})).reduce((e,t)=>e.concat(t),[]).map(e=>{let t=parseInt(e.split(i)[1],10);return Number.isNaN(t)?0:t}).sort().pop())?r:0)+1;return function(e,t){let r=`A facet with field "${e}" already exists.
  To avoid unexpected behaviour, configure the #id option on the facet controller.`;t.warn(r)}(n,t),`${i}${o}`}({field:a,state:r},n)}(e,t.options),o={...dE,...function(e,t){let{[e]:r,...n}=t;return n}("facetSearch",t.options),field:t.options.field,facetId:i},s={facetSearch:{...cs,...t.options.facetSearch},...o};r2(e,r,s,"buildFacet");let l=()=>oh(e.state,i),u=()=>og(e.state,i),c=()=>ov(e.state),d=()=>cT(e.state,i),f=()=>{let{currentValues:e}=l();return e.filter(e=>"idle"!==e.state).length},p=()=>{let{currentValues:e}=l(),t=s.numberOfValues,r=!!e.find(e=>"idle"===e.state);return t<e.length&&r};return n(c0(o)),{...a,toggleSelect:e=>n(d$({facetId:s.facetId,selection:e})),toggleExclude:e=>n(d_({facetId:s.facetId,selection:e})),toggleSingleSelect:function(e){"idle"===e.state&&n(c3(i)),this.toggleSelect(e)},toggleSingleExclude:function(e){"idle"===e.state&&n(c3(i)),this.toggleExclude(e)},isValueSelected:dF,isValueExcluded:dP,deselectAll(){n(c3(i)),n(u$())},sortBy(e){n(c5({facetId:i,criterion:e})),n(u$())},isSortedBy(e){return this.state.sortCriterion===e},showMoreValues(){let e=l().numberOfValues,t=s.numberOfValues;n(c4({facetId:i,numberOfValues:e+(t-e%t)})),n(c6({facetId:i,isFieldExpanded:!0})),n(u$())},showLessValues(){let e=Math.max(s.numberOfValues,f());n(c4({facetId:i,numberOfValues:e})),n(c6({facetId:i,isFieldExpanded:!1})),n(u$())},enable(){n(u_(i))},disable(){n(uQ(i))},get state(){let e=l(),t=u(),r=c(),n=d(),a;a="object"==typeof e.sortCriteria?"descending"===e.sortCriteria.order?"alphanumericDescending":"alphanumeric":e.sortCriteria;let o=t?t.values:[],s=o.some(e=>"idle"!==e.state),f=!!t&&t.moreValuesAvailable;return{facetId:i,values:o,sortCriterion:a,resultsMustMatch:e.resultsMustMatch,isLoading:r,hasActiveValues:s,canShowMoreValues:f,canShowLessValues:p(),enabled:n}}}}(e,{...t,options:{...t.options,...t.options.allowedValues&&{allowedValues:{type:"simple",values:t.options.allowedValues}}}},dB),a=()=>n.state.facetId,i=(()=>{let{facetSearch:n}=t.options;return function(e,t){let{dispatch:r}=e,{options:n,select:a,exclude:i,isForFieldSuggestions:o}=t,{facetId:s}=n;r(cy(n));let l=function(e,t){let r=e.dispatch,{options:n,getFacetSearch:a}=t,{facetId:i}=n;return{updateText(e){r(cm({facetId:i,query:e,numberOfValues:a().initialNumberOfValues}))},showMoreResults(){let{initialNumberOfValues:e,options:n}=a();r(cm({facetId:i,numberOfValues:n.numberOfValues+e})),r(t.isForFieldSuggestions?cp(i):cf(i))},search(){r(t.isForFieldSuggestions?cp(i):cf(i))},clear(){r(ch({facetId:i}))},updateCaptions(e){r(cm({facetId:i,captions:e}))},get state(){let{response:e,isLoading:t,options:r}=a(),{query:n}=r,i=e.values;return{...e,values:i,isLoading:t,query:n}}}}(e,{options:n,getFacetSearch:()=>e.state.facetSearchSet[s],isForFieldSuggestions:o});return{...l,select(e){r(cS({facetId:s,value:e})),a(e)},exclude(e){r(cb({facetId:s,value:e})),i(e)},singleSelect(e){r(c3(s)),r(cS({facetId:s,value:e})),a(e)},singleExclude(e){r(c3(s)),r(cb({facetId:s,value:e})),i(e)},get state(){let{values:e}=l.state;return{...l.state,values:e.map(({count:e,displayValue:t,rawValue:r})=>({count:e,displayValue:t,rawValue:r}))}}}}(e,{options:{facetId:a(),...n},select:e=>{r(u$()),r(lH({legacy:cA({facetId:a(),facetValue:e.rawValue}),next:cj(a(),e.rawValue)}))},exclude:e=>{r(u$()),r(lH({legacy:cq({facetId:a(),facetValue:e.rawValue}),next:cF(a(),e.rawValue)}))},isForFieldSuggestions:!1})})(),{state:o,...s}=i;return{...n,facetSearch:s,toggleSelect(e){n.toggleSelect(e),r(lH({legacy:dM(a(),e),next:dT(a(),e)}))},toggleExclude(e){n.toggleExclude(e),r(lH({legacy:dU(a(),e),next:dV(a(),e)}))},deselectAll(){n.deselectAll(),r(lH({legacy:cI(a()),next:cD(a())}))},sortBy(e){n.sortBy(e),r(lH({legacy:cO({facetId:a(),criterion:e}),next:cR(a(),e)}))},isSortedBy(e){return this.state.sortCriterion===e},showMoreValues(){n.showMoreValues(),r(lG({legacy:cC(a())}))},showLessValues(){n.showLessValues(),r(lG({legacy:ck(a())}))},get state(){return{...n.state,facetSearch:i.state}}}}var dY=ty("rangeFacet/executeToggleSelect",e=>r0(e,dr(e.selection))),dW=ty("rangeFacet/executeToggleExclude",e=>r0(e,dr(e.selection))),dG={facetId:rW,selection:new rN({values:dt})};tH("dateFacet/executeToggleSelect",(e,{dispatch:t,extra:{validatePayload:r}})=>{r(e,dG),t(dl(e)),t(dY(e)),t(u$())}),tH("dateFacet/executeToggleExclude",(e,{dispatch:t,extra:{validatePayload:r}})=>{r(e,dG),t(du(e)),t(dW(e)),t(u$())});var dJ={filterFacetCount:!0,injectionDepth:1e3,numberOfValues:8,sortCriteria:"ascending",rangeAlgorithm:"even",resultsMustMatch:"atLeastOneValue"};function dK(e,t){let{request:r}=t,{facetId:n}=r;if(n in e)return;let a=d4(r);r.numberOfValues=a,e[n]=t}function dZ(e,t,r){var n;let a=null==(n=e[t])?void 0:n.request;a&&(a.currentValues=r,a.numberOfValues=d4(a))}function dX(e,t,r){var n;let a=null==(n=e[t])?void 0:n.request;if(!a)return;let i=d5(a.currentValues,r);if(!i)return;let o="selected"===i.state;i.state=o?"idle":"selected",a.preventAutoSelect=!0}function d0(e,t,r){var n;let a=null==(n=e[t])?void 0:n.request;if(!a)return;let i=d5(a.currentValues,r);if(!i)return;let o="excluded"===i.state;i.state=o?"idle":"excluded",a.preventAutoSelect=!0}function d1(e,t){var r;let n=null==(r=e[t])?void 0:r.request;n&&n.currentValues.forEach(e=>e.state="idle")}function d2(e,t){Object.entries(e).forEach(([e,{request:r}])=>{let n=t[e]||[];r.currentValues.forEach(e=>{let t=!!d5(n,e);return e.state=t?"selected":"idle",e});let a=n.filter(e=>!d5(r.currentValues,e)),i=r.currentValues;i.push(...a),r.numberOfValues=Math.max(r.numberOfValues,i.length)})}function d3(e,t,r){t.forEach(t=>{var n;let a=null==(n=e[t.facetId])?void 0:n.request;if(!a)return;let i=r(t.values);a.currentValues=i,a.preventAutoSelect=!1})}function d5(e,t){let{start:r,end:n}=t;return e.find(e=>e.start===r&&e.end===n)}function d4(e){let{generateAutomaticRanges:t,currentValues:r,numberOfValues:n}=e;return t?Math.max(n,r.length):r.length}function d6(e){return e.map(e=>{let{numberOfResults:t,...r}=e;return r})}tP({},e=>{e.addCase(ds,(e,t)=>{let{payload:r}=t;dK(e,{request:{...dJ,currentValues:[],preventAutoSelect:!1,type:"dateRange",...r}})}).addCase(sD.fulfilled,(e,t)=>{var r,n;return null!=(n=null==(r=t.payload)?void 0:r.dateFacetSet)?n:e}).addCase(sO,(e,t)=>{d2(e,t.payload.df||{})}).addCase(dl,(e,t)=>{let{facetId:r,selection:n}=t.payload;dX(e,r,n)}).addCase(du,(e,t)=>{let{facetId:r,selection:n}=t.payload;d0(e,r,n)}).addCase(dc,(e,t)=>{let{facetId:r,values:n}=t.payload;dZ(e,r,n)}).addCase(c3,(e,t)=>{d1(e,t.payload)}).addCase(sT,e=>{Object.keys(e).forEach(t=>{d1(e,t)})}).addCase(c7,(e,t)=>{uY(e,t.payload)}).addCase(lH.fulfilled,(e,t)=>{d3(e,t.payload.response.facets,d6)}).addCase(dk.fulfilled,(e,t)=>{var r,n;d3(e,(null==(n=null==(r=t.payload.response)?void 0:r.facets)?void 0:n.results)||[],d6)}).addCase(uQ,(e,t)=>{d1(e,t.payload)})});var d8=["idle","selected","excluded"],d9=["ascending","descending"],d7=["even","equiprobable"],fe={start:new r_,end:new r_,endInclusive:new rV,state:new r_({constrainTo:d8})};function ft(e){return e.map(e=>{let{numberOfResults:t,...r}=e;return r})}new rj({facetId:cU,field:cV,generateAutomaticRanges:cB,filterFacetCount:cQ,injectionDepth:cN,numberOfValues:cz,currentValues:new rB({each:new rN({values:fe})}),sortCriteria:new r_({constrainTo:d9}),rangeAlgorithm:new r_({constrainTo:d7})}),tP({},e=>{e.addCase(dh,(e,t)=>{let{payload:r}=t;dK(e,{request:{...dJ,currentValues:[],preventAutoSelect:!1,type:"numericalRange",...r}})}).addCase(sD.fulfilled,(e,t)=>{var r,n;return null!=(n=null==(r=t.payload)?void 0:r.numericFacetSet)?n:e}).addCase(sO,(e,t)=>{d2(e,t.payload.nf||{})}).addCase(dg,(e,t)=>{let{facetId:r,selection:n}=t.payload;dX(e,r,n)}).addCase(dv,(e,t)=>{let{facetId:r,selection:n}=t.payload;d0(e,r,n)}).addCase(dy,(e,t)=>{let{facetId:r,values:n}=t.payload;dZ(e,r,n)}).addCase(c3,(e,t)=>{d1(e,t.payload)}).addCase(sT,e=>{Object.keys(e).forEach(t=>{d1(e,t)})}).addCase(c7,(e,t)=>{uY(e,t.payload)}).addCase(lH.fulfilled,(e,t)=>{d3(e,t.payload.response.facets,ft)}).addCase(dk.fulfilled,(e,t)=>{var r,n;d3(e,(null==(n=null==(r=t.payload.response)?void 0:r.facets)?void 0:n.results)||[],ft)}).addCase(uQ,(e,t)=>{d1(e,t.payload)})});var fr={facetId:rW,selection:new rN({values:de})};tH("numericFacet/executeToggleSelect",(e,{dispatch:t,extra:{validatePayload:r}})=>{r(e,fr),t(dg(e)),t(dY(e)),t(u$())}),tH("numericFacet/executeToggleExclude",(e,{dispatch:t,extra:{validatePayload:r}})=>{r(e,fr),t(dv(e)),t(dW(e)),t(u$())});var fn={start:new rT,end:new rT,endInclusive:new rV,state:new r_({constrainTo:d8})};new rj({facetId:cU,field:cV,generateAutomaticRanges:cB,filterFacetCount:cQ,injectionDepth:cN,numberOfValues:cz,currentValues:new rB({each:new rN({values:fn})}),sortCriteria:new r_({constrainTo:d9}),resultsMustMatch:new r_({constrainTo:dQ}),rangeAlgorithm:new r_({constrainTo:d7})});var fa=e=>{let t=e.facetOrder&&e.commerceFacetSet?e.facetOrder.map(t=>e.commerceFacetSet[t].request).filter(e=>e.values.length>0):[],{view:r,user:n,...a}=e.commerceContext;return{accessToken:e.configuration.accessToken,url:e.configuration.platformUrl,organizationId:e.configuration.organizationId,...a,context:{user:n,view:r,cart:e.cart.cartItems.map(t=>e.cart.cart[t])},facets:t,...e.commercePagination&&{page:e.commercePagination.page},...e.commerceSort&&{sort:function(e){if(e)return e.by===nS.Relevance?{sortCriteria:nS.Relevance}:{sortCriteria:nS.Fields,fields:e.fields.map(({name:e,direction:t})=>({field:e,direction:t}))}}(e.commerceSort.appliedSort)}}},fi=()=>o9("analytics/commerce/productListing/load",e=>e.makeInterfaceLoad(),e=>new oK(e)),fo=tH("commerce/productListing/fetch",async(e,{getState:t,dispatch:r,rejectWithValue:n,extra:a})=>{let i=t(),{apiClient:o}=a,s=await o.getProductListing(fa(i));return n_(s)?(r(s5(s.error)),n(s.error)):{response:s.success,analyticsAction:fi()}}),fs=tH("commerce/search/executeSearch",async(e,{getState:t,dispatch:r,rejectWithValue:n,extra:a})=>{var i;let o=t(),{apiClient:s}=a,l=await s.search({...fa(o),query:null==(i=o.commerceQuery)?void 0:i.query});return n_(l)?(r(s5(l.error)),n(l.error)):{response:l.success,analyticsAction:fi()}});function fl(e,t){return t.payload.response.facets.map(e=>e.facetId)}tP([],e=>{e.addCase(lH.fulfilled,fl).addCase(fo.fulfilled,fl).addCase(fs.fulfilled,fl).addCase(sD.fulfilled,(e,t)=>{var r,n;return null!=(n=null==(r=t.payload)?void 0:r.facetOrder)?n:e})});var fu=Object.getOwnPropertyNames,fc=Object.getOwnPropertySymbols,fd=Object.prototype.hasOwnProperty;function ff(e,t){return function(r,n,a){return e(r,n,a)&&t(r,n,a)}}function fp(e){return function(t,r,n){if(!t||!r||"object"!=typeof t||"object"!=typeof r)return e(t,r,n);var a=n.cache,i=a.get(t),o=a.get(r);if(i&&o)return i===r&&o===t;a.set(t,r),a.set(r,t);var s=e(t,r,n);return a.delete(t),a.delete(r),s}}function fh(e){return fu(e).concat(fc(e))}var fg=Object.hasOwn||function(e,t){return fd.call(e,t)};function fv(e,t){return e||t?e===t:e===t||e!=e&&t!=t}var fy="_owner",fm=Object.getOwnPropertyDescriptor,fS=Object.keys;function fb(e,t,r){var n=e.length;if(t.length!==n)return!1;for(;n-- >0;)if(!r.equals(e[n],t[n],n,n,e,t,r))return!1;return!0}function fw(e,t){return fv(e.getTime(),t.getTime())}function fC(e,t,r){if(e.size!==t.size)return!1;for(var n,a,i={},o=e.entries(),s=0;(n=o.next())&&!n.done;){for(var l=t.entries(),u=!1,c=0;(a=l.next())&&!a.done;){var d=n.value,f=d[0],p=d[1],h=a.value,g=h[0],v=h[1];!u&&!i[c]&&(u=r.equals(f,g,s,c,e,t,r)&&r.equals(p,v,f,g,e,t,r))&&(i[c]=!0),c++}if(!u)return!1;s++}return!0}function fk(e,t,r){var n,a=fS(e),i=a.length;if(fS(t).length!==i)return!1;for(;i-- >0;)if((n=a[i])===fy&&(e.$$typeof||t.$$typeof)&&e.$$typeof!==t.$$typeof||!fg(t,n)||!r.equals(e[n],t[n],n,n,e,t,r))return!1;return!0}function fO(e,t,r){var n,a,i,o=fh(e),s=o.length;if(fh(t).length!==s)return!1;for(;s-- >0;)if((n=o[s])===fy&&(e.$$typeof||t.$$typeof)&&e.$$typeof!==t.$$typeof||!fg(t,n)||!r.equals(e[n],t[n],n,n,e,t,r)||(a=fm(e,n),i=fm(t,n),(a||i)&&(!a||!i||a.configurable!==i.configurable||a.enumerable!==i.enumerable||a.writable!==i.writable)))return!1;return!0}function fI(e,t){return fv(e.valueOf(),t.valueOf())}function fA(e,t){return e.source===t.source&&e.flags===t.flags}function fq(e,t,r){if(e.size!==t.size)return!1;for(var n,a,i={},o=e.values();(n=o.next())&&!n.done;){for(var s=t.values(),l=!1,u=0;(a=s.next())&&!a.done;)!l&&!i[u]&&(l=r.equals(n.value,a.value,n.value,a.value,e,t,r))&&(i[u]=!0),u++;if(!l)return!1}return!0}function fE(e,t){var r=e.length;if(t.length!==r)return!1;for(;r-- >0;)if(e[r]!==t[r])return!1;return!0}var fx=Array.isArray,fR="function"==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView:null,fD=Object.assign,fj=Object.prototype.toString.call.bind(Object.prototype.toString);function fF(e){void 0===e&&(e={});var t,r,n,a,i,o,s,l,u,c=e.circular,d=e.createInternalComparator,f=e.createState,p=e.strict,h=(r=(t=function(e){var t=e.circular,r=e.createCustomConfig,n=e.strict,a={areArraysEqual:n?fO:fb,areDatesEqual:fw,areMapsEqual:n?ff(fC,fO):fC,areObjectsEqual:n?fO:fk,arePrimitiveWrappersEqual:fI,areRegExpsEqual:fA,areSetsEqual:n?ff(fq,fO):fq,areTypedArraysEqual:n?fO:fE};if(r&&(a=fD({},a,r(a))),t){var i=fp(a.areArraysEqual),o=fp(a.areMapsEqual),s=fp(a.areObjectsEqual),l=fp(a.areSetsEqual);a=fD({},a,{areArraysEqual:i,areMapsEqual:o,areObjectsEqual:s,areSetsEqual:l})}return a}(e)).areArraysEqual,n=t.areDatesEqual,a=t.areMapsEqual,i=t.areObjectsEqual,o=t.arePrimitiveWrappersEqual,s=t.areRegExpsEqual,l=t.areSetsEqual,u=t.areTypedArraysEqual,function(e,t,c){if(e===t)return!0;if(null==e||null==t||"object"!=typeof e||"object"!=typeof t)return e!=e&&t!=t;var d=e.constructor;if(d!==t.constructor)return!1;if(d===Object)return i(e,t,c);if(fx(e))return r(e,t,c);if(null!=fR&&fR(e))return u(e,t,c);if(d===Date)return n(e,t,c);if(d===RegExp)return s(e,t,c);if(d===Map)return a(e,t,c);if(d===Set)return l(e,t,c);var f=fj(e);return"[object Date]"===f?n(e,t,c):"[object RegExp]"===f?s(e,t,c):"[object Map]"===f?a(e,t,c):"[object Set]"===f?l(e,t,c):"[object Object]"===f?"function"!=typeof e.then&&"function"!=typeof t.then&&i(e,t,c):"[object Arguments]"===f?i(e,t,c):("[object Boolean]"===f||"[object Number]"===f||"[object String]"===f)&&o(e,t,c)}),g=d?d(h):function(e,t,r,n,a,i,o){return h(e,t,o)};return function(e){var t=e.circular,r=e.comparator,n=e.createState,a=e.equals,i=e.strict;if(n)return function(e,o){var s=n(),l=s.cache;return r(e,o,{cache:void 0===l?t?new WeakMap:void 0:l,equals:a,meta:s.meta,strict:i})};if(t)return function(e,t){return r(e,t,{cache:new WeakMap,equals:a,meta:void 0,strict:i})};var o={cache:void 0,equals:a,meta:void 0,strict:i};return function(e,t){return r(e,t,o)}}({circular:void 0!==c&&c,comparator:h,createState:f,equals:g,strict:void 0!==p&&p})}function fP(e,t){return e.length===t.length&&e.every(e=>-1!==t.findIndex(t=>fM(e,t)))}fF(),fF({strict:!0}),fF({circular:!0}),fF({circular:!0,strict:!0}),fF({createInternalComparator:function(){return fv}}),fF({strict:!0,createInternalComparator:function(){return fv}}),fF({circular:!0,createInternalComparator:function(){return fv}}),fF({circular:!0,createInternalComparator:function(){return fv},strict:!0});var fM=fF({createCustomConfig:e=>({...e,areArraysEqual:fP})}),fT=tP(au({}),e=>{e.addCase(sR,(e,t)=>fU(e,t.payload)?void 0:t.payload)}),fU=(e,t)=>fV(e.context,t.context)&&fL(e.dictionaryFieldContext,t.dictionaryFieldContext)&&fG(e.advancedSearchQueries,t.advancedSearchQueries)&&f$(e.tabSet,t.tabSet)&&fQ(e.staticFilterSet,t.staticFilterSet)&&fz(e.facetSet,t.facetSet)&&fz(e.dateFacetSet,t.dateFacetSet)&&fz(e.numericFacetSet,t.numericFacetSet)&&fH(e.automaticFacetSet,t.automaticFacetSet)&&fB(e.categoryFacetSet,t.categoryFacetSet)&&fY(e.pagination,t.pagination)&&fW(e.query,t.query)&&fJ(e,t)&&fK(e.pipeline,t.pipeline)&&fZ(e.searchHub,t.searchHub)&&fX(e.facetOrder,t.facetOrder)&&f0(e.debug,t.debug),fV=(e,t)=>JSON.stringify(e.contextValues)===JSON.stringify(t.contextValues),fL=(e,t)=>JSON.stringify(e.contextValues)===JSON.stringify(t.contextValues),f$=(e,t)=>{let r=f_(e),n=f_(t);return(null==r?void 0:r.id)===(null==n?void 0:n.id)},f_=e=>Object.values(e).find(e=>e.isActive),fQ=(e,t)=>{for(let[r,n]of Object.entries(t)){if(!e[r])return!1;let t=fN(e[r]),a=fN(n);if(JSON.stringify(t)!==JSON.stringify(a))return!1}return!0},fN=e=>e.values.filter(e=>"idle"!==e.state),fz=(e,t)=>{for(let[r,n]of Object.entries(t)){if(!e[r])return!1;let t=e[r].request.currentValues.filter(e=>"idle"!==e.state),a=n.request.currentValues.filter(e=>"idle"!==e.state);if(JSON.stringify(t)!==JSON.stringify(a))return!1}return!0},fB=(e,t)=>{var r;for(let[n,a]of Object.entries(t)){if(!e[n])return!1;let t=oy(null==(r=e[n])?void 0:r.request.currentValues).map(({value:e})=>e),i=oy(null==a?void 0:a.request.currentValues).map(({value:e})=>e);if(JSON.stringify(t)!==JSON.stringify(i))return!1}return!0},fH=(e,t)=>{for(let[r,n]of Object.entries(t.set)){if(!e.set[r])return!1;let t=e.set[r].response.values.filter(e=>"idle"!==e.state),a=n.response.values.filter(e=>"idle"!==e.state);if(JSON.stringify(t)!==JSON.stringify(a))return!1}return!0},fY=(e,t)=>e.firstResult===t.firstResult&&e.numberOfResults===t.numberOfResults,fW=(e,t)=>JSON.stringify(e)===JSON.stringify(t),fG=(e,t)=>JSON.stringify(e)===JSON.stringify(t),fJ=(e,t)=>e.sortCriteria===t.sortCriteria,fK=(e,t)=>e===t,fZ=(e,t)=>e===t,fX=(e,t)=>(function(e,t,r=(e,t)=>e===t){return e.length===t.length&&-1===e.findIndex((e,n)=>!r(t[n],e))})(e,t),f0=(e,t)=>e===t;(e=>{let{actionTypes:t,reducer:r}=e,n=aa();return(e=n,a)=>{switch(a.type){case t.undo:return ai(e);case t.redo:return ao(e);case t.snapshot:return as({state:e,reducer:r,action:a});default:return e}}})({actionTypes:{redo:sx.type,undo:sE.type,snapshot:sR.type},reducer:fT});var f1=new rT({min:1,default:8,required:!1}),f2={desiredCount:new rT({min:1,max:10,default:5,required:!1}),numberOfValues:f1},f3=ty("automaticFacet/setOptions",e=>r0(e,f2)),f5=ty("automaticFacet/deselectAll",e=>r0(e,rW)),f4=ty("automaticFacet/toggleSelectValue",e=>r0(e,{field:rW,selection:new rN({values:cZ})})),f6=tP(nK(),e=>{e.addCase(sW,(e,t)=>{let r=f9(e),n=t.payload;e.defaultNumberOfResults=e.numberOfResults=n,e.firstResult=(r-1)*n}).addCase(sG,(e,t)=>{e.numberOfResults=t.payload,e.firstResult=0}).addCase(ur,e=>{e.firstResult=0}).addCase(sJ,(e,t)=>{var r;let n=t.payload;e.firstResult=(n-1)*e.numberOfResults}).addCase(sK,(e,t)=>{var r;let n=t.payload;e.firstResult=(n-1)*e.numberOfResults}).addCase(sX,e=>{var t;let r=f9(e);e.firstResult=(Math.max(r-1,1)-1)*e.numberOfResults}).addCase(sZ,e=>{var t;let r=Math.min(f9(e)+1,function(e){let{totalCountFiltered:t,numberOfResults:r}=e;return pe(t,r)}(e));e.firstResult=(r-1)*e.numberOfResults}).addCase(sD.fulfilled,(e,t)=>{t.payload&&(e.numberOfResults=t.payload.pagination.numberOfResults,e.firstResult=t.payload.pagination.firstResult)}).addCase(sO,(e,t)=>{var r,n;e.firstResult=null!=(r=t.payload.firstResult)?r:e.firstResult,e.numberOfResults=null!=(n=t.payload.numberOfResults)?n:e.defaultNumberOfResults}).addCase(lH.fulfilled,(e,t)=>{let{response:r}=t.payload;e.totalCountFiltered=r.totalCountFiltered}).addCase(dk.fulfilled,(e,t)=>{let{response:r}=t.payload;e.totalCountFiltered=r.pagination.totalCount}).addCase(c3,e=>{f8(e)}).addCase(du,e=>{f8(e)}).addCase(c2,e=>{f8(e)}).addCase(dv,e=>{f8(e)}).addCase(cb,e=>{f8(e)}).addCase(c1,e=>{f8(e)}).addCase(u3,e=>{f8(e)}).addCase(u2,e=>{f8(e)}).addCase(uB,e=>{f8(e)}).addCase(dl,e=>{f8(e)}).addCase(dg,e=>{f8(e)}).addCase(sT,e=>{f8(e)}).addCase(dc,e=>{f8(e)}).addCase(dy,e=>{f8(e)}).addCase(cS,e=>{f8(e)}).addCase(f4,e=>{f8(e)})});function f8(e){e.firstResult=nK().firstResult}function f9(e){let{firstResult:t,numberOfResults:r}=e;return f7(t,r)}function f7(e,t){return Math.round(e/t)+1}function pe(e,t){return Math.ceil(Math.min(e,5e3)/t)}function pt(e){return e.pagination.numberOfResults}var pr=e=>f7(e.pagination.firstResult,pt(e)),pn=e=>pe(e.pagination.totalCountFiltered,pt(e)),pa=(e,t)=>{var r,n;let a,i,o;let s=pr(e),l=pn(e),u={start:s-(a=Math.floor(t/2)),end:s+(t%2==0?a-1:a)};return function(e){let t=[];for(let r=e.start;r<=e.end;++r)t.push(r);return t}((i=Math.max(1-(r=u).start,0),o=Math.max((n=u={start:r.start+i,end:r.end+i}).end-l,0),u={start:Math.max(n.start-o,1),end:n.end-o}))},pi=()=>o8("analytics/pager/resize",(e,t)=>{var r;return e.makePagerResize({currentResultsPerPage:(null==(r=t.pagination)?void 0:r.numberOfResults)||nK().numberOfResults})}),po=()=>o8("analytics/pager/number",(e,t)=>e.makePagerNumber({pagerNumber:pr(t)})),ps=()=>o8("analytics/pager/next",(e,t)=>e.makePagerNext({pagerNumber:pr(t)})),pl=()=>o8("analytics/pager/previous",(e,t)=>e.makePagerPrevious({pagerNumber:pr(t)})),pu=new rj({numberOfPages:new rT({default:5,min:0})}),pc=new rj({page:new rT({min:1})});function pd(e,t={}){let{dispatch:r}=e,n=function(e,t={}){e.addReducers({configuration:un,pagination:f6});let r=uk(e),{dispatch:n}=e,a=r2(e,pu,t.options,"buildPager"),i=r1(e,pc,t.initialState,"buildPager").page;i&&n(sJ(i));let o=()=>pr(e.state),s=()=>{let{numberOfPages:t}=a;return pa(e.state,t)},l=()=>pn(e.state);return{...r,get state(){let e=o(),t=l();return{currentPage:e,currentPages:s(),maxPage:t,hasPreviousPage:e>1&&t>0,hasNextPage:e<t}},selectPage(e){n(sK(e))},nextPage(){n(sZ())},previousPage(){n(sX())},isCurrentPage(e){return e===this.state.currentPage}}}(e,t);return{...n,get state(){return n.state},selectPage(e){n.selectPage(e),r(lY({legacy:po()}))},nextPage(){n.nextPage(),r(lY({legacy:ps()}))},previousPage(){n.previousPage(),r(lY({legacy:pl()}))}}}var pf=new rj({fieldsToInclude:new rB({required:!1,each:new r_({required:!0,emptyAllowed:!1})})});function pp(e,t){return function(e,t){e.addReducers({search:l9,configuration:un,fields:uD});let r=uk(e),n=function(e){e.addReducers({search:l9});let t=uk(e),r=()=>e.state;return{...t,get state(){let e=r();return{hasError:null!==e.search.error,isLoading:e.search.isLoading,hasResults:!!e.search.results.length,firstSearchExecuted:l5(e)}}}}(e),{dispatch:a}=e,i=()=>e.state,o=r2(e,pf,null==t?void 0:t.options,"buildCoreResultList");o.fieldsToInclude&&a(uO(o.fieldsToInclude));let s=()=>e.state.search.results.length<e.state.search.response.totalCountFiltered,l=0,u=0,c=!1;return{...r,get state(){let e=i();return{...n.state,results:e.search.results,moreResultsAvailable:s(),searchResponseId:e.search.searchResponseId}},fetchMoreResults:()=>{if(!e.state.search.isLoading){if(!s()){e.logger.info("No more results are available for the result list to fetch.");return}if(Date.now()-l<200){if(++u>=5){l=Date.now(),c||e.logger.error('The result list method "fetchMoreResults" execution prevented because it has been triggered consecutively 5 times, with little delay. Please verify the conditions under which the function is called.'),c=!0;return}}else u=0;c=!1,(null==t?void 0:t.fetchMoreResultsActionCreator)&&a(null==t?void 0:t.fetchMoreResultsActionCreator()).then(()=>l=Date.now())}}}}(e,{...t,fetchMoreResultsActionCreator:lW})}var ph={results:new rB({required:!0,each:new rN({values:sn})}),maxLength:new rT({required:!0,min:1,default:10})},pg=ty("recentResults/registerRecentResults",e=>r0(e,ph)),pv=ty("recentResults/pushRecentResult",e=>(sa(e),{payload:e})),py=ty("recentResults/clearRecentResults"),pm=e=>o8({prefix:"analytics/result/open",__legacy__getBuilder:(t,r)=>(sa(e),t.makeDocumentOpen(se(e,r),st(e))),analyticsType:"itemClick",analyticsPayloadBuilder:t=>{var r,n;let a=se(e,t),i=st(e);return{searchUid:null!=(n=null==(r=t.search)?void 0:r.response.searchUid)?n:"",position:a.documentPosition,itemMetadata:{uniqueFieldName:i.contentIDKey,uniqueFieldValue:i.contentIDValue,title:a.documentTitle,author:a.documentAuthor,url:a.documentUrl}}}});function pS(e,t){let r=!1,n=()=>{r||(r=!0,e.dispatch(pm(t.options.result)))};return function(e,t,r){let n;e.addReducers({configuration:un});return t.options,{select:ua(r,1e3,{isImmediate:!0}),beginDelayedSelect(){n=setTimeout(r,1e3)},cancelPendingSelect(){n&&clearTimeout(n)}}}(e,t,()=>{n(),e.dispatch(pv(t.options.result))})}var pb=new rj({numberOfResults:new rT({min:0})});function pw(e,t={}){e.addReducers({pagination:f6,configuration:un});let r=function(e,t={}){e.addReducers({pagination:f6,configuration:un});let r=uk(e),{dispatch:n}=e,a=()=>e.state,i=r1(e,pb,t.initialState,"buildResultsPerPage").numberOfResults;return void 0!==i&&n(sW(i)),{...r,get state(){return{numberOfResults:a().pagination.numberOfResults}},set(e){n(sG(e))},isSetTo(e){return e===this.state.numberOfResults}}}(e,t),{dispatch:n}=e;return{...r,get state(){return{...r.state}},set(e){r.set(e),n(lY({legacy:pi()}))}}}var pC={id:rW},pk=ty("querySuggest/register",e=>r0(e,{...pC,count:new rT({min:0})})),pO=ty("querySuggest/unregister",e=>r0(e,pC)),pI=ty("querySuggest/selectSuggestion",e=>r0(e,{...pC,expression:rJ})),pA=ty("querySuggest/clear",e=>r0(e,pC)),pq=tH("querySuggest/fetch",async(e,{getState:t,rejectWithValue:r,extra:{apiClient:n,validatePayload:a}})=>{a(e,pC);let i=e.id,o=await pE(i,t()),s=await n.querySuggest(o);return n_(s)?r(s.error):{id:i,q:o.q,...s.success}}),pE=async(e,t)=>({accessToken:t.configuration.accessToken,organizationId:t.configuration.organizationId,url:t.configuration.search.apiBaseUrl,count:t.querySuggest[e].count,q:t.querySet[e],locale:t.configuration.search.locale,timezone:t.configuration.search.timezone,actionsHistory:t.configuration.analytics.enabled?oN.getHistory():[],...t.context&&{context:t.context.contextValues},...t.pipeline&&{pipeline:t.pipeline},...t.searchHub&&{searchHub:t.searchHub},...t.configuration.analytics.enabled&&{visitorId:await o_(t.configuration.analytics),...t.configuration.analytics.enabled&&await s1(t.configuration.analytics)},...t.configuration.search.authenticationProviders.length&&{authentication:t.configuration.search.authenticationProviders.join(",")}}),px=()=>o8("analytics/searchbox/submit",e=>e.makeSearchboxSubmit()),pR=()=>({actionCause:ss.searchboxSubmit,getEventExtraPayload:e=>new oY(()=>e).getBaseMetadata()}),pD={id:rW,query:rJ},pj=ty("querySet/register",e=>r0(e,pD)),pF=ty("querySet/update",e=>r0(e,pD)),pP=tP({},e=>{e.addCase(pj,(e,t)=>{let{id:r,query:n}=t.payload;r in e||(e[r]=n)}).addCase(pF,(e,t)=>{let{id:r,query:n}=t.payload;pT(e,r,n)}).addCase(pI,(e,t)=>{let{id:r,expression:n}=t.payload;pT(e,r,n)}).addCase(lH.fulfilled,(e,t)=>{let{queryExecuted:r}=t.payload;pM(e,r)}).addCase(sO,(e,t)=>{rM(t.payload.q)||pM(e,t.payload.q)}).addCase(sD.fulfilled,(e,t)=>{if(t.payload)for(let[r,n]of Object.entries(t.payload.querySet))pT(e,r,n)})});function pM(e,t){Object.keys(e).forEach(r=>e[r]=t)}var pT=(e,t,r)=>{t in e&&(e[t]=r)},pU=e=>o8("analytics/querySuggest",(t,r)=>{let n=function(e,t){let{id:r,suggestion:n}=t,a=e.querySuggest&&e.querySuggest[r];if(!a)throw Error(`Unable to determine the query suggest analytics metadata to send because no query suggest with id "${r}" was found. Please check the sent #id.`);let i=a.completions.map(e=>e.expression),o=a.partialQueries.length-1,s=a.partialQueries[o]||"",l=a.responseId;return{suggestionRanking:i.indexOf(n),partialQuery:s,partialQueries:a.partialQueries,suggestions:i,querySuggestResponseId:l}}(r,e);return t.makeOmniboxAnalytics(n)}),pV=(e,t)=>({actionCause:ss.omniboxAnalytics,getEventExtraPayload:r=>new oY(()=>r).getOmniboxAnalyticsMetadata(e,t)}),pL=tH("commerce/querySuggest/fetch",async(e,{getState:t,rejectWithValue:r,extra:{apiClient:n,validatePayload:a}})=>{a(e,pC);let i=t(),o=p$(e.id,i),s=await n.querySuggest(o);return n_(s)?r(s.error):{id:e.id,query:o.query,...s.success}}),p$=(e,t)=>{let{view:r,user:n,...a}=t.commerceContext;return{accessToken:t.configuration.accessToken,url:t.configuration.platformUrl,organizationId:t.configuration.organizationId,query:t.querySet[e],...a,context:{user:n,view:r,cart:t.cart.cartItems.map(e=>t.cart.cart[e])}}},p_=tP({},e=>e.addCase(pk,(e,t)=>{let r=t.payload.id;r in e||(e[r]={id:"",completions:[],responseId:"",count:5,currentRequestId:"",error:null,partialQueries:[],isLoading:!1,...t.payload})}).addCase(pO,(e,t)=>{delete e[t.payload.id]}).addCase(pq.pending,pQ).addCase(pq.fulfilled,(e,t)=>{let r=e[t.meta.arg.id];if(!r||t.meta.requestId!==r.currentRequestId)return;let{q:n}=t.payload;n&&r.partialQueries.push(n.replace(/;/,encodeURIComponent(";"))),r.responseId=t.payload.responseId,r.completions=t.payload.completions,r.isLoading=!1,r.error=null}).addCase(pq.rejected,pN).addCase(pL.pending,pQ).addCase(pL.fulfilled,(e,t)=>{let r=e[t.meta.arg.id];if(!r||t.meta.requestId!==r.currentRequestId)return;let{query:n}=t.payload;n&&r.partialQueries.push(n.replace(/;/,encodeURIComponent(";"))),r.responseId=t.payload.responseId,r.completions=t.payload.completions.map(e=>({expression:e.expression,highlighted:e.highlighted,score:0,executableConfidence:0})),r.isLoading=!1,r.error=null}).addCase(pL.rejected,pN).addCase(pA,(e,t)=>{let r=e[t.payload.id];r&&(r.responseId="",r.completions=[],r.partialQueries=[])}));function pQ(e,t){let r=e[t.meta.arg.id];r&&(r.currentRequestId=t.meta.requestId,r.isLoading=!0)}function pN(e,t){let r=e[t.meta.arg.id];r&&(r.error=t.payload||null,r.isLoading=!1)}var pz=tP(nZ(),e=>e.addCase(s0,(e,t)=>({...e,...t.payload})).addCase(lk,(e,t)=>{e.q=t.payload}).addCase(pI,(e,t)=>{e.q=t.payload.expression}).addCase(sD.fulfilled,(e,t)=>{var r,n;return null!=(n=null==(r=t.payload)?void 0:r.query)?n:e}).addCase(sO,(e,t)=>{var r,n;e.q=null!=(r=t.payload.q)?r:e.q,e.enableQuerySyntax=null!=(n=t.payload.enableQuerySyntax)?n:e.enableQuerySyntax})),pB={enableQuerySyntax:!1,numberOfSuggestions:5,clearFilters:!0},pH={open:new r_,close:new r_},pY={id:rW,numberOfSuggestions:new rT({min:0}),enableQuerySyntax:new rV,highlightOptions:new rN({values:{notMatchDelimiters:new rN({values:pH}),exactMatchDelimiters:new rN({values:pH}),correctionDelimiters:new rN({values:pH})}}),clearFilters:new rV},pW=new rj(pY);function pG(e,t={}){let r=function(e,t){var r,n;e.addReducers({query:pz,querySuggest:p_,configuration:un,querySet:pP,search:l9});let a=uk(e),{dispatch:i}=e,o=()=>e.state,s=(null==(r=t.options)?void 0:r.id)||nr("search_box"),l={id:s,highlightOptions:{...null==(n=t.options)?void 0:n.highlightOptions},...pB,...t.options};r2(e,pW,l,"buildSearchBox"),i(pj({id:s,query:e.state.query.q})),l.numberOfSuggestions&&i(pk({id:s,count:l.numberOfSuggestions}));let u=()=>e.state.querySet[l.id],c=async e=>{let{enableQuerySyntax:r,clearFilters:n}=l;i(lB({q:u(),enableQuerySyntax:r,clearFilters:n})),t.isNextAnalyticsReady?i(t.executeSearchActionCreator(e)):i(t.executeSearchActionCreator(e.legacy))};return{...a,updateText(e){i(pF({id:s,query:e})),this.showSuggestions()},clear(){i(pF({id:s,query:""})),i(pA({id:s}))},showSuggestions(){l.numberOfSuggestions&&i(t.fetchQuerySuggestionsActionCreator({id:s}))},selectSuggestion(e){i(pI({id:s,expression:e})),c({legacy:pU({id:s,suggestion:e}),next:pV(s,e)}).then(()=>{i(pA({id:s}))})},submit(e=px(),t){c({legacy:e,next:t}),i(pA({id:s}))},get state(){var d;let e=o(),t=e.querySuggest[l.id],r=(d=l.highlightOptions,t?t.completions.map(e=>({highlightedValue:ad(e.highlighted,d),rawValue:e.expression})):[]),n=!!t&&t.isLoading;return{value:u(),suggestions:r,isLoading:e.search.isLoading,isLoadingSuggestions:n}}}}(e,{...t,executeSearchActionCreator:lH,fetchQuerySuggestionsActionCreator:pq,isNextAnalyticsReady:!0});return{...r,submit(){r.submit(px(),pR())},get state(){return r.state}}}tP({},e=>{e.addCase(sz,(e,t)=>{let{id:r}=t.payload;e[r]||(e[r]={q:"",cache:{}})}),e.addCase(sB,(e,t)=>{let{q:r,id:n}=t.payload;r&&(e[n].q=r)}),e.addCase(sH,(e,t)=>{let{id:r}=t.payload;Object.entries(e[r].cache).forEach(([t,n])=>{n&&n.expiresAt&&Date.now()>=n.expiresAt&&delete e[r].cache[t]})}),e.addCase(lJ.pending,(e,t)=>{for(let t in e)for(let r in e[t].cache)e[t].cache[r].isActive=!1;if(!pK(e,t.meta)){pJ(e,t.meta);return}let r=pK(e,t.meta);r.isLoading=!0,r.isActive=!0,r.error=null}),e.addCase(lJ.fulfilled,(e,t)=>{let{results:r,searchUid:n,totalCountFiltered:a,duration:i}=t.payload,{cacheTimeout:o}=t.meta.arg,s=pK(e,t.meta);s.isActive=!0,s.searchUid=n,s.isLoading=!1,s.error=null,s.results=r,s.expiresAt=o?o+Date.now():0,s.totalCountFiltered=a,s.duration=i}),e.addCase(lJ.rejected,(e,t)=>{let r=pK(e,t.meta);r.error=t.error||null,r.isLoading=!1,r.isActive=!1})});var pJ=(e,t)=>{let{q:r,id:n}=t.arg;e[n].cache[r]={isLoading:!0,error:null,results:[],expiresAt:0,isActive:!0,searchUid:"",totalCountFiltered:0,duration:0}},pK=(e,t)=>{let{q:r,id:n}=t.arg;return e[n].cache[r]||null},pZ={searchBoxId:rG,maxResultsPerQuery:new rT({required:!0,min:1}),cacheTimeout:new rT};new rj(pZ);var pX=()=>o8("analytics/sort/results",(e,t)=>e.makeResultsSort({resultsSortBy:t.sortCriteria||n6()})),p0=()=>({actionCause:ss.resultsSort,getEventExtraPayload:e=>new oY(()=>e).getResultSortMetadata()}),p1={by:new rY({enum:n1,required:!0})},p2=ty("sortCriteria/register",e=>p5(e)),p3=ty("sortCriteria/update",e=>p5(e)),p5=e=>rH(e)?(e.forEach(e=>r0(e,p1)),{payload:e}):r0(e,p1),p4=tP(n6(),e=>{e.addCase(p2,(e,t)=>n2(t.payload)).addCase(p3,(e,t)=>n2(t.payload)).addCase(sD.fulfilled,(e,t)=>{var r,n;return null!=(n=null==(r=t.payload)?void 0:r.sortCriteria)?n:e}).addCase(sO,(e,t)=>{var r;return null!=(r=t.payload.sortCriteria)?r:e})});function p6(e,t={}){let{dispatch:r}=e,n=function(e,t){var r;e.addReducers({configuration:un,sortCriteria:p4});let n=uk(e),{dispatch:a}=e,i=()=>e.state;!function(e,t){if(!t)return;let r=new rj({criterion:new rB({each:n4})}),n=t.criterion?rH(t.criterion)?t.criterion:[t.criterion]:[];r1(e,r,{...t,criterion:n},"buildSort")}(e,t.initialState);let o=null==(r=t.initialState)?void 0:r.criterion;return o&&a(p2(o)),{...n,sortBy(e){a(p3(e)),a(sK(1))},isSortedBy(e){return this.state.sortCriteria===n2(e)},get state(){return{sortCriteria:i().sortCriteria}}}}(e,t),a=()=>r(lH({legacy:pX(),next:p0()}));return{...n,get state(){return n.state},sortBy(e){n.sortBy(e),a()}}}var p8=new rN({options:{required:!0},values:{caption:rJ,expression:rJ,state:new r_({constrainTo:["idle","selected","excluded"]})}}),p9=new rB({required:!0,each:p8}),p7=ty("staticFilter/register",e=>r0(e,{id:rW,values:p9})),he=ty("staticFilter/toggleSelect",e=>r0(e,{id:rW,value:p8})),ht=ty("staticFilter/toggleExclude",e=>r0(e,{id:rW,value:p8})),hr=ty("staticFilter/deselectAllFilterValues",e=>r0(e,rW));function hn(e,t){t in e&&Object.keys(e).forEach(r=>{e[r].isActive=r===t})}function ha(e){return function(e){e.addReducers({search:l9,facetOptions:dm});let t=uk(e),r=()=>e.state;return{...t,sort(e){return lh(e,this.state.facetIds)},get state(){return{facetIds:r().search.response.facets.map(e=>e.facetId)}}}}(e)}function hi(e){return"redirect"===e.type}tP({},e=>e.addCase(p7,(e,t)=>{let r=t.payload,{id:n}=r;n in e||(e[n]=r)}).addCase(he,(e,t)=>{let{id:r,value:n}=t.payload,a=e[r];if(!a)return;let i=a.values.find(e=>e.caption===n.caption);if(!i)return;let o="selected"===i.state;i.state=o?"idle":"selected"}).addCase(ht,(e,t)=>{let{id:r,value:n}=t.payload,a=e[r];if(!a)return;let i=a.values.find(e=>e.caption===n.caption);if(!i)return;let o="excluded"===i.state;i.state=o?"idle":"excluded"}).addCase(hr,(e,t)=>{let r=e[t.payload];r&&r.values.forEach(e=>e.state="idle")}).addCase(sT,e=>{Object.values(e).forEach(e=>{e.values.forEach(e=>e.state="idle")})}).addCase(sO,(e,t)=>{let r=t.payload.sf||{};Object.entries(e).forEach(([e,t])=>{let n=r[e]||[];t.values.forEach(e=>{e.state=n.includes(e.caption)?"selected":"idle"})})})),new rj({id:rW,values:p9}),tP({},e=>{e.addCase(ut,(e,t)=>{let r=t.payload,{id:n}=r;n in e||(e[n]={...r,isActive:!1})}).addCase(ur,(e,t)=>{hn(e,t.payload)}).addCase(sO,(e,t)=>{hn(e,t.payload.tab||"")}).addCase(sD.fulfilled,(e,t)=>{var r,n;return null!=(n=null==(r=t.payload)?void 0:r.tabSet)?n:e})}),new rj({expression:rJ,id:rW}),new rj({isActive:new rV}),new rB({required:!0,each:rW});var ho=class{constructor(e){this.response=e}get basicExpression(){return this.response.parsedInput.basicExpression}get largeExpression(){return this.response.parsedInput.largeExpression}get redirectionUrl(){let e=this.response.preprocessingOutput.triggers.filter(hi);return e.length?e[0].content:null}},hs=ty("standaloneSearchBox/register",e=>r0(e,{id:rW,redirectionUrl:rW})),hl=ty("standaloneSearchBox/reset",e=>r0(e,{id:rW})),hu=ty("standaloneSearchBox/updateAnalyticsToSearchFromLink",e=>r0(e,{id:rW})),hc=ty("standaloneSearchBox/updateAnalyticsToOmniboxFromLink"),hd=tH("standaloneSearchBox/fetchRedirect",async(e,{dispatch:t,getState:r,rejectWithValue:n,extra:{apiClient:a,validatePayload:i}})=>{i(e,{id:new r_({emptyAllowed:!1})});let o=await hp(r()),s=await a.plan(o);if(n_(s))return n(s.error);let{redirectionUrl:l}=new ho(s.success);return l&&t(hf(l)),l||""}),hf=e=>o8("analytics/standaloneSearchBox/redirect",t=>t.makeTriggerRedirect({redirectedTo:e})),hp=async e=>({accessToken:e.configuration.accessToken,organizationId:e.configuration.organizationId,url:e.configuration.search.apiBaseUrl,locale:e.configuration.search.locale,timezone:e.configuration.search.timezone,q:e.query.q,...e.context&&{context:e.context.contextValues},...e.pipeline&&{pipeline:e.pipeline},...e.searchHub&&{searchHub:e.searchHub},...e.configuration.analytics.enabled&&{visitorId:await o_(e.configuration.analytics)},...e.configuration.analytics.enabled&&await s1(e.configuration.analytics),...e.configuration.search.authenticationProviders.length&&{authentication:e.configuration.search.authenticationProviders.join(",")}});function hh(e){return{defaultRedirectionUrl:e,redirectTo:"",isLoading:!1,analytics:{cause:"",metadata:null}}}async function hg(e,t){var r;let{search:n,accessToken:a,organizationId:i,analytics:o}=e.configuration,s=(null==(r=e.query)?void 0:r.q)||"";return{url:n.apiBaseUrl,accessToken:a,organizationId:i,enableNavigation:!1,...o.enabled&&{visitorId:await o_(e.configuration.analytics)},q:s,...t,requestedOutputSize:t.requestedOutputSize||0,...n.authenticationProviders.length&&{authentication:n.authenticationProviders.join(",")}}}tP({},e=>e.addCase(hs,(e,t)=>{let{id:r,redirectionUrl:n}=t.payload;r in e||(e[r]=hh(n))}).addCase(hl,(e,t)=>{let{id:r}=t.payload,n=e[r];if(n){e[r]=hh(n.defaultRedirectionUrl);return}}).addCase(hd.pending,(e,t)=>{let r=e[t.meta.arg.id];r&&(r.isLoading=!0)}).addCase(hd.fulfilled,(e,t)=>{let r=t.payload,n=e[t.meta.arg.id];n&&(n.redirectTo=r||n.defaultRedirectionUrl,n.isLoading=!1)}).addCase(hd.rejected,(e,t)=>{let r=e[t.meta.arg.id];r&&(r.isLoading=!1)}).addCase(hu,(e,t)=>{let r=e[t.payload.id];r&&(r.analytics.cause="searchFromLink")}).addCase(hc,(e,t)=>{let r=e[t.payload.id];r&&(r.analytics.cause="omniboxFromLink",r.analytics.metadata=t.payload.metadata)})),new rj({...pY,redirectionUrl:new r_({required:!0,emptyAllowed:!1})}),new rj({parameters:new rN({options:{required:!0},values:sk})}),new rj({fragment:new r_});var hv=tH("resultPreview/fetchResultContent",async(e,{extra:t,getState:r,rejectWithValue:n})=>{let a=r(),i=await hg(a,e),o=await t.apiClient.html(i);return n_(o)?n(o.error):{content:o.success,uniqueId:e.uniqueId}}),hy=ty("resultPreview/next"),hm=ty("resultPreview/previous"),hS=ty("resultPreview/prepare",e=>r0(e,{results:new rB({required:!0})})),hb=tH("resultPreview/updateContentURL",async(e,{getState:t,extra:r})=>{let n=t(),a=nT(await e.buildResultPreviewRequest(n,{uniqueId:e.uniqueId,requestedOutputSize:e.requestedOutputSize}),e.path);return(null==a?void 0:a.length)>2048&&r.logger.error("The content URL was truncated as it exceeds the maximum allowed length of 2048 characters."),{contentURL:a}}),hw=e=>{let{content:t,isLoading:r,uniqueId:n,contentURL:a}=ny();e.content=t,e.isLoading=r,e.uniqueId=n,e.contentURL=a},hC=e=>e.filter(e=>e.hasHtmlVersion).map(e=>e.uniqueId);function hk(e,t){return e.raw[t.parent]}function hO(e,t){let r=e.raw[t.child];return nn(r)?r[0]:r}function hI(e,t,r){let n={};return e.forEach(e=>{var a;let i,o;let s=e.raw[t.collection];s&&(hO(e,t)||e.parentResult)&&(n[s]=(i=o0(e),{result:o=null!=(a=null!=r?r:i.find(e=>{var r,n;let a=void 0===hk(e,t),i=(r=hk(e,t),n=hO(e,t),(r||n)!==void 0&&r===n);return a||i}))?a:function e(t){return t.parentResult?e(t.parentResult):t}(e),children:function e(t,r,n,a=[]){let i=hO(t,n);return i?-1!==a.indexOf(i)?[]:r.filter(e=>{let r=hO(e,n)===hO(t,n);return hk(e,n)===i&&!r}).map(t=>({result:t,children:e(t,r,n,[...a,i])})):[]}(o,i,t),moreResultsAvailable:!0,isLoadingMoreResults:!1}))}),n}function hA(e,t){if(!e.collections[t])throw Error(`Missing collection ${t} from ${Object.keys(e.collections)}: Folding most probably in an invalid state...`);return e.collections[t]}tP(ny(),e=>{e.addCase(hv.pending,e=>{e.isLoading=!0}).addCase(hv.fulfilled,(e,t)=>{let{content:r,uniqueId:n}=t.payload;e.position=e.resultsWithPreview.indexOf(n),e.content=r,e.uniqueId=n,e.isLoading=!1}).addCase(lH.fulfilled,(e,t)=>{hw(e),e.resultsWithPreview=hC(t.payload.response.results)}).addCase(lW.fulfilled,(e,t)=>{hw(e),e.resultsWithPreview=e.resultsWithPreview.concat(hC(t.payload.response.results))}).addCase(lY.fulfilled,hw).addCase(hS,(e,t)=>{e.resultsWithPreview=hC(t.payload.results)}).addCase(hy,e=>{if(e.isLoading)return;let t=e.position+1;t>e.resultsWithPreview.length-1&&(t=0),e.position=t}).addCase(hm,e=>{if(e.isLoading)return;let t=e.position-1;t<0&&(t=e.resultsWithPreview.length-1),e.position=t}).addCase(hb.fulfilled,(e,t)=>{e.contentURL=t.payload.contentURL})}),tP(nG(),e=>e.addCase(lH.fulfilled,(e,{payload:t})=>{e.collections=e.enabled?hI(t.response.results,e.fields):{}}).addCase(lY.fulfilled,(e,{payload:t})=>{e.collections=e.enabled?hI(t.response.results,e.fields):{}}).addCase(lW.fulfilled,(e,{payload:t})=>{e.collections=e.enabled?{...e.collections,...hI(t.response.results,e.fields)}:{}}).addCase(ux,(e,{payload:t})=>{var r,n,a,i;return e.enabled?e:{enabled:!0,collections:{},fields:{collection:null!=(r=t.collectionField)?r:e.fields.collection,parent:null!=(n=t.parentField)?n:e.fields.parent,child:null!=(a=t.childField)?a:e.fields.child},filterFieldRange:null!=(i=t.numberOfFoldedResults)?i:e.filterFieldRange}}).addCase(uR.pending,(e,{meta:t})=>{hA(e,t.arg).isLoadingMoreResults=!0}).addCase(uR.rejected,(e,{meta:t})=>{hA(e,t.arg).isLoadingMoreResults=!1}).addCase(uR.fulfilled,(e,{payload:{collectionId:t,results:r,rootResult:n}})=>{let a=hI(r,e.fields,n);if(!a||!a[t])throw Error(`Unable to create collection ${t} from received results: ${JSON.stringify(r)}. Folding most probably in an invalid state... `);e.collections[t]=a[t],e.collections[t].moreResultsAvailable=!1})),new rj(uE),tP({redirectTo:"",query:"",executions:[],notifications:[],queryModification:{originalQuery:"",newQuery:"",queryToIgnore:""}},e=>e.addCase(lH.pending,e=>{e.query="",e.queryModification={originalQuery:"",newQuery:"",queryToIgnore:e.queryModification.queryToIgnore}}).addCase(lH.fulfilled,(e,t)=>{var r;let n=[],a=[],i=[],o=[];t.payload.response.triggers.forEach(e=>{switch(e.type){case"redirect":n.push(e.content);break;case"query":a.push(e.content);break;case"execute":i.push({functionName:e.content.name,params:e.content.params});break;case"notify":o.push(e.content)}}),e.redirectTo=null!=(r=n[0])?r:"",e.query=e.queryModification.newQuery,e.executions=i,e.notifications=o}).addCase(lx,(e,t)=>{e.queryModification={...t.payload,queryToIgnore:""}}).addCase(lE,(e,t)=>{e.queryModification.queryToIgnore=t.payload}));var hq=()=>new rN({values:{questionAnswerId:rW},options:{required:!0}}),hE=ty("smartSnippet/expand"),hx=ty("smartSnippet/collapse"),hR=ty("smartSnippet/like"),hD=ty("smartSnippet/dislike"),hj=ty("smartSnippet/feedbackModal/open"),hF=ty("smartSnippet/feedbackModal/close"),hP=ty("smartSnippet/related/expand",e=>r0(e,hq())),hM=ty("smartSnippet/related/collapse",e=>r0(e,hq())),hT=(e,t)=>e.findIndex(e=>e.questionAnswerId===t.questionAnswerId);function hU({question:e,answerSnippet:t,documentId:{contentIdKey:r,contentIdValue:n}}){var a;return a=JSON.stringify({question:e,answerSnippet:t,contentIdKey:r,contentIdValue:n}),("undefined"!=typeof btoa?btoa:nt.btoa)(encodeURI(a))}tP(nX(),e=>e.addCase(hE,e=>{e.expanded=!0}).addCase(hx,e=>{e.expanded=!1}).addCase(hR,e=>{e.liked=!0,e.disliked=!1,e.feedbackModalOpen=!1}).addCase(hD,e=>{e.liked=!1,e.disliked=!0}).addCase(hj,e=>{e.feedbackModalOpen=!0}).addCase(hF,e=>{e.feedbackModalOpen=!1}).addCase(lH.fulfilled,(e,t)=>{let r=t.payload.response.questionAnswer.relatedQuestions.map((t,r)=>{var n;let a;return n=e.relatedQuestions[r],a=hU(t),n&&a===n.questionAnswerId?n:{contentIdKey:t.documentId.contentIdKey,contentIdValue:t.documentId.contentIdValue,expanded:!1,questionAnswerId:a}}),n=hU(t.payload.response.questionAnswer);return e.questionAnswerId===n?{...e,relatedQuestions:r}:{...nX(),relatedQuestions:r,questionAnswerId:n}}).addCase(hP,(e,t)=>{let r=hT(e.relatedQuestions,t.payload);-1!==r&&(e.relatedQuestions[r].expanded=!0)}).addCase(hM,(e,t)=>{let r=hT(e.relatedQuestions,t.payload);-1!==r&&(e.relatedQuestions[r].expanded=!1)}));var hV={queries:new rB({required:!0,each:new r_({emptyAllowed:!1})}),maxLength:new rT({required:!0,min:1,default:10})},hL=ty("recentQueries/registerRecentQueries",e=>r0(e,hV)),h$=ty("recentQueries/clearRecentQueries");tP({queries:[],maxLength:10},e=>{e.addCase(hL,(e,t)=>{e.queries=t.payload.queries.slice(0,t.payload.maxLength),e.maxLength=t.payload.maxLength}).addCase(h$,e=>{e.queries=[]}).addCase(lH.fulfilled,(e,t)=>{let r=t.payload.queryExecuted.trim(),n=t.payload.response.results;if(!r.length||!n.length)return;e.queries=e.queries.filter(e=>e!==r);let a=e.queries.slice(0,e.maxLength-1);e.queries=[r,...a]})}),new rj({queries:new rB({required:!0})}),new rj({maxLength:new rT({required:!0,min:1}),clearFilters:new rV}),tP({results:[],maxLength:10},e=>{e.addCase(pg,(e,t)=>{e.results=t.payload.results.slice(0,t.payload.maxLength),e.maxLength=t.payload.maxLength}).addCase(py,e=>{e.results=[]}).addCase(pv,(e,t)=>{let r=t.payload;e.results=e.results.filter(e=>e.uniqueId!==r.uniqueId);let n=e.results.slice(0,e.maxLength-1);e.results=[r,...n]})}),new rj({results:new rB({required:!0})}),new rj({maxLength:new rT({required:!0,min:1})}),tP(al(),e=>{e.addCase(lH.fulfilled,(e,t)=>{var r;e.set={};let n=null==(r=t.payload.response.generateAutomaticFacets)?void 0:r.facets;null==n||n.forEach(t=>{e.set[t.field]={response:t}})}).addCase(f3,(e,t)=>{t.payload.desiredCount&&(e.desiredCount=t.payload.desiredCount),t.payload.numberOfValues&&(e.numberOfValues=t.payload.numberOfValues)}).addCase(f4,(e,t)=>{var r;let{field:n,selection:a}=t.payload,i=null==(r=e.set[n])?void 0:r.response;if(!i)return;let o=i.values.find(e=>e.value===a.value);if(!o)return;let s="selected"===o.state;o.state=s?"idle":"selected"}).addCase(f5,(e,t)=>{var r;let n=t.payload,a=null==(r=e.set[n])?void 0:r.response;if(a)for(let e of a.values)e.state="idle"}).addCase(sO,(e,t)=>{var r,n,a;let i=null!=(r=t.payload.af)?r:{},o=Object.keys(e.set);for(let t in i)if(!e.set[t]){let r={field:t,values:[],moreValuesAvailable:!1,label:"",indexScore:0},n=i[t].map(e=>({value:e,state:"selected",numberOfResults:0}));r.values.push(...n),e.set[t]={response:r}}for(let t of o)if(!(t in i))for(let r of(null==(n=e.set[t])?void 0:n.response).values)r.state="idle";for(let t in i){let r=null==(a=e.set[t])?void 0:a.response;if(r)for(let e of r.values)i[t].includes(e.value)?"idle"===e.state&&(e.state="selected"):e.state="idle"}}).addCase(sD.fulfilled,(e,t)=>{if(t.payload&&0!==Object.keys(t.payload.automaticFacetSet.set).length)return t.payload.automaticFacetSet}).addCase(sT,e=>{Object.values(e.set).forEach(({response:e})=>{e.values.forEach(e=>e.state="idle")})})});var h_=e=>o8("analytics/generatedAnswer/streamEnd",(t,r)=>{var n,a,i;let o=null==(i=null==(a=null==(n=r.search)?void 0:n.response)?void 0:a.extendedResults)?void 0:i.generativeQuestionAnsweringId;return o?t.makeGeneratedAnswerStreamEnd({generativeQuestionAnsweringId:o,answerGenerated:e}):null}),hQ=async e=>{var t;return{accessToken:e.configuration.accessToken,organizationId:e.configuration.organizationId,url:e.configuration.platformUrl,streamId:null==(t=e.search.extendedResults)?void 0:t.generativeQuestionAnsweringId}},hN=["default","bullet","step","concise"],hz=new r_({required:!0}),hB=new r_,hH=new rV({required:!0}),hY={id:hz,title:hz,uri:hz,permanentid:hz,clickUri:hB},hW=ty("generatedAnswer/setIsVisible",e=>r0(e,hH)),hG=ty("generatedAnswer/updateMessage",e=>r0(e,{textDelta:hz})),hJ=ty("generatedAnswer/updateCitations",e=>r0(e,{citations:new rB({required:!0,each:new rN({values:hY})})})),hK=ty("generatedAnswer/updateError",e=>r0(e,{message:hB,code:new rT({min:0})})),hZ=ty("generatedAnswer/resetAnswer"),hX=ty("generatedAnswer/like"),h0=ty("generatedAnswer/dislike"),h1=ty("generatedAnswer/feedbackModal/open"),h2=ty("generatedAnswer/feedbackModal/close"),h3=ty("generatedAnswer/sendFeedback"),h5=ty("generatedAnswer/setIsLoading",e=>r0(e,hH)),h4=ty("generatedAnswer/setIsStreaming",e=>r0(e,hH)),h6=ty("generatedAnswer/updateResponseFormat",e=>r0(e,{answerStyle:new r_({required:!0,constrainTo:hN})})),h8=ty("generatedAnswer/registerFieldsToIncludeInCitations",e=>r0(e,rK)),h9=tH("generatedAnswer/streamAnswer",async(e,t)=>{var r;let n=t.getState(),{dispatch:a,extra:i}=t,{setAbortControllerRef:o}=e,s=await hQ(n),l=(e,t)=>{switch(e){case"genqa.messageType":a(hG(JSON.parse(t)));break;case"genqa.citationsType":a(hJ(JSON.parse(t)));break;case"genqa.endOfStreamType":a(h4(!1)),a(h_(JSON.parse(t).answerGenerated));break;default:n.debug&&i.logger.warn(`Unknown payloadType: "${e}"`)}};a(h5(!0));let u=e=>e.streamId===t.getState().search.extendedResults.generativeQuestionAnsweringId,c=null==(r=i.streamingClient)?void 0:r.streamGeneratedAnswer(s,{write:e=>{u(s)&&(a(h5(!1)),e.payload&&e.payloadType&&l(e.payloadType,e.payload))},abort:e=>{u(s)&&a(hK(e))},close:()=>{u(s)&&a(h4(!1))},resetAnswer:()=>{u(s)&&a(hZ())}});c?o(c):a(h5(!1))});tP(nJ(),e=>e.addCase(hW,(e,{payload:t})=>{e.isVisible=t}).addCase(hG,(e,{payload:t})=>{e.isLoading=!1,e.isStreaming=!0,e.answer||(e.answer=""),e.answer+=t.textDelta,delete e.error}).addCase(hJ,(e,{payload:t})=>{e.isLoading=!1,e.isStreaming=!0,e.citations=e.citations.concat(t.citations),delete e.error}).addCase(hK,(e,{payload:t})=>{e.isLoading=!1,e.isStreaming=!1,e.error={...t,isRetryable:1===t.code},e.citations=[],delete e.answer}).addCase(hX,e=>{e.liked=!0,e.disliked=!1}).addCase(h0,e=>{e.liked=!1,e.disliked=!0}).addCase(h1,e=>{e.feedbackModalOpen=!0}).addCase(h2,e=>{e.feedbackModalOpen=!1}).addCase(h3,e=>{e.feedbackSubmitted=!0}).addCase(hZ,e=>({...nJ(),responseFormat:e.responseFormat,fieldsToIncludeInCitations:e.fieldsToIncludeInCitations,isVisible:e.isVisible})).addCase(h5,(e,{payload:t})=>{e.isLoading=t}).addCase(h4,(e,{payload:t})=>{e.isStreaming=t}).addCase(h6,(e,{payload:t})=>{e.responseFormat=t}).addCase(h8,(e,t)=>{e.fieldsToIncludeInCitations=[...new Set(e.fieldsToIncludeInCitations.concat(t.payload))]}));var h7={abortController:void 0,lastRequestId:"",lastStreamId:"",setAbortControllerRef:e=>{h7.abortController=e},getIsStreamInProgress:()=>{var e;return!!h7.abortController&&(null==(e=h7.abortController)||!e.signal.aborted)||(h7.abortController=void 0,!1)},subscribeToSearchRequests:e=>e.subscribe(()=>{var t;let r=e.state,n=r.search.requestId,a=r.search.extendedResults.generativeQuestionAnsweringId;h7.lastRequestId!==n&&(h7.lastRequestId=n,null==(t=h7.abortController)||t.abort(),e.dispatch(hZ())),!h7.getIsStreamInProgress()&&a&&a!==h7.lastStreamId&&(h7.lastStreamId=a,e.dispatch(h9({setAbortControllerRef:h7.setAbortControllerRef})))})},ge=()=>new r_({required:!1,emptyAllowed:!0}),gt=ty("advancedSearchQueries/update",e=>r0(e,{aq:ge(),cq:ge(),lq:ge(),dq:ge()})),gr=ty("advancedSearchQueries/register",e=>r0(e,{aq:ge(),cq:ge(),lq:ge(),dq:ge()}));tP(n7(),e=>{e.addCase(gt,(e,t)=>{let{aq:r,cq:n,lq:a,dq:i}=t.payload;rP(r)||(e.aq=r,e.aqWasSet=!0),rP(n)||(e.cq=n,e.cqWasSet=!0),rP(a)||(e.lq=a,e.lqWasSet=!0),rP(i)||(e.dq=i,e.dqWasSet=!0)}).addCase(gr,(e,t)=>{let{aq:r,cq:n,lq:a,dq:i}=t.payload;rP(r)||(e.defaultFilters.aq=r,e.aqWasSet||(e.aq=r)),rP(n)||(e.defaultFilters.cq=n,e.cqWasSet||(e.cq=n)),rP(a)||(e.defaultFilters.lq=a,e.lqWasSet||(e.lq=a)),rP(i)||(e.defaultFilters.dq=i,e.dqWasSet||(e.dq=i))}).addCase(sD.fulfilled,(e,t)=>{var r,n;return null!=(n=null==(r=t.payload)?void 0:r.advancedSearchQueries)?n:e}).addCase(sO,(e,t)=>{let{aq:r,cq:n}=t.payload;rP(r)||(e.aq=r,e.aqWasSet=!0),rP(n)||(e.cq=n,e.cqWasSet=!0)})});var gn=ty("excerptLength/set",e=>r0(e,new rT({min:0,required:!0})));tP({length:void 0},e=>{e.addCase(gn,(e,t)=>{e.length=t.payload})}),new rj({content:new rF({required:!0}),conditions:new rF({required:!0}),priority:new rT({required:!1,default:0,min:0}),fields:new rB({required:!1,each:rW})}),(d=v||(v={})).getResultProperty=l2,d.fieldsMustBeDefined=e=>t=>e.every(e=>!rM(l2(t,e))),d.fieldsMustNotBeDefined=e=>t=>e.every(e=>rM(l2(t,e))),d.fieldMustMatch=(e,t)=>r=>{let n=l3(e,r);return t.some(e=>n.some(t=>`${t}`.toLowerCase()===e.toLowerCase()))},d.fieldMustNotMatch=(e,t)=>r=>{let n=l3(e,r);return t.every(e=>n.every(t=>`${t}`.toLowerCase()!==e.toLowerCase()))},"undefined"==typeof window&&(r.g.crypto||(r.g.crypto=O("crypto")),!r.g.crypto.getRandomValues&&r.g.crypto.webcrypto&&(r.g.crypto.getRandomValues=(0,r.g.crypto).webcrypto.getRandomValues.bind(r.g.crypto.webcrypto)));/**
 * @license
 *
 * Copyright 2024 Coveo Solutions Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 * 
 *       http://www.apache.org/licenses/LICENSE-2.0
 * 
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}}]);